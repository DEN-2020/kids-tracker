const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-CAhAz16n.js","assets/Auth.module-BTKz4srt.js","assets/Auth-DaMfOphT.css","assets/RegisterPage-tFio-uO8.js","assets/ProfileSelector-uPSrffhp.js","assets/ProfileSelector-QofNWvIu.css","assets/TaskList-C71077W-.js","assets/Tasks.module-B6vfeooQ.js","assets/Tasks-Dw-1n6sP.css","assets/AdminPanel-Oy_WoOxB.js","assets/AdminPanel-DvI-vZ2w.css","assets/Stats-CVGfEpaX.js","assets/Stats-Dt-KLix_.css","assets/Achievements-DgbgYtT4.js","assets/Shop-OGiNwwjG.js"])))=>i.map(i=>d[i]);
function H1(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function G1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ig={exports:{}},Zu={};var eA;function K1(){if(eA)return Zu;eA=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Zu.Fragment=e,Zu.jsx=t,Zu.jsxs=t,Zu}var tA;function Q1(){return tA||(tA=1,ig.exports=K1()),ig.exports}var me=Q1(),rg={exports:{}},we={};var nA;function Y1(){if(nA)return we;nA=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function O(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,ee={};function se(V,$,oe){this.props=V,this.context=$,this.refs=ee,this.updater=oe||K}se.prototype.isReactComponent={},se.prototype.setState=function(V,$){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,$,"setState")},se.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function le(){}le.prototype=se.prototype;function ue(V,$,oe){this.props=V,this.context=$,this.refs=ee,this.updater=oe||K}var Se=ue.prototype=new le;Se.constructor=ue,Y(Se,se.prototype),Se.isPureReactComponent=!0;var Re=Array.isArray;function _e(){}var w={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function D(V,$,oe){var ce=oe.ref;return{$$typeof:r,type:V,key:$,ref:ce!==void 0?ce:null,props:oe}}function P(V,$){return D(V.type,$,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function k(V){var $={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(oe){return $[oe]})}var R=/\/+/g;function ut(V,$){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):$.toString(36)}function It(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(_e,_e):(V.status="pending",V.then(function($){V.status==="pending"&&(V.status="fulfilled",V.value=$)},function($){V.status==="pending"&&(V.status="rejected",V.reason=$)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Q(V,$,oe,ce,Te){var ve=typeof V;(ve==="undefined"||ve==="boolean")&&(V=null);var Ue=!1;if(V===null)Ue=!0;else switch(ve){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(V.$$typeof){case r:case e:Ue=!0;break;case v:return Ue=V._init,Q(Ue(V._payload),$,oe,ce,Te)}}if(Ue)return Te=Te(V),Ue=ce===""?"."+ut(V,0):ce,Re(Te)?(oe="",Ue!=null&&(oe=Ue.replace(R,"$&/")+"/"),Q(Te,$,oe,"",function(Xs){return Xs})):Te!=null&&(N(Te)&&(Te=P(Te,oe+(Te.key==null||V&&V.key===Te.key?"":(""+Te.key).replace(R,"$&/")+"/")+Ue)),$.push(Te)),1;Ue=0;var bt=ce===""?".":ce+":";if(Re(V))for(var ct=0;ct<V.length;ct++)ce=V[ct],ve=bt+ut(ce,ct),Ue+=Q(ce,$,oe,ve,Te);else if(ct=O(V),typeof ct=="function")for(V=ct.call(V),ct=0;!(ce=V.next()).done;)ce=ce.value,ve=bt+ut(ce,ct++),Ue+=Q(ce,$,oe,ve,Te);else if(ve==="object"){if(typeof V.then=="function")return Q(It(V),$,oe,ce,Te);throw $=String(V),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function G(V,$,oe){if(V==null)return V;var ce=[],Te=0;return Q(V,ce,"","",function(ve){return $.call(oe,ve,Te++)}),ce}function ae(V){if(V._status===-1){var $=V._result;$=$(),$.then(function(oe){(V._status===0||V._status===-1)&&(V._status=1,V._result=oe)},function(oe){(V._status===0||V._status===-1)&&(V._status=2,V._result=oe)}),V._status===-1&&(V._status=0,V._result=$)}if(V._status===1)return V._result.default;throw V._result}var Ae=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},xe={map:G,forEach:function(V,$,oe){G(V,function(){$.apply(this,arguments)},oe)},count:function(V){var $=0;return G(V,function(){$++}),$},toArray:function(V){return G(V,function($){return $})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return we.Activity=E,we.Children=xe,we.Component=se,we.Fragment=t,we.Profiler=a,we.PureComponent=ue,we.StrictMode=i,we.Suspense=p,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,we.__COMPILER_RUNTIME={__proto__:null,c:function(V){return w.H.useMemoCache(V)}},we.cache=function(V){return function(){return V.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(V,$,oe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ce=Y({},V.props),Te=V.key;if($!=null)for(ve in $.key!==void 0&&(Te=""+$.key),$)!b.call($,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&$.ref===void 0||(ce[ve]=$[ve]);var ve=arguments.length-2;if(ve===1)ce.children=oe;else if(1<ve){for(var Ue=Array(ve),bt=0;bt<ve;bt++)Ue[bt]=arguments[bt+2];ce.children=Ue}return D(V.type,Te,ce)},we.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},we.createElement=function(V,$,oe){var ce,Te={},ve=null;if($!=null)for(ce in $.key!==void 0&&(ve=""+$.key),$)b.call($,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Te[ce]=$[ce]);var Ue=arguments.length-2;if(Ue===1)Te.children=oe;else if(1<Ue){for(var bt=Array(Ue),ct=0;ct<Ue;ct++)bt[ct]=arguments[ct+2];Te.children=bt}if(V&&V.defaultProps)for(ce in Ue=V.defaultProps,Ue)Te[ce]===void 0&&(Te[ce]=Ue[ce]);return D(V,ve,Te)},we.createRef=function(){return{current:null}},we.forwardRef=function(V){return{$$typeof:d,render:V}},we.isValidElement=N,we.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ae}},we.memo=function(V,$){return{$$typeof:g,type:V,compare:$===void 0?null:$}},we.startTransition=function(V){var $=w.T,oe={};w.T=oe;try{var ce=V(),Te=w.S;Te!==null&&Te(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(_e,Ae)}catch(ve){Ae(ve)}finally{$!==null&&oe.types!==null&&($.types=oe.types),w.T=$}},we.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},we.use=function(V){return w.H.use(V)},we.useActionState=function(V,$,oe){return w.H.useActionState(V,$,oe)},we.useCallback=function(V,$){return w.H.useCallback(V,$)},we.useContext=function(V){return w.H.useContext(V)},we.useDebugValue=function(){},we.useDeferredValue=function(V,$){return w.H.useDeferredValue(V,$)},we.useEffect=function(V,$){return w.H.useEffect(V,$)},we.useEffectEvent=function(V){return w.H.useEffectEvent(V)},we.useId=function(){return w.H.useId()},we.useImperativeHandle=function(V,$,oe){return w.H.useImperativeHandle(V,$,oe)},we.useInsertionEffect=function(V,$){return w.H.useInsertionEffect(V,$)},we.useLayoutEffect=function(V,$){return w.H.useLayoutEffect(V,$)},we.useMemo=function(V,$){return w.H.useMemo(V,$)},we.useOptimistic=function(V,$){return w.H.useOptimistic(V,$)},we.useReducer=function(V,$,oe){return w.H.useReducer(V,$,oe)},we.useRef=function(V){return w.H.useRef(V)},we.useState=function(V){return w.H.useState(V)},we.useSyncExternalStore=function(V,$,oe){return w.H.useSyncExternalStore(V,$,oe)},we.useTransition=function(){return w.H.useTransition()},we.version="19.2.4",we}var iA;function f_(){return iA||(iA=1,rg.exports=Y1()),rg.exports}var Oe=f_();const X1=G1(Oe),gk=H1({__proto__:null,default:X1},[Oe]);var sg={exports:{}},ec={},ag={exports:{}},og={};var rA;function $1(){return rA||(rA=1,(function(r){function e(Q,G){var ae=Q.length;Q.push(G);e:for(;0<ae;){var Ae=ae-1>>>1,xe=Q[Ae];if(0<a(xe,G))Q[Ae]=G,Q[ae]=xe,ae=Ae;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var G=Q[0],ae=Q.pop();if(ae!==G){Q[0]=ae;e:for(var Ae=0,xe=Q.length,V=xe>>>1;Ae<V;){var $=2*(Ae+1)-1,oe=Q[$],ce=$+1,Te=Q[ce];if(0>a(oe,ae))ce<xe&&0>a(Te,oe)?(Q[Ae]=Te,Q[ce]=ae,Ae=ce):(Q[Ae]=oe,Q[$]=ae,Ae=$);else if(ce<xe&&0>a(Te,ae))Q[Ae]=Te,Q[ce]=ae,Ae=ce;else break e}}return G}function a(Q,G){var ae=Q.sortIndex-G.sortIndex;return ae!==0?ae:Q.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,S=3,O=!1,K=!1,Y=!1,ee=!1,se=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function Se(Q){for(var G=t(g);G!==null;){if(G.callback===null)i(g);else if(G.startTime<=Q)i(g),G.sortIndex=G.expirationTime,e(p,G);else break;G=t(g)}}function Re(Q){if(Y=!1,Se(Q),!K)if(t(p)!==null)K=!0,_e||(_e=!0,k());else{var G=t(g);G!==null&&It(Re,G.startTime-Q)}}var _e=!1,w=-1,b=5,D=-1;function P(){return ee?!0:!(r.unstable_now()-D<b)}function N(){if(ee=!1,_e){var Q=r.unstable_now();D=Q;var G=!0;try{e:{K=!1,Y&&(Y=!1,le(w),w=-1),O=!0;var ae=S;try{t:{for(Se(Q),E=t(p);E!==null&&!(E.expirationTime>Q&&P());){var Ae=E.callback;if(typeof Ae=="function"){E.callback=null,S=E.priorityLevel;var xe=Ae(E.expirationTime<=Q);if(Q=r.unstable_now(),typeof xe=="function"){E.callback=xe,Se(Q),G=!0;break t}E===t(p)&&i(p),Se(Q)}else i(p);E=t(p)}if(E!==null)G=!0;else{var V=t(g);V!==null&&It(Re,V.startTime-Q),G=!1}}break e}finally{E=null,S=ae,O=!1}G=void 0}}finally{G?k():_e=!1}}}var k;if(typeof ue=="function")k=function(){ue(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ut=R.port2;R.port1.onmessage=N,k=function(){ut.postMessage(null)}}else k=function(){se(N,0)};function It(Q,G){w=se(function(){Q(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var ae=S;S=G;try{return Q()}finally{S=ae}},r.unstable_requestPaint=function(){ee=!0},r.unstable_runWithPriority=function(Q,G){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ae=S;S=Q;try{return G()}finally{S=ae}},r.unstable_scheduleCallback=function(Q,G,ae){var Ae=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ae+ae:Ae):ae=Ae,Q){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ae+xe,Q={id:v++,callback:G,priorityLevel:Q,startTime:ae,expirationTime:xe,sortIndex:-1},ae>Ae?(Q.sortIndex=ae,e(g,Q),t(p)===null&&Q===t(g)&&(Y?(le(w),w=-1):Y=!0,It(Re,ae-Ae))):(Q.sortIndex=xe,e(p,Q),K||O||(K=!0,_e||(_e=!0,k()))),Q},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(Q){var G=S;return function(){var ae=S;S=G;try{return Q.apply(this,arguments)}finally{S=ae}}}})(og)),og}var sA;function J1(){return sA||(sA=1,ag.exports=$1()),ag.exports}var lg={exports:{}},un={};var aA;function W1(){if(aA)return un;aA=1;var r=f_();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,un.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},un.flushSync=function(p){var g=c.T,v=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=v,i.d.f()}},un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},un.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:O}):v==="script"&&i.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},un.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},un.requestFormReset=function(p){i.d.r(p)},un.unstable_batchedUpdates=function(p,g){return p(g)},un.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.2.4",un}var oA;function Z1(){if(oA)return lg.exports;oA=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),lg.exports=W1(),lg.exports}var lA;function eC(){if(lA)return ec;lA=1;var r=J1(),e=f_(),t=Z1();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var y=!1,A=f.child;A;){if(A===o){y=!0,o=f,u=m;break}if(A===u){y=!0,u=f,o=m;break}A=A.sibling}if(!y){for(A=m.child;A;){if(A===o){y=!0,o=m,u=f;break}if(A===u){y=!0,u=m,o=f;break}A=A.sibling}if(!y)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function ut(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Y:return"Fragment";case se:return"Profiler";case ee:return"StrictMode";case Re:return"Suspense";case _e:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case K:return"Portal";case ue:return n.displayName||"Context";case le:return(n._context.displayName||"Context")+".Consumer";case Se:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case w:return s=n.displayName||null,s!==null?s:ut(n.type)||"Memo";case b:s=n._payload,n=n._init;try{return ut(n(s))}catch{}}return null}var It=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},Ae=[],xe=-1;function V(n){return{current:n}}function $(n){0>xe||(n.current=Ae[xe],Ae[xe]=null,xe--)}function oe(n,s){xe++,Ae[xe]=n.current,n.current=s}var ce=V(null),Te=V(null),ve=V(null),Ue=V(null);function bt(n,s){switch(oe(ve,s),oe(Te,n),oe(ce,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?SE(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=SE(s),n=IE(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(ce),oe(ce,n)}function ct(){$(ce),$(Te),$(ve)}function Xs(n){n.memoizedState!==null&&oe(Ue,n);var s=ce.current,o=IE(s,n.type);s!==o&&(oe(Te,n),oe(ce,o))}function ao(n){Te.current===n&&($(ce),$(Te)),Ue.current===n&&($(Ue),Xu._currentValue=ae)}var oo,lo;function Ii(n){if(oo===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);oo=s&&s[1]||"",lo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oo+n+lo}var Xl=!1;function $s(n,s){if(!n||Xl)return"";Xl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var F=H}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(H){F=H}n.call(Z.prototype)}}else{try{throw Error()}catch(H){F=H}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&F&&typeof H.stack=="string")return[H.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),y=m[0],A=m[1];if(y&&A){var C=y.split(`
`),B=A.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===B.length)for(u=C.length-1,f=B.length-1;1<=u&&0<=f&&C[u]!==B[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==B[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==B[f]){var X=`
`+C[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=f);break}}}finally{Xl=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ii(o):""}function $l(n,s){switch(n.tag){case 26:case 27:case 5:return Ii(n.type);case 16:return Ii("Lazy");case 13:return n.child!==s&&s!==null?Ii("Suspense Fallback"):Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return $s(n.type,!1);case 11:return $s(n.type.render,!1);case 1:return $s(n.type,!0);case 31:return Ii("Activity");default:return""}}function Jl(n){try{var s="",o=null;do s+=$l(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var xt=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,kr=r.unstable_cancelCallback,sm=r.unstable_shouldYield,ah=r.unstable_requestPaint,mn=r.unstable_now,Js=r.unstable_getCurrentPriorityLevel,Wl=r.unstable_ImmediatePriority,Zl=r.unstable_UserBlockingPriority,Lr=r.unstable_NormalPriority,am=r.unstable_LowPriority,oh=r.unstable_IdlePriority,lh=r.log,uh=r.unstable_setDisableYieldValue,ai=null,tn=null;function Kn(n){if(typeof lh=="function"&&uh(n),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(ai,n)}catch{}}var wt=Math.clz32?Math.clz32:hh,ch=Math.log,uo=Math.LN2;function hh(n){return n>>>=0,n===0?32:31-(ch(n)/uo|0)|0}var bi=256,Ws=262144,Ot=4194304;function wi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ri(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,y=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~m,u!==0?f=wi(u):(y&=A,y!==0?f=wi(y):o||(o=A&~n,o!==0&&(f=wi(o))))):(A=u&~m,A!==0?f=wi(A):y!==0?f=wi(y):o||(o=u&~n,o!==0&&(f=wi(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function oi(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function om(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fh(){var n=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),n}function Ci(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Zs(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function lm(n,s,o,u,f,m){var y=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,C=n.expirationTimes,B=n.hiddenUpdates;for(o=y&~o;0<o;){var X=31-wt(o),Z=1<<X;A[X]=0,C[X]=-1;var F=B[X];if(F!==null)for(B[X]=null,X=0;X<F.length;X++){var H=F[X];H!==null&&(H.lane&=-536870913)}o&=~Z}u!==0&&ea(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(y&~s))}function ea(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-wt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function eu(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-wt(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function tu(n,s){var o=s&-s;return o=(o&42)!==0?1:ta(o),(o&(n.suspendedLanes|s))!==0?0:o}function ta(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function tr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function dh(){var n=G.p;return n!==0?n:(n=window.event,n===void 0?32:QE(n.type))}function li(n,s){var o=G.p;try{return G.p=n,s()}finally{G.p=o}}var ui=Math.random().toString(36).slice(2),Pt="__reactFiber$"+ui,Yt="__reactProps$"+ui,Di="__reactContainer$"+ui,co="__reactEvents$"+ui,um="__reactListeners$"+ui,mh="__reactHandles$"+ui,ph="__reactResources$"+ui,Vi="__reactMarker$"+ui;function ho(n){delete n[Pt],delete n[Yt],delete n[co],delete n[um],delete n[mh]}function Ni(n){var s=n[Pt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Di]||o[Pt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=NE(n);n!==null;){if(o=n[Pt])return o;n=NE(n)}return s}n=o,o=n.parentNode}return null}function Qn(n){if(n=n[Pt]||n[Di]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Nn(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function xi(n){var s=n[ph];return s||(s=n[ph]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(n){n[Vi]=!0}var nu=new Set,iu={};function Oi(n,s){Pi(n,s),Pi(n+"Capture",s)}function Pi(n,s){for(iu[n]=s,n=0;n<s.length;n++)nu.add(s[n])}var ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),su={},au={};function gh(n){return xt.call(au,n)?!0:xt.call(su,n)?!1:ru.test(n)?au[n]=!0:(su[n]=!0,!1)}function fo(n,s,o){if(gh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function xn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function kt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Xt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ur(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ou(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(y){o=""+y,m.call(this,y)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function $e(n){if(!n._valueTracker){var s=Ur(n)?"checked":"value";n._valueTracker=ou(n,s,""+n[s])}}function na(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Ur(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Mi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ia=/[\n"\\]/g;function yn(n){return n.replace(ia,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function mo(n,s,o,u,f,m,y,A){n.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?n.type=y:n.removeAttribute("type"),s!=null?y==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Xt(s)):n.value!==""+Xt(s)&&(n.value=""+Xt(s)):y!=="submit"&&y!=="reset"||n.removeAttribute("value"),s!=null?lu(n,y,Xt(s)):o!=null?lu(n,y,Xt(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Xt(A):n.removeAttribute("name")}function _h(n,s,o,u,f,m,y,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){$e(n);return}o=o!=null?""+Xt(o):"",s=s!=null?""+Xt(s):o,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.name=y),$e(n)}function lu(n,s,o){s==="number"&&Mi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function zr(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Xt(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function yh(n,s,o){if(s!=null&&(s=""+Xt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Xt(o):""}function Br(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(It(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Xt(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),$e(n)}function vn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var vh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uu(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||vh.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function cu(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&uu(n,f,u)}else for(var m in s)s.hasOwnProperty(m)&&uu(n,m,s[m])}function po(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Th=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function go(n){return qr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ci(){}var hu=null;function Yn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Fr=null,ki=null;function ra(n){var s=Qn(n);if(s&&(n=s.stateNode)){var o=n[Yt]||null;e:switch(n=s.stateNode,s.type){case"input":if(mo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+yn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Yt]||null;if(!f)throw Error(i(90));mo(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&na(u)}break e;case"textarea":yh(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&zr(n,!!o.multiple,s,!1)}}}var _o=!1;function jr(n,s,o){if(_o)return n(s,o);_o=!0;try{var u=n(s);return u}finally{if(_o=!1,(Fr!==null||ki!==null)&&(mf(),Fr&&(s=Fr,n=ki,ki=Fr=null,ra(s),n)))for(s=0;s<n.length;s++)ra(n[s])}}function hi(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Yt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sa=!1;if(Xn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){sa=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{sa=!1}var Li=null,fu=null,aa=null;function du(){if(aa)return aa;var n,s=fu,o=s.length,u,f="value"in Li?Li.value:Li.textContent,m=f.length;for(n=0;n<o&&s[n]===f[n];n++);var y=o-n;for(u=1;u<=y&&s[o-u]===f[m-u];u++);return aa=f.slice(n,1<u?1-u:void 0)}function oa(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function nr(){return!0}function fi(){return!1}function nn(n){function s(o,u,f,m,y){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?nr:fi,this.isPropagationStopped=fi,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),s}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=nn(ir),Hr=E({},ir,{view:0,detail:0}),mu=nn(Hr),Gr,yo,zi,vo=E({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zi&&(zi&&n.type==="mousemove"?(Gr=n.screenX-zi.screenX,yo=n.screenY-zi.screenY):yo=Gr=0,zi=n),Gr)},movementY:function(n){return"movementY"in n?n.movementY:yo}}),pu=nn(vo),la=E({},vo,{dataTransfer:0}),Eh=nn(la),Ah=E({},Hr,{relatedTarget:0}),ua=nn(Ah),gu=E({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Sh=nn(gu),To=E({},ir,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ih=nn(To),bh=E({},ir,{data:0}),Bi=nn(bh),wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ch[n])?!!s[n]:!1}function Kr(){return Dh}var pn=E({},Hr,{key:function(n){if(n.key){var s=wh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=oa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Rh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(n){return n.type==="keypress"?oa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?oa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Vh=nn(pn),Nh=E({},vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rr=nn(Nh),h=E({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),_=nn(h),T=E({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=nn(T),U=E({},vo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),j=nn(U),ie=E({},ir,{newState:0,oldState:0}),De=nn(ie),Rt=[9,13,27,32],Qe=Xn&&"CompositionEvent"in window,gt=null;Xn&&"documentMode"in document&&(gt=document.documentMode);var $n=Xn&&"TextEvent"in window&&!gt,qi=Xn&&(!Qe||gt&&8<gt&&11>=gt),di=" ",mi=!1;function ca(n,s){switch(n){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ao=!1;function mR(n,s){switch(n){case"compositionend":return Eo(s);case"keypress":return s.which!==32?null:(mi=!0,di);case"textInput":return n=s.data,n===di&&mi?null:n;default:return null}}function pR(n,s){if(Ao)return n==="compositionend"||!Qe&&ca(n,s)?(n=du(),aa=fu=Li=null,Ao=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qi&&s.locale!=="ko"?null:s.data;default:return null}}var gR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!gR[n.type]:s==="textarea"}function My(n,s,o,u){Fr?ki?ki.push(u):ki=[u]:Fr=u,s=Ef(s,"onChange"),0<s.length&&(o=new Ui("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var _u=null,yu=null;function _R(n){_E(n,0)}function xh(n){var s=Nn(n);if(na(s))return n}function ky(n,s){if(n==="change")return s}var Ly=!1;if(Xn){var cm;if(Xn){var hm="oninput"in document;if(!hm){var Uy=document.createElement("div");Uy.setAttribute("oninput","return;"),hm=typeof Uy.oninput=="function"}cm=hm}else cm=!1;Ly=cm&&(!document.documentMode||9<document.documentMode)}function zy(){_u&&(_u.detachEvent("onpropertychange",By),yu=_u=null)}function By(n){if(n.propertyName==="value"&&xh(yu)){var s=[];My(s,yu,n,Yn(n)),jr(_R,s)}}function yR(n,s,o){n==="focusin"?(zy(),_u=s,yu=o,_u.attachEvent("onpropertychange",By)):n==="focusout"&&zy()}function vR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xh(yu)}function TR(n,s){if(n==="click")return xh(s)}function ER(n,s){if(n==="input"||n==="change")return xh(s)}function AR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var On=typeof Object.is=="function"?Object.is:AR;function vu(n,s){if(On(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!xt.call(s,f)||!On(n[f],s[f]))return!1}return!0}function qy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Fy(n,s){var o=qy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qy(o)}}function jy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?jy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Hy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Mi(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Mi(n.document)}return s}function fm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var SR=Xn&&"documentMode"in document&&11>=document.documentMode,So=null,dm=null,Tu=null,mm=!1;function Gy(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;mm||So==null||So!==Mi(u)||(u=So,"selectionStart"in u&&fm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Tu&&vu(Tu,u)||(Tu=u,u=Ef(dm,"onSelect"),0<u.length&&(s=new Ui("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=So)))}function ha(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Io={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},pm={},Ky={};Xn&&(Ky=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function fa(n){if(pm[n])return pm[n];if(!Io[n])return n;var s=Io[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Ky)return pm[n]=s[o];return n}var Qy=fa("animationend"),Yy=fa("animationiteration"),Xy=fa("animationstart"),IR=fa("transitionrun"),bR=fa("transitionstart"),wR=fa("transitioncancel"),$y=fa("transitionend"),Jy=new Map,gm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gm.push("scrollEnd");function pi(n,s){Jy.set(n,s),Oi(s,[n])}var Oh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Jn=[],bo=0,_m=0;function Ph(){for(var n=bo,s=_m=bo=0;s<n;){var o=Jn[s];Jn[s++]=null;var u=Jn[s];Jn[s++]=null;var f=Jn[s];Jn[s++]=null;var m=Jn[s];if(Jn[s++]=null,u!==null&&f!==null){var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}m!==0&&Wy(o,f,m)}}function Mh(n,s,o,u){Jn[bo++]=n,Jn[bo++]=s,Jn[bo++]=o,Jn[bo++]=u,_m|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function ym(n,s,o,u){return Mh(n,s,o,u),kh(n)}function da(n,s){return Mh(n,null,null,s),kh(n)}function Wy(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-wt(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function kh(n){if(50<Fu)throw Fu=0,Rp=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var wo={};function RR(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(n,s,o,u){return new RR(n,s,o,u)}function vm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function sr(n,s){var o=n.alternate;return o===null?(o=Pn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Zy(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Lh(n,s,o,u,f,m){var y=0;if(u=n,typeof n=="function")vm(n)&&(y=1);else if(typeof n=="string")y=x1(n,o,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case D:return n=Pn(31,o,s,f),n.elementType=D,n.lanes=m,n;case Y:return ma(o.children,f,m,s);case ee:y=8,f|=24;break;case se:return n=Pn(12,o,s,f|2),n.elementType=se,n.lanes=m,n;case Re:return n=Pn(13,o,s,f),n.elementType=Re,n.lanes=m,n;case _e:return n=Pn(19,o,s,f),n.elementType=_e,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ue:y=10;break e;case le:y=9;break e;case Se:y=11;break e;case w:y=14;break e;case b:y=16,u=null;break e}y=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Pn(y,o,s,f),s.elementType=n,s.type=u,s.lanes=m,s}function ma(n,s,o,u){return n=Pn(7,n,u,s),n.lanes=o,n}function Tm(n,s,o){return n=Pn(6,n,null,s),n.lanes=o,n}function ev(n){var s=Pn(18,null,null,0);return s.stateNode=n,s}function Em(n,s,o){return s=Pn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var tv=new WeakMap;function Wn(n,s){if(typeof n=="object"&&n!==null){var o=tv.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Jl(s)},tv.set(n,s),s)}return{value:n,source:s,stack:Jl(s)}}var Ro=[],Co=0,Uh=null,Eu=0,Zn=[],ei=0,Qr=null,Fi=1,ji="";function ar(n,s){Ro[Co++]=Eu,Ro[Co++]=Uh,Uh=n,Eu=s}function nv(n,s,o){Zn[ei++]=Fi,Zn[ei++]=ji,Zn[ei++]=Qr,Qr=n;var u=Fi;n=ji;var f=32-wt(u)-1;u&=~(1<<f),o+=1;var m=32-wt(s)+f;if(30<m){var y=f-f%5;m=(u&(1<<y)-1).toString(32),u>>=y,f-=y,Fi=1<<32-wt(s)+f|o<<f|u,ji=m+n}else Fi=1<<m|o<<f|u,ji=n}function Am(n){n.return!==null&&(ar(n,1),nv(n,1,0))}function Sm(n){for(;n===Uh;)Uh=Ro[--Co],Ro[Co]=null,Eu=Ro[--Co],Ro[Co]=null;for(;n===Qr;)Qr=Zn[--ei],Zn[ei]=null,ji=Zn[--ei],Zn[ei]=null,Fi=Zn[--ei],Zn[ei]=null}function iv(n,s){Zn[ei++]=Fi,Zn[ei++]=ji,Zn[ei++]=Qr,Fi=s.id,ji=s.overflow,Qr=n}var rn=null,ft=null,je=!1,Yr=null,ti=!1,Im=Error(i(519));function Xr(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Au(Wn(s,n)),Im}function rv(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Pt]=n,s[Yt]=u,o){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(o=0;o<Hu.length;o++)Le(Hu[o],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),_h(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Br(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||EE(s.textContent,o)?(u.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),u.onScroll!=null&&Le("scroll",s),u.onScrollEnd!=null&&Le("scrollend",s),u.onClick!=null&&(s.onclick=ci),s=!0):s=!1,s||Xr(n,!0)}function sv(n){for(rn=n.return;rn;)switch(rn.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:rn=rn.return}}function Do(n){if(n!==rn)return!1;if(!je)return sv(n),je=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Fp(n.type,n.memoizedProps)),o=!o),o&&ft&&Xr(n),sv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ft=VE(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ft=VE(n)}else s===27?(s=ft,us(n.type)?(n=Qp,Qp=null,ft=n):ft=s):ft=rn?ii(n.stateNode.nextSibling):null;return!0}function pa(){ft=rn=null,je=!1}function bm(){var n=Yr;return n!==null&&(Sn===null?Sn=n:Sn.push.apply(Sn,n),Yr=null),n}function Au(n){Yr===null?Yr=[n]:Yr.push(n)}var wm=V(null),ga=null,or=null;function $r(n,s,o){oe(wm,s._currentValue),s._currentValue=o}function lr(n){n._currentValue=wm.current,$(wm)}function Rm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Cm(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var y=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var C=0;C<s.length;C++)if(A.context===s[C]){m.lanes|=o,A=m.alternate,A!==null&&(A.lanes|=o),Rm(m.return,o,n),u||(y=null);break e}m=A.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(i(341));y.lanes|=o,m=y.alternate,m!==null&&(m.lanes|=o),Rm(y,o,n),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===n){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function Vo(n,s,o,u){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(i(387));if(y=y.memoizedProps,y!==null){var A=f.type;On(f.pendingProps.value,y.value)||(n!==null?n.push(A):n=[A])}}else if(f===Ue.current){if(y=f.alternate,y===null)throw Error(i(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Xu):n=[Xu])}f=f.return}n!==null&&Cm(s,n,o,u),s.flags|=262144}function zh(n){for(n=n.firstContext;n!==null;){if(!On(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function _a(n){ga=n,or=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function sn(n){return av(ga,n)}function Bh(n,s){return ga===null&&_a(n),av(n,s)}function av(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},or===null){if(n===null)throw Error(i(308));or=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else or=or.next=s;return o}var CR=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},DR=r.unstable_scheduleCallback,VR=r.unstable_NormalPriority,Lt={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dm(){return{controller:new CR,data:new Map,refCount:0}}function Su(n){n.refCount--,n.refCount===0&&DR(VR,function(){n.controller.abort()})}var Iu=null,Vm=0,No=0,xo=null;function NR(n,s){if(Iu===null){var o=Iu=[];Vm=0,No=Op(),xo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Vm++,s.then(ov,ov),s}function ov(){if(--Vm===0&&Iu!==null){xo!==null&&(xo.status="fulfilled");var n=Iu;Iu=null,No=0,xo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function xR(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var lv=Q.S;Q.S=function(n,s){GT=mn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&NR(n,s),lv!==null&&lv(n,s)};var ya=V(null);function Nm(){var n=ya.current;return n!==null?n:lt.pooledCache}function qh(n,s){s===null?oe(ya,ya.current):oe(ya,s.pool)}function uv(){var n=Nm();return n===null?null:{parent:Lt._currentValue,pool:n}}var Oo=Error(i(460)),xm=Error(i(474)),Fh=Error(i(542)),jh={then:function(){}};function cv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function hv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ci,ci),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,dv(n),n;default:if(typeof s.status=="string")s.then(ci,ci);else{if(n=lt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,dv(n),n}throw Ta=s,Oo}}function va(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ta=o,Oo):o}}var Ta=null;function fv(){if(Ta===null)throw Error(i(459));var n=Ta;return Ta=null,n}function dv(n){if(n===Oo||n===Fh)throw Error(i(483))}var Po=null,bu=0;function Hh(n){var s=bu;return bu+=1,Po===null&&(Po=[]),hv(Po,n,s)}function wu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Gh(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function mv(n){function s(M,x){if(n){var z=M.deletions;z===null?(M.deletions=[x],M.flags|=16):z.push(x)}}function o(M,x){if(!n)return null;for(;x!==null;)s(M,x),x=x.sibling;return null}function u(M){for(var x=new Map;M!==null;)M.key!==null?x.set(M.key,M):x.set(M.index,M),M=M.sibling;return x}function f(M,x){return M=sr(M,x),M.index=0,M.sibling=null,M}function m(M,x,z){return M.index=z,n?(z=M.alternate,z!==null?(z=z.index,z<x?(M.flags|=67108866,x):z):(M.flags|=67108866,x)):(M.flags|=1048576,x)}function y(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function A(M,x,z,J){return x===null||x.tag!==6?(x=Tm(z,M.mode,J),x.return=M,x):(x=f(x,z),x.return=M,x)}function C(M,x,z,J){var ye=z.type;return ye===Y?X(M,x,z.props.children,J,z.key):x!==null&&(x.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===b&&va(ye)===x.type)?(x=f(x,z.props),wu(x,z),x.return=M,x):(x=Lh(z.type,z.key,z.props,null,M.mode,J),wu(x,z),x.return=M,x)}function B(M,x,z,J){return x===null||x.tag!==4||x.stateNode.containerInfo!==z.containerInfo||x.stateNode.implementation!==z.implementation?(x=Em(z,M.mode,J),x.return=M,x):(x=f(x,z.children||[]),x.return=M,x)}function X(M,x,z,J,ye){return x===null||x.tag!==7?(x=ma(z,M.mode,J,ye),x.return=M,x):(x=f(x,z),x.return=M,x)}function Z(M,x,z){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Tm(""+x,M.mode,z),x.return=M,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case O:return z=Lh(x.type,x.key,x.props,null,M.mode,z),wu(z,x),z.return=M,z;case K:return x=Em(x,M.mode,z),x.return=M,x;case b:return x=va(x),Z(M,x,z)}if(It(x)||k(x))return x=ma(x,M.mode,z,null),x.return=M,x;if(typeof x.then=="function")return Z(M,Hh(x),z);if(x.$$typeof===ue)return Z(M,Bh(M,x),z);Gh(M,x)}return null}function F(M,x,z,J){var ye=x!==null?x.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ye!==null?null:A(M,x,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case O:return z.key===ye?C(M,x,z,J):null;case K:return z.key===ye?B(M,x,z,J):null;case b:return z=va(z),F(M,x,z,J)}if(It(z)||k(z))return ye!==null?null:X(M,x,z,J,null);if(typeof z.then=="function")return F(M,x,Hh(z),J);if(z.$$typeof===ue)return F(M,x,Bh(M,z),J);Gh(M,z)}return null}function H(M,x,z,J,ye){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return M=M.get(z)||null,A(x,M,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case O:return M=M.get(J.key===null?z:J.key)||null,C(x,M,J,ye);case K:return M=M.get(J.key===null?z:J.key)||null,B(x,M,J,ye);case b:return J=va(J),H(M,x,z,J,ye)}if(It(J)||k(J))return M=M.get(z)||null,X(x,M,J,ye,null);if(typeof J.then=="function")return H(M,x,z,Hh(J),ye);if(J.$$typeof===ue)return H(M,x,z,Bh(x,J),ye);Gh(x,J)}return null}function fe(M,x,z,J){for(var ye=null,Ge=null,pe=x,Ne=x=0,Be=null;pe!==null&&Ne<z.length;Ne++){pe.index>Ne?(Be=pe,pe=null):Be=pe.sibling;var Ke=F(M,pe,z[Ne],J);if(Ke===null){pe===null&&(pe=Be);break}n&&pe&&Ke.alternate===null&&s(M,pe),x=m(Ke,x,Ne),Ge===null?ye=Ke:Ge.sibling=Ke,Ge=Ke,pe=Be}if(Ne===z.length)return o(M,pe),je&&ar(M,Ne),ye;if(pe===null){for(;Ne<z.length;Ne++)pe=Z(M,z[Ne],J),pe!==null&&(x=m(pe,x,Ne),Ge===null?ye=pe:Ge.sibling=pe,Ge=pe);return je&&ar(M,Ne),ye}for(pe=u(pe);Ne<z.length;Ne++)Be=H(pe,M,Ne,z[Ne],J),Be!==null&&(n&&Be.alternate!==null&&pe.delete(Be.key===null?Ne:Be.key),x=m(Be,x,Ne),Ge===null?ye=Be:Ge.sibling=Be,Ge=Be);return n&&pe.forEach(function(ms){return s(M,ms)}),je&&ar(M,Ne),ye}function Ee(M,x,z,J){if(z==null)throw Error(i(151));for(var ye=null,Ge=null,pe=x,Ne=x=0,Be=null,Ke=z.next();pe!==null&&!Ke.done;Ne++,Ke=z.next()){pe.index>Ne?(Be=pe,pe=null):Be=pe.sibling;var ms=F(M,pe,Ke.value,J);if(ms===null){pe===null&&(pe=Be);break}n&&pe&&ms.alternate===null&&s(M,pe),x=m(ms,x,Ne),Ge===null?ye=ms:Ge.sibling=ms,Ge=ms,pe=Be}if(Ke.done)return o(M,pe),je&&ar(M,Ne),ye;if(pe===null){for(;!Ke.done;Ne++,Ke=z.next())Ke=Z(M,Ke.value,J),Ke!==null&&(x=m(Ke,x,Ne),Ge===null?ye=Ke:Ge.sibling=Ke,Ge=Ke);return je&&ar(M,Ne),ye}for(pe=u(pe);!Ke.done;Ne++,Ke=z.next())Ke=H(pe,M,Ne,Ke.value,J),Ke!==null&&(n&&Ke.alternate!==null&&pe.delete(Ke.key===null?Ne:Ke.key),x=m(Ke,x,Ne),Ge===null?ye=Ke:Ge.sibling=Ke,Ge=Ke);return n&&pe.forEach(function(j1){return s(M,j1)}),je&&ar(M,Ne),ye}function st(M,x,z,J){if(typeof z=="object"&&z!==null&&z.type===Y&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case O:e:{for(var ye=z.key;x!==null;){if(x.key===ye){if(ye=z.type,ye===Y){if(x.tag===7){o(M,x.sibling),J=f(x,z.props.children),J.return=M,M=J;break e}}else if(x.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===b&&va(ye)===x.type){o(M,x.sibling),J=f(x,z.props),wu(J,z),J.return=M,M=J;break e}o(M,x);break}else s(M,x);x=x.sibling}z.type===Y?(J=ma(z.props.children,M.mode,J,z.key),J.return=M,M=J):(J=Lh(z.type,z.key,z.props,null,M.mode,J),wu(J,z),J.return=M,M=J)}return y(M);case K:e:{for(ye=z.key;x!==null;){if(x.key===ye)if(x.tag===4&&x.stateNode.containerInfo===z.containerInfo&&x.stateNode.implementation===z.implementation){o(M,x.sibling),J=f(x,z.children||[]),J.return=M,M=J;break e}else{o(M,x);break}else s(M,x);x=x.sibling}J=Em(z,M.mode,J),J.return=M,M=J}return y(M);case b:return z=va(z),st(M,x,z,J)}if(It(z))return fe(M,x,z,J);if(k(z)){if(ye=k(z),typeof ye!="function")throw Error(i(150));return z=ye.call(z),Ee(M,x,z,J)}if(typeof z.then=="function")return st(M,x,Hh(z),J);if(z.$$typeof===ue)return st(M,x,Bh(M,z),J);Gh(M,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,x!==null&&x.tag===6?(o(M,x.sibling),J=f(x,z),J.return=M,M=J):(o(M,x),J=Tm(z,M.mode,J),J.return=M,M=J),y(M)):o(M,x)}return function(M,x,z,J){try{bu=0;var ye=st(M,x,z,J);return Po=null,ye}catch(pe){if(pe===Oo||pe===Fh)throw pe;var Ge=Pn(29,pe,null,M.mode);return Ge.lanes=J,Ge.return=M,Ge}}}var Ea=mv(!0),pv=mv(!1),Jr=!1;function Om(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Wr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Zr(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=kh(n),Wy(n,null,o),s}return Mh(n,u,s,o),kh(n)}function Ru(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,eu(n,o)}}function Mm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var y={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=y:m=m.next=y,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var km=!1;function Cu(){if(km){var n=xo;if(n!==null)throw n}}function Du(n,s,o,u){km=!1;var f=n.updateQueue;Jr=!1;var m=f.firstBaseUpdate,y=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var C=A,B=C.next;C.next=null,y===null?m=B:y.next=B,y=C;var X=n.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==y&&(A===null?X.firstBaseUpdate=B:A.next=B,X.lastBaseUpdate=C))}if(m!==null){var Z=f.baseState;y=0,X=B=C=null,A=m;do{var F=A.lane&-536870913,H=F!==A.lane;if(H?(ze&F)===F:(u&F)===F){F!==0&&F===No&&(km=!0),X!==null&&(X=X.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var fe=n,Ee=A;F=s;var st=o;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){Z=fe.call(st,Z,F);break e}Z=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,F=typeof fe=="function"?fe.call(st,Z,F):fe,F==null)break e;Z=E({},Z,F);break e;case 2:Jr=!0}}F=A.callback,F!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[F]:H.push(F))}else H={lane:F,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(B=X=H,C=Z):X=X.next=H,y|=F;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;H=A,A=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);X===null&&(C=Z),f.baseState=C,f.firstBaseUpdate=B,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),rs|=y,n.lanes=y,n.memoizedState=Z}}function gv(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function _v(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)gv(o[n],s)}var Mo=V(null),Kh=V(0);function yv(n,s){n=_r,oe(Kh,n),oe(Mo,s),_r=n|s.baseLanes}function Lm(){oe(Kh,_r),oe(Mo,Mo.current)}function Um(){_r=Kh.current,$(Mo),$(Kh)}var Mn=V(null),ni=null;function es(n){var s=n.alternate;oe(Ct,Ct.current&1),oe(Mn,n),ni===null&&(s===null||Mo.current!==null||s.memoizedState!==null)&&(ni=n)}function zm(n){oe(Ct,Ct.current),oe(Mn,n),ni===null&&(ni=n)}function vv(n){n.tag===22?(oe(Ct,Ct.current),oe(Mn,n),ni===null&&(ni=n)):ts()}function ts(){oe(Ct,Ct.current),oe(Mn,Mn.current)}function kn(n){$(Mn),ni===n&&(ni=null),$(Ct)}var Ct=V(0);function Qh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Gp(o)||Kp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ur=0,Ve=null,it=null,Ut=null,Yh=!1,ko=!1,Aa=!1,Xh=0,Vu=0,Lo=null,OR=0;function At(){throw Error(i(321))}function Bm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!On(n[o],s[o]))return!1;return!0}function qm(n,s,o,u,f,m){return ur=m,Ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?nT:np,Aa=!1,m=o(u,f),Aa=!1,ko&&(m=Ev(s,o,u,f)),Tv(n),m}function Tv(n){Q.H=Ou;var s=it!==null&&it.next!==null;if(ur=0,Ut=it=Ve=null,Yh=!1,Vu=0,Lo=null,s)throw Error(i(300));n===null||zt||(n=n.dependencies,n!==null&&zh(n)&&(zt=!0))}function Ev(n,s,o,u){Ve=n;var f=0;do{if(ko&&(Lo=null),Vu=0,ko=!1,25<=f)throw Error(i(301));if(f+=1,Ut=it=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=iT,m=s(o,u)}while(ko);return m}function PR(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?Nu(s):s,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&(Ve.flags|=1024),s}function Fm(){var n=Xh!==0;return Xh=0,n}function jm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Hm(n){if(Yh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Yh=!1}ur=0,Ut=it=Ve=null,ko=!1,Vu=Xh=0,Lo=null}function gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ve.memoizedState=Ut=n:Ut=Ut.next=n,Ut}function Dt(){if(it===null){var n=Ve.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var s=Ut===null?Ve.memoizedState:Ut.next;if(s!==null)Ut=s,it=n;else{if(n===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Ut===null?Ve.memoizedState=Ut=n:Ut=Ut.next=n}return Ut}function $h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nu(n){var s=Vu;return Vu+=1,Lo===null&&(Lo=[]),n=hv(Lo,n,s),s=Ve,(Ut===null?s.memoizedState:Ut.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?nT:np),n}function Jh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Nu(n);if(n.$$typeof===ue)return sn(n)}throw Error(i(438,String(n)))}function Gm(n){var s=null,o=Ve.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ve.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=$h(),Ve.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=P;return s.index++,o}function cr(n,s){return typeof s=="function"?s(n):s}function Wh(n){var s=Dt();return Km(s,it,n)}function Km(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var y=f.next;f.next=m.next,m.next=y}s.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var A=y=null,C=null,B=s,X=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(ze&Z)===Z:(ur&Z)===Z){var F=B.revertLane;if(F===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===No&&(X=!0);else if((ur&F)===F){B=B.next,F===No&&(X=!0);continue}else Z={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(A=C=Z,y=m):C=C.next=Z,Ve.lanes|=F,rs|=F;Z=B.action,Aa&&o(m,Z),m=B.hasEagerState?B.eagerState:o(m,Z)}else F={lane:Z,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(A=C=F,y=m):C=C.next=F,Ve.lanes|=Z,rs|=Z;B=B.next}while(B!==null&&B!==s);if(C===null?y=m:C.next=A,!On(m,n.memoizedState)&&(zt=!0,X&&(o=xo,o!==null)))throw o;n.memoizedState=m,n.baseState=y,n.baseQueue=C,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Qm(n){var s=Dt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var y=f=f.next;do m=n(m,y.action),y=y.next;while(y!==f);On(m,s.memoizedState)||(zt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Av(n,s,o){var u=Ve,f=Dt(),m=je;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var y=!On((it||f).memoizedState,o);if(y&&(f.memoizedState=o,zt=!0),f=f.queue,$m(bv.bind(null,u,f,n),[n]),f.getSnapshot!==s||y||Ut!==null&&Ut.memoizedState.tag&1){if(u.flags|=2048,Uo(9,{destroy:void 0},Iv.bind(null,u,f,o,s),null),lt===null)throw Error(i(349));m||(ur&127)!==0||Sv(u,s,o)}return o}function Sv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Ve.updateQueue,s===null?(s=$h(),Ve.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Iv(n,s,o,u){s.value=o,s.getSnapshot=u,wv(s)&&Rv(n)}function bv(n,s,o){return o(function(){wv(s)&&Rv(n)})}function wv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!On(n,o)}catch{return!0}}function Rv(n){var s=da(n,2);s!==null&&In(s,n,2)}function Ym(n){var s=gn();if(typeof n=="function"){var o=n;if(n=o(),Aa){Kn(!0);try{o()}finally{Kn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:n},s}function Cv(n,s,o,u){return n.baseState=o,Km(n,it,typeof u=="function"?u:cr)}function MR(n,s,o,u,f){if(tf(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){m.listeners.push(y)}};Q.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Dv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Dv(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var m=Q.T,y={};Q.T=y;try{var A=o(f,u),C=Q.S;C!==null&&C(y,A),Vv(n,s,A)}catch(B){Xm(n,s,B)}finally{m!==null&&y.types!==null&&(m.types=y.types),Q.T=m}}else try{m=o(f,u),Vv(n,s,m)}catch(B){Xm(n,s,B)}}function Vv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Nv(n,s,u)},function(u){return Xm(n,s,u)}):Nv(n,s,o)}function Nv(n,s,o){s.status="fulfilled",s.value=o,xv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Dv(n,o)))}function Xm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,xv(s),s=s.next;while(s!==u)}n.action=null}function xv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Ov(n,s){return s}function Pv(n,s){if(je){var o=lt.formState;if(o!==null){e:{var u=Ve;if(je){if(ft){t:{for(var f=ft,m=ti;f.nodeType!==8;){if(!m){f=null;break t}if(f=ii(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ft=ii(f.nextSibling),u=f.data==="F!";break e}}Xr(u)}u=!1}u&&(s=o[0])}}return o=gn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ov,lastRenderedState:s},o.queue=u,o=Zv.bind(null,Ve,u),u.dispatch=o,u=Ym(!1),m=tp.bind(null,Ve,!1,u.queue),u=gn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=MR.bind(null,Ve,f,m,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function Mv(n){var s=Dt();return kv(s,it,n)}function kv(n,s,o){if(s=Km(n,s,Ov)[0],n=Wh(cr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Nu(s)}catch(y){throw y===Oo?Fh:y}else u=s;s=Dt();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Ve.flags|=2048,Uo(9,{destroy:void 0},kR.bind(null,f,o),null)),[u,m,n]}function kR(n,s){n.action=s}function Lv(n){var s=Dt(),o=it;if(o!==null)return kv(s,o,n);Dt(),s=s.memoizedState,o=Dt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Uo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Ve.updateQueue,s===null&&(s=$h(),Ve.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Uv(){return Dt().memoizedState}function Zh(n,s,o,u){var f=gn();Ve.flags|=n,f.memoizedState=Uo(1|s,{destroy:void 0},o,u===void 0?null:u)}function ef(n,s,o,u){var f=Dt();u=u===void 0?null:u;var m=f.memoizedState.inst;it!==null&&u!==null&&Bm(u,it.memoizedState.deps)?f.memoizedState=Uo(s,m,o,u):(Ve.flags|=n,f.memoizedState=Uo(1|s,m,o,u))}function zv(n,s){Zh(8390656,8,n,s)}function $m(n,s){ef(2048,8,n,s)}function LR(n){Ve.flags|=4;var s=Ve.updateQueue;if(s===null)s=$h(),Ve.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function Bv(n){var s=Dt().memoizedState;return LR({ref:s,nextImpl:n}),function(){if((Ye&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function qv(n,s){return ef(4,2,n,s)}function Fv(n,s){return ef(4,4,n,s)}function jv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Hv(n,s,o){o=o!=null?o.concat([n]):null,ef(4,4,jv.bind(null,s,n),o)}function Jm(){}function Gv(n,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Bm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function Kv(n,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Bm(s,u[1]))return u[0];if(u=n(),Aa){Kn(!0);try{n()}finally{Kn(!1)}}return o.memoizedState=[u,s],u}function Wm(n,s,o){return o===void 0||(ur&1073741824)!==0&&(ze&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=QT(),Ve.lanes|=n,rs|=n,o)}function Qv(n,s,o,u){return On(o,s)?o:Mo.current!==null?(n=Wm(n,o,u),On(n,s)||(zt=!0),n):(ur&42)===0||(ur&1073741824)!==0&&(ze&261930)===0?(zt=!0,n.memoizedState=o):(n=QT(),Ve.lanes|=n,rs|=n,s)}function Yv(n,s,o,u,f){var m=G.p;G.p=m!==0&&8>m?m:8;var y=Q.T,A={};Q.T=A,tp(n,!1,s,o);try{var C=f(),B=Q.S;if(B!==null&&B(A,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var X=xR(C,u);xu(n,s,X,zn(n))}else xu(n,s,u,zn(n))}catch(Z){xu(n,s,{then:function(){},status:"rejected",reason:Z},zn())}finally{G.p=m,y!==null&&A.types!==null&&(y.types=A.types),Q.T=y}}function UR(){}function Zm(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=Xv(n).queue;Yv(n,f,s,ae,o===null?UR:function(){return $v(n),o(u)})}function Xv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:ae},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function $v(n){var s=Xv(n);s.next===null&&(s=n.alternate.memoizedState),xu(n,s.next.queue,{},zn())}function ep(){return sn(Xu)}function Jv(){return Dt().memoizedState}function Wv(){return Dt().memoizedState}function zR(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=zn();n=Wr(o);var u=Zr(s,n,o);u!==null&&(In(u,s,o),Ru(u,s,o)),s={cache:Dm()},n.payload=s;return}s=s.return}}function BR(n,s,o){var u=zn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},tf(n)?eT(s,o):(o=ym(n,s,o,u),o!==null&&(In(o,n,u),tT(o,s,u)))}function Zv(n,s,o){var u=zn();xu(n,s,o,u)}function xu(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(tf(n))eT(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var y=s.lastRenderedState,A=m(y,o);if(f.hasEagerState=!0,f.eagerState=A,On(A,y))return Mh(n,s,f,0),lt===null&&Ph(),!1}catch{}if(o=ym(n,s,f,u),o!==null)return In(o,n,u),tT(o,s,u),!0}return!1}function tp(n,s,o,u){if(u={lane:2,revertLane:Op(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},tf(n)){if(s)throw Error(i(479))}else s=ym(n,o,u,2),s!==null&&In(s,n,2)}function tf(n){var s=n.alternate;return n===Ve||s!==null&&s===Ve}function eT(n,s){ko=Yh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function tT(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,eu(n,o)}}var Ou={readContext:sn,use:Jh,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};Ou.useEffectEvent=At;var nT={readContext:sn,use:Jh,useCallback:function(n,s){return gn().memoizedState=[n,s===void 0?null:s],n},useContext:sn,useEffect:zv,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Zh(4194308,4,jv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Zh(4194308,4,n,s)},useInsertionEffect:function(n,s){Zh(4,2,n,s)},useMemo:function(n,s){var o=gn();s=s===void 0?null:s;var u=n();if(Aa){Kn(!0);try{n()}finally{Kn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=gn();if(o!==void 0){var f=o(s);if(Aa){Kn(!0);try{o(s)}finally{Kn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=BR.bind(null,Ve,n),[u.memoizedState,n]},useRef:function(n){var s=gn();return n={current:n},s.memoizedState=n},useState:function(n){n=Ym(n);var s=n.queue,o=Zv.bind(null,Ve,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Jm,useDeferredValue:function(n,s){var o=gn();return Wm(o,n,s)},useTransition:function(){var n=Ym(!1);return n=Yv.bind(null,Ve,n.queue,!0,!1),gn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Ve,f=gn();if(je){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),lt===null)throw Error(i(349));(ze&127)!==0||Sv(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,zv(bv.bind(null,u,m,n),[n]),u.flags|=2048,Uo(9,{destroy:void 0},Iv.bind(null,u,m,o,s),null),o},useId:function(){var n=gn(),s=lt.identifierPrefix;if(je){var o=ji,u=Fi;o=(u&~(1<<32-wt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Xh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=OR++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:ep,useFormState:Pv,useActionState:Pv,useOptimistic:function(n){var s=gn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=tp.bind(null,Ve,!0,o),o.dispatch=s,[n,s]},useMemoCache:Gm,useCacheRefresh:function(){return gn().memoizedState=zR.bind(null,Ve)},useEffectEvent:function(n){var s=gn(),o={impl:n};return s.memoizedState=o,function(){if((Ye&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},np={readContext:sn,use:Jh,useCallback:Gv,useContext:sn,useEffect:$m,useImperativeHandle:Hv,useInsertionEffect:qv,useLayoutEffect:Fv,useMemo:Kv,useReducer:Wh,useRef:Uv,useState:function(){return Wh(cr)},useDebugValue:Jm,useDeferredValue:function(n,s){var o=Dt();return Qv(o,it.memoizedState,n,s)},useTransition:function(){var n=Wh(cr)[0],s=Dt().memoizedState;return[typeof n=="boolean"?n:Nu(n),s]},useSyncExternalStore:Av,useId:Jv,useHostTransitionStatus:ep,useFormState:Mv,useActionState:Mv,useOptimistic:function(n,s){var o=Dt();return Cv(o,it,n,s)},useMemoCache:Gm,useCacheRefresh:Wv};np.useEffectEvent=Bv;var iT={readContext:sn,use:Jh,useCallback:Gv,useContext:sn,useEffect:$m,useImperativeHandle:Hv,useInsertionEffect:qv,useLayoutEffect:Fv,useMemo:Kv,useReducer:Qm,useRef:Uv,useState:function(){return Qm(cr)},useDebugValue:Jm,useDeferredValue:function(n,s){var o=Dt();return it===null?Wm(o,n,s):Qv(o,it.memoizedState,n,s)},useTransition:function(){var n=Qm(cr)[0],s=Dt().memoizedState;return[typeof n=="boolean"?n:Nu(n),s]},useSyncExternalStore:Av,useId:Jv,useHostTransitionStatus:ep,useFormState:Lv,useActionState:Lv,useOptimistic:function(n,s){var o=Dt();return it!==null?Cv(o,it,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Gm,useCacheRefresh:Wv};iT.useEffectEvent=Bv;function ip(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var rp={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=zn(),f=Wr(u);f.payload=s,o!=null&&(f.callback=o),s=Zr(n,f,u),s!==null&&(In(s,n,u),Ru(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=zn(),f=Wr(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Zr(n,f,u),s!==null&&(In(s,n,u),Ru(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=zn(),u=Wr(o);u.tag=2,s!=null&&(u.callback=s),s=Zr(n,u,o),s!==null&&(In(s,n,o),Ru(s,n,o))}};function rT(n,s,o,u,f,m,y){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,y):s.prototype&&s.prototype.isPureReactComponent?!vu(o,u)||!vu(f,m):!0}function sT(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&rp.enqueueReplaceState(s,s.state,null)}function Sa(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function aT(n){Oh(n)}function oT(n){console.error(n)}function lT(n){Oh(n)}function nf(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function uT(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function sp(n,s,o){return o=Wr(o),o.tag=3,o.payload={element:null},o.callback=function(){nf(n,s)},o}function cT(n){return n=Wr(n),n.tag=3,n}function hT(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){uT(s,o,u)}}var y=o.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(n.callback=function(){uT(s,o,u),typeof f!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function qR(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Vo(s,o,f,!0),o=Mn.current,o!==null){switch(o.tag){case 31:case 13:return ni===null?pf():o.alternate===null&&St===0&&(St=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===jh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Vp(n,u,f)),!1;case 22:return o.flags|=65536,u===jh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Vp(n,u,f)),!1}throw Error(i(435,o.tag))}return Vp(n,u,f),pf(),!1}if(je)return s=Mn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Im&&(n=Error(i(422),{cause:u}),Au(Wn(n,o)))):(u!==Im&&(s=Error(i(423),{cause:u}),Au(Wn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Wn(u,o),f=sp(n.stateNode,u,f),Mm(n,f),St!==4&&(St=2)),!1;var m=Error(i(520),{cause:u});if(m=Wn(m,o),qu===null?qu=[m]:qu.push(m),St!==4&&(St=2),s===null)return!0;u=Wn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=sp(o.stateNode,u,n),Mm(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ss===null||!ss.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=cT(f),hT(f,n,o,u),Mm(o,f),!1}o=o.return}while(o!==null);return!1}var ap=Error(i(461)),zt=!1;function an(n,s,o,u){s.child=n===null?pv(s,null,o,u):Ea(s,n.child,o,u)}function fT(n,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var y={};for(var A in u)A!=="ref"&&(y[A]=u[A])}else y=u;return _a(s),u=qm(n,s,o,y,m,f),A=Fm(),n!==null&&!zt?(jm(n,s,f),hr(n,s,f)):(je&&A&&Am(s),s.flags|=1,an(n,s,u,f),s.child)}function dT(n,s,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!vm(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,mT(n,s,m,u,f)):(n=Lh(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!mp(n,f)){var y=m.memoizedProps;if(o=o.compare,o=o!==null?o:vu,o(y,u)&&n.ref===s.ref)return hr(n,s,f)}return s.flags|=1,n=sr(m,u),n.ref=s.ref,n.return=s,s.child=n}function mT(n,s,o,u,f){if(n!==null){var m=n.memoizedProps;if(vu(m,u)&&n.ref===s.ref)if(zt=!1,s.pendingProps=u=m,mp(n,f))(n.flags&131072)!==0&&(zt=!0);else return s.lanes=n.lanes,hr(n,s,f)}return op(n,s,o,u,f)}function pT(n,s,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return gT(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&qh(s,m!==null?m.cachePool:null),m!==null?yv(s,m):Lm(),vv(s);else return u=s.lanes=536870912,gT(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(qh(s,m.cachePool),yv(s,m),ts(),s.memoizedState=null):(n!==null&&qh(s,null),Lm(),ts());return an(n,s,f,o),s.child}function Pu(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function gT(n,s,o,u,f){var m=Nm();return m=m===null?null:{parent:Lt._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&qh(s,null),Lm(),vv(s),n!==null&&Vo(n,s,u,!0),s.childLanes=f,null}function rf(n,s){return s=af({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function _T(n,s,o){return Ea(s,n.child,null,o),n=rf(s,s.pendingProps),n.flags|=2,kn(s),s.memoizedState=null,n}function FR(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(je){if(u.mode==="hidden")return n=rf(s,u),s.lanes=536870912,Pu(null,n);if(zm(s),(n=ft)?(n=DE(n,ti),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Qr!==null?{id:Fi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},o=ev(n),o.return=s,s.child=o,rn=s,ft=null)):n=null,n===null)throw Xr(s);return s.lanes=536870912,null}return rf(s,u)}var m=n.memoizedState;if(m!==null){var y=m.dehydrated;if(zm(s),f)if(s.flags&256)s.flags&=-257,s=_T(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(zt||Vo(n,s,o,!1),f=(o&n.childLanes)!==0,zt||f){if(u=lt,u!==null&&(y=tu(u,o),y!==0&&y!==m.retryLane))throw m.retryLane=y,da(n,y),In(u,n,y),ap;pf(),s=_T(n,s,o)}else n=m.treeContext,ft=ii(y.nextSibling),rn=s,je=!0,Yr=null,ti=!1,n!==null&&iv(s,n),s=rf(s,u),s.flags|=4096;return s}return n=sr(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function sf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function op(n,s,o,u,f){return _a(s),o=qm(n,s,o,u,void 0,f),u=Fm(),n!==null&&!zt?(jm(n,s,f),hr(n,s,f)):(je&&u&&Am(s),s.flags|=1,an(n,s,o,f),s.child)}function yT(n,s,o,u,f,m){return _a(s),s.updateQueue=null,o=Ev(s,u,o,f),Tv(n),u=Fm(),n!==null&&!zt?(jm(n,s,m),hr(n,s,m)):(je&&u&&Am(s),s.flags|=1,an(n,s,o,m),s.child)}function vT(n,s,o,u,f){if(_a(s),s.stateNode===null){var m=wo,y=o.contextType;typeof y=="object"&&y!==null&&(m=sn(y)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=rp,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Om(s),y=o.contextType,m.context=typeof y=="object"&&y!==null?sn(y):wo,m.state=s.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(ip(s,o,y,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(y=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),y!==m.state&&rp.enqueueReplaceState(m,m.state,null),Du(s,u,m,f),Cu(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var A=s.memoizedProps,C=Sa(o,A);m.props=C;var B=m.context,X=o.contextType;y=wo,typeof X=="object"&&X!==null&&(y=sn(X));var Z=o.getDerivedStateFromProps;X=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||B!==y)&&sT(s,m,u,y),Jr=!1;var F=s.memoizedState;m.state=F,Du(s,u,m,f),Cu(),B=s.memoizedState,A||F!==B||Jr?(typeof Z=="function"&&(ip(s,o,Z,u),B=s.memoizedState),(C=Jr||rT(s,o,C,u,F,B,y))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=B),m.props=u,m.state=B,m.context=y,u=C):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Pm(n,s),y=s.memoizedProps,X=Sa(o,y),m.props=X,Z=s.pendingProps,F=m.context,B=o.contextType,C=wo,typeof B=="object"&&B!==null&&(C=sn(B)),A=o.getDerivedStateFromProps,(B=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(y!==Z||F!==C)&&sT(s,m,u,C),Jr=!1,F=s.memoizedState,m.state=F,Du(s,u,m,f),Cu();var H=s.memoizedState;y!==Z||F!==H||Jr||n!==null&&n.dependencies!==null&&zh(n.dependencies)?(typeof A=="function"&&(ip(s,o,A,u),H=s.memoizedState),(X=Jr||rT(s,o,X,u,F,H,C)||n!==null&&n.dependencies!==null&&zh(n.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,H,C),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,H,C)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||y===n.memoizedProps&&F===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===n.memoizedProps&&F===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=H),m.props=u,m.state=H,m.context=C,u=X):(typeof m.componentDidUpdate!="function"||y===n.memoizedProps&&F===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||y===n.memoizedProps&&F===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,sf(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=Ea(s,n.child,null,f),s.child=Ea(s,null,o,f)):an(n,s,o,f),s.memoizedState=m.state,n=s.child):n=hr(n,s,f),n}function TT(n,s,o,u){return pa(),s.flags|=256,an(n,s,o,u),s.child}var lp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function up(n){return{baseLanes:n,cachePool:uv()}}function cp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Un),n}function ET(n,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,y;if((y=m)||(y=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),y&&(f=!0,s.flags&=-129),y=(s.flags&32)!==0,s.flags&=-33,n===null){if(je){if(f?es(s):ts(),(n=ft)?(n=DE(n,ti),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Qr!==null?{id:Fi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},o=ev(n),o.return=s,s.child=o,rn=s,ft=null)):n=null,n===null)throw Xr(s);return Kp(n)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,f?(ts(),f=s.mode,A=af({mode:"hidden",children:A},f),u=ma(u,f,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=up(o),u.childLanes=cp(n,y,o),s.memoizedState=lp,Pu(null,u)):(es(s),hp(s,A))}var C=n.memoizedState;if(C!==null&&(A=C.dehydrated,A!==null)){if(m)s.flags&256?(es(s),s.flags&=-257,s=fp(n,s,o)):s.memoizedState!==null?(ts(),s.child=n.child,s.flags|=128,s=null):(ts(),A=u.fallback,f=s.mode,u=af({mode:"visible",children:u.children},f),A=ma(A,f,o,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,Ea(s,n.child,null,o),u=s.child,u.memoizedState=up(o),u.childLanes=cp(n,y,o),s.memoizedState=lp,s=Pu(null,u));else if(es(s),Kp(A)){if(y=A.nextSibling&&A.nextSibling.dataset,y)var B=y.dgst;y=B,u=Error(i(419)),u.stack="",u.digest=y,Au({value:u,source:null,stack:null}),s=fp(n,s,o)}else if(zt||Vo(n,s,o,!1),y=(o&n.childLanes)!==0,zt||y){if(y=lt,y!==null&&(u=tu(y,o),u!==0&&u!==C.retryLane))throw C.retryLane=u,da(n,u),In(y,n,u),ap;Gp(A)||pf(),s=fp(n,s,o)}else Gp(A)?(s.flags|=192,s.child=n.child,s=null):(n=C.treeContext,ft=ii(A.nextSibling),rn=s,je=!0,Yr=null,ti=!1,n!==null&&iv(s,n),s=hp(s,u.children),s.flags|=4096);return s}return f?(ts(),A=u.fallback,f=s.mode,C=n.child,B=C.sibling,u=sr(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,B!==null?A=sr(B,A):(A=ma(A,f,o,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,Pu(null,u),u=s.child,A=n.child.memoizedState,A===null?A=up(o):(f=A.cachePool,f!==null?(C=Lt._currentValue,f=f.parent!==C?{parent:C,pool:C}:f):f=uv(),A={baseLanes:A.baseLanes|o,cachePool:f}),u.memoizedState=A,u.childLanes=cp(n,y,o),s.memoizedState=lp,Pu(n.child,u)):(es(s),o=n.child,n=o.sibling,o=sr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(y=s.deletions,y===null?(s.deletions=[n],s.flags|=16):y.push(n)),s.child=o,s.memoizedState=null,o)}function hp(n,s){return s=af({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function af(n,s){return n=Pn(22,n,null,s),n.lanes=0,n}function fp(n,s,o){return Ea(s,n.child,null,o),n=hp(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function AT(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Rm(n.return,s,o)}function dp(n,s,o,u,f,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=o,y.tailMode=f,y.treeForkCount=m)}function ST(n,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var y=Ct.current,A=(y&2)!==0;if(A?(y=y&1|2,s.flags|=128):y&=1,oe(Ct,y),an(n,s,u,o),u=je?Eu:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&AT(n,o,s);else if(n.tag===19)AT(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Qh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),dp(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Qh(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}dp(s,!0,o,null,m,u);break;case"together":dp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function hr(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),rs|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Vo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=sr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=sr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function mp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&zh(n)))}function jR(n,s,o){switch(s.tag){case 3:bt(s,s.stateNode.containerInfo),$r(s,Lt,n.memoizedState.cache),pa();break;case 27:case 5:Xs(s);break;case 4:bt(s,s.stateNode.containerInfo);break;case 10:$r(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,zm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(es(s),s.flags|=128,null):(o&s.child.childLanes)!==0?ET(n,s,o):(es(s),n=hr(n,s,o),n!==null?n.sibling:null);es(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Vo(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return ST(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Ct,Ct.current),u)break;return null;case 22:return s.lanes=0,pT(n,s,o,s.pendingProps);case 24:$r(s,Lt,n.memoizedState.cache)}return hr(n,s,o)}function IT(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)zt=!0;else{if(!mp(n,o)&&(s.flags&128)===0)return zt=!1,jR(n,s,o);zt=(n.flags&131072)!==0}else zt=!1,je&&(s.flags&1048576)!==0&&nv(s,Eu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=va(s.elementType),s.type=n,typeof n=="function")vm(n)?(u=Sa(n,u),s.tag=1,s=vT(null,s,n,u,o)):(s.tag=0,s=op(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===Se){s.tag=11,s=fT(null,s,n,u,o);break e}else if(f===w){s.tag=14,s=dT(null,s,n,u,o);break e}}throw s=ut(n)||n,Error(i(306,s,""))}}return s;case 0:return op(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Sa(u,s.pendingProps),vT(n,s,u,f,o);case 3:e:{if(bt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Pm(n,s),Du(s,u,null,o);var y=s.memoizedState;if(u=y.cache,$r(s,Lt,u),u!==m.cache&&Cm(s,[Lt],o,!0),Cu(),u=y.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:y.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=TT(n,s,u,o);break e}else if(u!==f){f=Wn(Error(i(424)),s),Au(f),s=TT(n,s,u,o);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ft=ii(n.firstChild),rn=s,je=!0,Yr=null,ti=!0,o=pv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(pa(),u===f){s=hr(n,s,o);break e}an(n,s,u,o)}s=s.child}return s;case 26:return sf(n,s),n===null?(o=ME(s.type,null,s.pendingProps,null))?s.memoizedState=o:je||(o=s.type,n=s.pendingProps,u=Af(ve.current).createElement(o),u[Pt]=s,u[Yt]=n,on(u,o,n),Mt(u),s.stateNode=u):s.memoizedState=ME(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Xs(s),n===null&&je&&(u=s.stateNode=xE(s.type,s.pendingProps,ve.current),rn=s,ti=!0,f=ft,us(s.type)?(Qp=f,ft=ii(u.firstChild)):ft=f),an(n,s,s.pendingProps.children,o),sf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&je&&((f=u=ft)&&(u=v1(u,s.type,s.pendingProps,ti),u!==null?(s.stateNode=u,rn=s,ft=ii(u.firstChild),ti=!1,f=!0):f=!1),f||Xr(s)),Xs(s),f=s.type,m=s.pendingProps,y=n!==null?n.memoizedProps:null,u=m.children,Fp(f,m)?u=null:y!==null&&Fp(f,y)&&(s.flags|=32),s.memoizedState!==null&&(f=qm(n,s,PR,null,null,o),Xu._currentValue=f),sf(n,s),an(n,s,u,o),s.child;case 6:return n===null&&je&&((n=o=ft)&&(o=T1(o,s.pendingProps,ti),o!==null?(s.stateNode=o,rn=s,ft=null,n=!0):n=!1),n||Xr(s)),null;case 13:return ET(n,s,o);case 4:return bt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ea(s,null,u,o):an(n,s,u,o),s.child;case 11:return fT(n,s,s.type,s.pendingProps,o);case 7:return an(n,s,s.pendingProps,o),s.child;case 8:return an(n,s,s.pendingProps.children,o),s.child;case 12:return an(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,$r(s,s.type,u.value),an(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,_a(s),f=sn(f),u=u(f),s.flags|=1,an(n,s,u,o),s.child;case 14:return dT(n,s,s.type,s.pendingProps,o);case 15:return mT(n,s,s.type,s.pendingProps,o);case 19:return ST(n,s,o);case 31:return FR(n,s,o);case 22:return pT(n,s,o,s.pendingProps);case 24:return _a(s),u=sn(Lt),n===null?(f=Nm(),f===null&&(f=lt,m=Dm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},Om(s),$r(s,Lt,f)):((n.lanes&o)!==0&&(Pm(n,s),Du(s,null,null,o),Cu()),f=n.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),$r(s,Lt,u)):(u=m.cache,$r(s,Lt,u),u!==f.cache&&Cm(s,[Lt],o,!0))),an(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function fr(n){n.flags|=4}function pp(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(JT())n.flags|=8192;else throw Ta=jh,xm}else n.flags&=-16777217}function bT(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!BE(s))if(JT())n.flags|=8192;else throw Ta=jh,xm}function of(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?fh():536870912,n.lanes|=s,Fo|=s)}function Mu(n,s){if(!je)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function dt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function HR(n,s,o){var u=s.pendingProps;switch(Sm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(s),null;case 1:return dt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),lr(Lt),ct(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Do(s)?fr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,bm())),dt(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(fr(s),m!==null?(dt(s),bT(s,m)):(dt(s),pp(s,f,null,u,o))):m?m!==n.memoizedState?(fr(s),dt(s),bT(s,m)):(dt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&fr(s),dt(s),pp(s,f,n,u,o)),null;case 27:if(ao(s),o=ve.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&fr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return dt(s),null}n=ce.current,Do(s)?rv(s):(n=xE(f,u,o),s.stateNode=n,fr(s))}return dt(s),null;case 5:if(ao(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&fr(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return dt(s),null}if(m=ce.current,Do(s))rv(s);else{var y=Af(ve.current);switch(m){case 1:m=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=y.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?y.createElement("select",{is:u.is}):y.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?y.createElement(f,{is:u.is}):y.createElement(f)}}m[Pt]=s,m[Yt]=u;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)m.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=m;e:switch(on(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&fr(s)}}return dt(s),pp(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&fr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=ve.current,Do(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=rn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Pt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||EE(n.nodeValue,o)),n||Xr(s,!0)}else n=Af(n).createTextNode(u),n[Pt]=s,s.stateNode=n}return dt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=Do(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Pt]=s}else pa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),n=!1}else o=bm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(kn(s),s):(kn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return dt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Do(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Pt]=s}else pa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;dt(s),f=!1}else f=bm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(kn(s),s):(kn(s),null)}return kn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),of(s,s.updateQueue),dt(s),null);case 4:return ct(),n===null&&Lp(s.stateNode.containerInfo),dt(s),null;case 10:return lr(s.type),dt(s),null;case 19:if($(Ct),u=s.memoizedState,u===null)return dt(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)Mu(u,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Qh(n),m!==null){for(s.flags|=128,Mu(u,!1),n=m.updateQueue,s.updateQueue=n,of(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Zy(o,n),o=o.sibling;return oe(Ct,Ct.current&1|2),je&&ar(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&mn()>ff&&(s.flags|=128,f=!0,Mu(u,!1),s.lanes=4194304)}else{if(!f)if(n=Qh(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,of(s,n),Mu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!je)return dt(s),null}else 2*mn()-u.renderingStartTime>ff&&o!==536870912&&(s.flags|=128,f=!0,Mu(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=mn(),n.sibling=null,o=Ct.current,oe(Ct,f?o&1|2:o&1),je&&ar(s,u.treeForkCount),n):(dt(s),null);case 22:case 23:return kn(s),Um(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(dt(s),s.subtreeFlags&6&&(s.flags|=8192)):dt(s),o=s.updateQueue,o!==null&&of(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&$(ya),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),lr(Lt),dt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function GR(n,s){switch(Sm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return lr(Lt),ct(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ao(s),null;case 31:if(s.memoizedState!==null){if(kn(s),s.alternate===null)throw Error(i(340));pa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(kn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));pa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return $(Ct),null;case 4:return ct(),null;case 10:return lr(s.type),null;case 22:case 23:return kn(s),Um(),n!==null&&$(ya),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return lr(Lt),null;case 25:return null;default:return null}}function wT(n,s){switch(Sm(s),s.tag){case 3:lr(Lt),ct();break;case 26:case 27:case 5:ao(s);break;case 4:ct();break;case 31:s.memoizedState!==null&&kn(s);break;case 13:kn(s);break;case 19:$(Ct);break;case 10:lr(s.type);break;case 22:case 23:kn(s),Um(),n!==null&&$(ya);break;case 24:lr(Lt)}}function ku(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,y=o.inst;u=m(),y.destroy=u}o=o.next}while(o!==f)}}catch(A){We(s,s.return,A)}}function ns(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var y=u.inst,A=y.destroy;if(A!==void 0){y.destroy=void 0,f=s;var C=o,B=A;try{B()}catch(X){We(f,C,X)}}}u=u.next}while(u!==m)}}catch(X){We(s,s.return,X)}}function RT(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{_v(s,o)}catch(u){We(n,n.return,u)}}}function CT(n,s,o){o.props=Sa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){We(n,s,u)}}function Lu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){We(n,s,f)}}function Hi(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){We(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){We(n,s,f)}else o.current=null}function DT(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){We(n,n.return,f)}}function gp(n,s,o){try{var u=n.stateNode;d1(u,n.type,o,s),u[Yt]=s}catch(f){We(n,n.return,f)}}function VT(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&us(n.type)||n.tag===4}function _p(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||VT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&us(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function yp(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ci));else if(u!==4&&(u===27&&us(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(yp(n,s,o),n=n.sibling;n!==null;)yp(n,s,o),n=n.sibling}function lf(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&us(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(lf(n,s,o),n=n.sibling;n!==null;)lf(n,s,o),n=n.sibling}function NT(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);on(s,u,o),s[Pt]=n,s[Yt]=o}catch(m){We(n,n.return,m)}}var dr=!1,Bt=!1,vp=!1,xT=typeof WeakSet=="function"?WeakSet:Set,$t=null;function KR(n,s){if(n=n.containerInfo,Bp=Df,n=Hy(n),fm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var y=0,A=-1,C=-1,B=0,X=0,Z=n,F=null;t:for(;;){for(var H;Z!==o||f!==0&&Z.nodeType!==3||(A=y+f),Z!==m||u!==0&&Z.nodeType!==3||(C=y+u),Z.nodeType===3&&(y+=Z.nodeValue.length),(H=Z.firstChild)!==null;)F=Z,Z=H;for(;;){if(Z===n)break t;if(F===o&&++B===f&&(A=y),F===m&&++X===u&&(C=y),(H=Z.nextSibling)!==null)break;Z=F,F=Z.parentNode}Z=H}o=A===-1||C===-1?null:{start:A,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(qp={focusedElem:n,selectionRange:o},Df=!1,$t=s;$t!==null;)if(s=$t,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,$t=n;else for(;$t!==null;){switch(s=$t,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var fe=Sa(o.type,f);n=u.getSnapshotBeforeUpdate(fe,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ee){We(o,o.return,Ee)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Hp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Hp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,$t=n;break}$t=s.return}}function OT(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:pr(n,o),u&4&&ku(5,o);break;case 1:if(pr(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(y){We(o,o.return,y)}else{var f=Sa(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(y){We(o,o.return,y)}}u&64&&RT(o),u&512&&Lu(o,o.return);break;case 3:if(pr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{_v(n,s)}catch(y){We(o,o.return,y)}}break;case 27:s===null&&u&4&&NT(o);case 26:case 5:pr(n,o),s===null&&u&4&&DT(o),u&512&&Lu(o,o.return);break;case 12:pr(n,o);break;case 31:pr(n,o),u&4&&kT(n,o);break;case 13:pr(n,o),u&4&&LT(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=t1.bind(null,o),E1(n,o))));break;case 22:if(u=o.memoizedState!==null||dr,!u){s=s!==null&&s.memoizedState!==null||Bt,f=dr;var m=Bt;dr=u,(Bt=s)&&!m?gr(n,o,(o.subtreeFlags&8772)!==0):pr(n,o),dr=f,Bt=m}break;case 30:break;default:pr(n,o)}}function PT(n){var s=n.alternate;s!==null&&(n.alternate=null,PT(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ho(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var _t=null,Tn=!1;function mr(n,s,o){for(o=o.child;o!==null;)MT(n,s,o),o=o.sibling}function MT(n,s,o){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ai,o)}catch{}switch(o.tag){case 26:Bt||Hi(o,s),mr(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Bt||Hi(o,s);var u=_t,f=Tn;us(o.type)&&(_t=o.stateNode,Tn=!1),mr(n,s,o),Ku(o.stateNode),_t=u,Tn=f;break;case 5:Bt||Hi(o,s);case 6:if(u=_t,f=Tn,_t=null,mr(n,s,o),_t=u,Tn=f,_t!==null)if(Tn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(o.stateNode)}catch(m){We(o,s,m)}else try{_t.removeChild(o.stateNode)}catch(m){We(o,s,m)}break;case 18:_t!==null&&(Tn?(n=_t,RE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),$o(n)):RE(_t,o.stateNode));break;case 4:u=_t,f=Tn,_t=o.stateNode.containerInfo,Tn=!0,mr(n,s,o),_t=u,Tn=f;break;case 0:case 11:case 14:case 15:ns(2,o,s),Bt||ns(4,o,s),mr(n,s,o);break;case 1:Bt||(Hi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&CT(o,s,u)),mr(n,s,o);break;case 21:mr(n,s,o);break;case 22:Bt=(u=Bt)||o.memoizedState!==null,mr(n,s,o),Bt=u;break;default:mr(n,s,o)}}function kT(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{$o(n)}catch(o){We(s,s.return,o)}}}function LT(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{$o(n)}catch(o){We(s,s.return,o)}}function QR(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new xT),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new xT),s;default:throw Error(i(435,n.tag))}}function uf(n,s){var o=QR(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=n1.bind(null,n,u);u.then(f,f)}})}function En(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,y=s,A=y;e:for(;A!==null;){switch(A.tag){case 27:if(us(A.type)){_t=A.stateNode,Tn=!1;break e}break;case 5:_t=A.stateNode,Tn=!1;break e;case 3:case 4:_t=A.stateNode.containerInfo,Tn=!0;break e}A=A.return}if(_t===null)throw Error(i(160));MT(m,y,f),_t=null,Tn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)UT(s,n),s=s.sibling}var gi=null;function UT(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:En(s,n),An(n),u&4&&(ns(3,n,n.return),ku(3,n),ns(5,n,n.return));break;case 1:En(s,n),An(n),u&512&&(Bt||o===null||Hi(o,o.return)),u&64&&dr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=gi;if(En(s,n),An(n),u&512&&(Bt||o===null||Hi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Vi]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),on(m,u,o),m[Pt]=n,Mt(m),u=m;break e;case"link":var y=UE("link","href",f).get(u+(o.href||""));if(y){for(var A=0;A<y.length;A++)if(m=y[A],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){y.splice(A,1);break t}}m=f.createElement(u),on(m,u,o),f.head.appendChild(m);break;case"meta":if(y=UE("meta","content",f).get(u+(o.content||""))){for(A=0;A<y.length;A++)if(m=y[A],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){y.splice(A,1);break t}}m=f.createElement(u),on(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Pt]=n,Mt(m),u=m}n.stateNode=u}else zE(f,n.type,n.stateNode);else n.stateNode=LE(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?zE(f,n.type,n.stateNode):LE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&gp(n,n.memoizedProps,o.memoizedProps)}break;case 27:En(s,n),An(n),u&512&&(Bt||o===null||Hi(o,o.return)),o!==null&&u&4&&gp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(En(s,n),An(n),u&512&&(Bt||o===null||Hi(o,o.return)),n.flags&32){f=n.stateNode;try{vn(f,"")}catch(fe){We(n,n.return,fe)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,gp(n,f,o!==null?o.memoizedProps:f)),u&1024&&(vp=!0);break;case 6:if(En(s,n),An(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(fe){We(n,n.return,fe)}}break;case 3:if(bf=null,f=gi,gi=Sf(s.containerInfo),En(s,n),gi=f,An(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{$o(s.containerInfo)}catch(fe){We(n,n.return,fe)}vp&&(vp=!1,zT(n));break;case 4:u=gi,gi=Sf(n.stateNode.containerInfo),En(s,n),An(n),gi=u;break;case 12:En(s,n),An(n);break;case 31:En(s,n),An(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,uf(n,u)));break;case 13:En(s,n),An(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(hf=mn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,uf(n,u)));break;case 22:f=n.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,B=dr,X=Bt;if(dr=B||f,Bt=X||C,En(s,n),Bt=X,dr=B,An(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||dr||Bt||Ia(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(m=C.stateNode,f)y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{A=C.stateNode;var Z=C.memoizedProps.style,F=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;A.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(fe){We(C,C.return,fe)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(fe){We(C,C.return,fe)}}}else if(s.tag===18){if(o===null){C=s;try{var H=C.stateNode;f?CE(H,!0):CE(C.stateNode,!1)}catch(fe){We(C,C.return,fe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,uf(n,o))));break;case 19:En(s,n),An(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,uf(n,u)));break;case 30:break;case 21:break;default:En(s,n),An(n)}}function An(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(VT(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=_p(n);lf(n,m,f);break;case 5:var y=o.stateNode;o.flags&32&&(vn(y,""),o.flags&=-33);var A=_p(n);lf(n,A,y);break;case 3:case 4:var C=o.stateNode.containerInfo,B=_p(n);yp(n,B,C);break;default:throw Error(i(161))}}catch(X){We(n,n.return,X)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function zT(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;zT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function pr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)OT(n,s.alternate,s),s=s.sibling}function Ia(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ns(4,s,s.return),Ia(s);break;case 1:Hi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&CT(s,s.return,o),Ia(s);break;case 27:Ku(s.stateNode);case 26:case 5:Hi(s,s.return),Ia(s);break;case 22:s.memoizedState===null&&Ia(s);break;case 30:Ia(s);break;default:Ia(s)}n=n.sibling}}function gr(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,m=s,y=m.flags;switch(m.tag){case 0:case 11:case 15:gr(f,m,o),ku(4,m);break;case 1:if(gr(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){We(u,u.return,B)}if(u=m,f=u.updateQueue,f!==null){var A=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)gv(C[f],A)}catch(B){We(u,u.return,B)}}o&&y&64&&RT(m),Lu(m,m.return);break;case 27:NT(m);case 26:case 5:gr(f,m,o),o&&u===null&&y&4&&DT(m),Lu(m,m.return);break;case 12:gr(f,m,o);break;case 31:gr(f,m,o),o&&y&4&&kT(f,m);break;case 13:gr(f,m,o),o&&y&4&&LT(f,m);break;case 22:m.memoizedState===null&&gr(f,m,o),Lu(m,m.return);break;case 30:break;default:gr(f,m,o)}s=s.sibling}}function Tp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Su(o))}function Ep(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Su(n))}function _i(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)BT(n,s,o,u),s=s.sibling}function BT(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:_i(n,s,o,u),f&2048&&ku(9,s);break;case 1:_i(n,s,o,u);break;case 3:_i(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Su(n)));break;case 12:if(f&2048){_i(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,y=m.id,A=m.onPostCommit;typeof A=="function"&&A(y,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){We(s,s.return,C)}}else _i(n,s,o,u);break;case 31:_i(n,s,o,u);break;case 13:_i(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,y=s.alternate,s.memoizedState!==null?m._visibility&2?_i(n,s,o,u):Uu(n,s):m._visibility&2?_i(n,s,o,u):(m._visibility|=2,zo(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Tp(y,s);break;case 24:_i(n,s,o,u),f&2048&&Ep(s.alternate,s);break;default:_i(n,s,o,u)}}function zo(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,y=s,A=o,C=u,B=y.flags;switch(y.tag){case 0:case 11:case 15:zo(m,y,A,C,f),ku(8,y);break;case 23:break;case 22:var X=y.stateNode;y.memoizedState!==null?X._visibility&2?zo(m,y,A,C,f):Uu(m,y):(X._visibility|=2,zo(m,y,A,C,f)),f&&B&2048&&Tp(y.alternate,y);break;case 24:zo(m,y,A,C,f),f&&B&2048&&Ep(y.alternate,y);break;default:zo(m,y,A,C,f)}s=s.sibling}}function Uu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:Uu(o,u),f&2048&&Tp(u.alternate,u);break;case 24:Uu(o,u),f&2048&&Ep(u.alternate,u);break;default:Uu(o,u)}s=s.sibling}}var zu=8192;function Bo(n,s,o){if(n.subtreeFlags&zu)for(n=n.child;n!==null;)qT(n,s,o),n=n.sibling}function qT(n,s,o){switch(n.tag){case 26:Bo(n,s,o),n.flags&zu&&n.memoizedState!==null&&O1(o,gi,n.memoizedState,n.memoizedProps);break;case 5:Bo(n,s,o);break;case 3:case 4:var u=gi;gi=Sf(n.stateNode.containerInfo),Bo(n,s,o),gi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=zu,zu=16777216,Bo(n,s,o),zu=u):Bo(n,s,o));break;default:Bo(n,s,o)}}function FT(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Bu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,HT(u,n)}FT(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jT(n),n=n.sibling}function jT(n){switch(n.tag){case 0:case 11:case 15:Bu(n),n.flags&2048&&ns(9,n,n.return);break;case 3:Bu(n);break;case 12:Bu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,cf(n)):Bu(n);break;default:Bu(n)}}function cf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,HT(u,n)}FT(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ns(8,s,s.return),cf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,cf(s));break;default:cf(s)}n=n.sibling}}function HT(n,s){for(;$t!==null;){var o=$t;switch(o.tag){case 0:case 11:case 15:ns(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Su(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,$t=u;else e:for(o=n;$t!==null;){u=$t;var f=u.sibling,m=u.return;if(PT(u),u===o){$t=null;break e}if(f!==null){f.return=m,$t=f;break e}$t=m}}}var YR={getCacheForType:function(n){var s=sn(Lt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return sn(Lt).controller.signal}},XR=typeof WeakMap=="function"?WeakMap:Map,Ye=0,lt=null,ke=null,ze=0,Je=0,Ln=null,is=!1,qo=!1,Ap=!1,_r=0,St=0,rs=0,ba=0,Sp=0,Un=0,Fo=0,qu=null,Sn=null,Ip=!1,hf=0,GT=0,ff=1/0,df=null,ss=null,Ht=0,as=null,jo=null,yr=0,bp=0,wp=null,KT=null,Fu=0,Rp=null;function zn(){return(Ye&2)!==0&&ze!==0?ze&-ze:Q.T!==null?Op():dh()}function QT(){if(Un===0)if((ze&536870912)===0||je){var n=Ws;Ws<<=1,(Ws&3932160)===0&&(Ws=262144),Un=n}else Un=536870912;return n=Mn.current,n!==null&&(n.flags|=32),Un}function In(n,s,o){(n===lt&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(Ho(n,0),os(n,ze,Un,!1)),Zs(n,o),((Ye&2)===0||n!==lt)&&(n===lt&&((Ye&2)===0&&(ba|=o),St===4&&os(n,ze,Un,!1)),Gi(n))}function YT(n,s,o){if((Ye&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||oi(n,s),f=u?WR(n,s):Dp(n,s,!0),m=u;do{if(f===0){qo&&!u&&os(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!$R(o)){f=Dp(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var y=0;else y=n.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){s=y;e:{var A=n;f=qu;var C=A.current.memoizedState.isDehydrated;if(C&&(Ho(A,y).flags|=256),y=Dp(A,y,!1),y!==2){if(Ap&&!C){A.errorRecoveryDisabledLanes|=m,ba|=m,f=4;break e}m=Sn,Sn=f,m!==null&&(Sn===null?Sn=m:Sn.push.apply(Sn,m))}f=y}if(m=!1,f!==2)continue}}if(f===1){Ho(n,0),os(n,s,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:os(u,s,Un,!is);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=hf+300-mn(),10<f)){if(os(u,s,Un,!is),Ri(u,0,!0)!==0)break e;yr=s,u.timeoutHandle=bE(XT.bind(null,u,o,Sn,df,Ip,s,Un,ba,Fo,is,m,"Throttled",-0,0),f);break e}XT(u,o,Sn,df,Ip,s,Un,ba,Fo,is,m,null,-0,0)}}break}while(!0);Gi(n)}function XT(n,s,o,u,f,m,y,A,C,B,X,Z,F,H){if(n.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ci},qT(s,m,Z);var fe=(m&62914560)===m?hf-mn():(m&4194048)===m?GT-mn():0;if(fe=P1(Z,fe),fe!==null){yr=m,n.cancelPendingCommit=fe(iE.bind(null,n,s,m,o,u,f,y,A,C,X,Z,null,F,H)),os(n,m,y,!B);return}}iE(n,s,m,o,u,f,y,A,C)}function $R(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!On(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function os(n,s,o,u){s&=~Sp,s&=~ba,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var m=31-wt(f),y=1<<m;u[m]=-1,f&=~y}o!==0&&ea(n,o,s)}function mf(){return(Ye&6)===0?(ju(0),!1):!0}function Cp(){if(ke!==null){if(Je===0)var n=ke.return;else n=ke,or=ga=null,Hm(n),Po=null,bu=0,n=ke;for(;n!==null;)wT(n.alternate,n),n=n.return;ke=null}}function Ho(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,g1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),yr=0,Cp(),lt=n,ke=o=sr(n.current,null),ze=s,Je=0,Ln=null,is=!1,qo=oi(n,s),Ap=!1,Fo=Un=Sp=ba=rs=St=0,Sn=qu=null,Ip=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-wt(u),m=1<<f;s|=n[f],u&=~m}return _r=s,Ph(),o}function $T(n,s){Ve=null,Q.H=Ou,s===Oo||s===Fh?(s=fv(),Je=3):s===xm?(s=fv(),Je=4):Je=s===ap?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ln=s,ke===null&&(St=1,nf(n,Wn(s,n.current)))}function JT(){var n=Mn.current;return n===null?!0:(ze&4194048)===ze?ni===null:(ze&62914560)===ze||(ze&536870912)!==0?n===ni:!1}function WT(){var n=Q.H;return Q.H=Ou,n===null?Ou:n}function ZT(){var n=Q.A;return Q.A=YR,n}function pf(){St=4,is||(ze&4194048)!==ze&&Mn.current!==null||(qo=!0),(rs&134217727)===0&&(ba&134217727)===0||lt===null||os(lt,ze,Un,!1)}function Dp(n,s,o){var u=Ye;Ye|=2;var f=WT(),m=ZT();(lt!==n||ze!==s)&&(df=null,Ho(n,s)),s=!1;var y=St;e:do try{if(Je!==0&&ke!==null){var A=ke,C=Ln;switch(Je){case 8:Cp(),y=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(s=!0);var B=Je;if(Je=0,Ln=null,Go(n,A,C,B),o&&qo){y=0;break e}break;default:B=Je,Je=0,Ln=null,Go(n,A,C,B)}}JR(),y=St;break}catch(X){$T(n,X)}while(!0);return s&&n.shellSuspendCounter++,or=ga=null,Ye=u,Q.H=f,Q.A=m,ke===null&&(lt=null,ze=0,Ph()),y}function JR(){for(;ke!==null;)eE(ke)}function WR(n,s){var o=Ye;Ye|=2;var u=WT(),f=ZT();lt!==n||ze!==s?(df=null,ff=mn()+500,Ho(n,s)):qo=oi(n,s);e:do try{if(Je!==0&&ke!==null){s=ke;var m=Ln;t:switch(Je){case 1:Je=0,Ln=null,Go(n,s,m,1);break;case 2:case 9:if(cv(m)){Je=0,Ln=null,tE(s);break}s=function(){Je!==2&&Je!==9||lt!==n||(Je=7),Gi(n)},m.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:cv(m)?(Je=0,Ln=null,tE(s)):(Je=0,Ln=null,Go(n,s,m,7));break;case 5:var y=null;switch(ke.tag){case 26:y=ke.memoizedState;case 5:case 27:var A=ke;if(y?BE(y):A.stateNode.complete){Je=0,Ln=null;var C=A.sibling;if(C!==null)ke=C;else{var B=A.return;B!==null?(ke=B,gf(B)):ke=null}break t}}Je=0,Ln=null,Go(n,s,m,5);break;case 6:Je=0,Ln=null,Go(n,s,m,6);break;case 8:Cp(),St=6;break e;default:throw Error(i(462))}}ZR();break}catch(X){$T(n,X)}while(!0);return or=ga=null,Q.H=u,Q.A=f,Ye=o,ke!==null?0:(lt=null,ze=0,Ph(),St)}function ZR(){for(;ke!==null&&!sm();)eE(ke)}function eE(n){var s=IT(n.alternate,n,_r);n.memoizedProps=n.pendingProps,s===null?gf(n):ke=s}function tE(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=yT(o,s,s.pendingProps,s.type,void 0,ze);break;case 11:s=yT(o,s,s.pendingProps,s.type.render,s.ref,ze);break;case 5:Hm(s);default:wT(o,s),s=ke=Zy(s,_r),s=IT(o,s,_r)}n.memoizedProps=n.pendingProps,s===null?gf(n):ke=s}function Go(n,s,o,u){or=ga=null,Hm(s),Po=null,bu=0;var f=s.return;try{if(qR(n,f,s,o,ze)){St=1,nf(n,Wn(o,n.current)),ke=null;return}}catch(m){if(f!==null)throw ke=f,m;St=1,nf(n,Wn(o,n.current)),ke=null;return}s.flags&32768?(je||u===1?n=!0:qo||(ze&536870912)!==0?n=!1:(is=n=!0,(u===2||u===9||u===3||u===6)&&(u=Mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),nE(s,n)):gf(s)}function gf(n){var s=n;do{if((s.flags&32768)!==0){nE(s,is);return}n=s.return;var o=HR(s.alternate,s,_r);if(o!==null){ke=o;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=n}while(s!==null);St===0&&(St=5)}function nE(n,s){do{var o=GR(n.alternate,n);if(o!==null){o.flags&=32767,ke=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){ke=n;return}ke=n=o}while(n!==null);St=6,ke=null}function iE(n,s,o,u,f,m,y,A,C){n.cancelPendingCommit=null;do _f();while(Ht!==0);if((Ye&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=_m,lm(n,o,m,y,A,C),n===lt&&(ke=lt=null,ze=0),jo=s,as=n,yr=o,bp=m,wp=f,KT=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,i1(Lr,function(){return lE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,f=G.p,G.p=2,y=Ye,Ye|=4;try{KR(n,s,o)}finally{Ye=y,G.p=f,Q.T=u}}Ht=1,rE(),sE(),aE()}}function rE(){if(Ht===1){Ht=0;var n=as,s=jo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=G.p;G.p=2;var f=Ye;Ye|=4;try{UT(s,n);var m=qp,y=Hy(n.containerInfo),A=m.focusedElem,C=m.selectionRange;if(y!==A&&A&&A.ownerDocument&&jy(A.ownerDocument.documentElement,A)){if(C!==null&&fm(A)){var B=C.start,X=C.end;if(X===void 0&&(X=B),"selectionStart"in A)A.selectionStart=B,A.selectionEnd=Math.min(X,A.value.length);else{var Z=A.ownerDocument||document,F=Z&&Z.defaultView||window;if(F.getSelection){var H=F.getSelection(),fe=A.textContent.length,Ee=Math.min(C.start,fe),st=C.end===void 0?Ee:Math.min(C.end,fe);!H.extend&&Ee>st&&(y=st,st=Ee,Ee=y);var M=Fy(A,Ee),x=Fy(A,st);if(M&&x&&(H.rangeCount!==1||H.anchorNode!==M.node||H.anchorOffset!==M.offset||H.focusNode!==x.node||H.focusOffset!==x.offset)){var z=Z.createRange();z.setStart(M.node,M.offset),H.removeAllRanges(),Ee>st?(H.addRange(z),H.extend(x.node,x.offset)):(z.setEnd(x.node,x.offset),H.addRange(z))}}}}for(Z=[],H=A;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<Z.length;A++){var J=Z[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Df=!!Bp,qp=Bp=null}finally{Ye=f,G.p=u,Q.T=o}}n.current=s,Ht=2}}function sE(){if(Ht===2){Ht=0;var n=as,s=jo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=G.p;G.p=2;var f=Ye;Ye|=4;try{OT(n,s.alternate,s)}finally{Ye=f,G.p=u,Q.T=o}}Ht=3}}function aE(){if(Ht===4||Ht===3){Ht=0,ah();var n=as,s=jo,o=yr,u=KT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ht=5:(Ht=0,jo=as=null,oE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ss=null),tr(o),s=s.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ai,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,f=G.p,G.p=2,Q.T=null;try{for(var m=n.onRecoverableError,y=0;y<u.length;y++){var A=u[y];m(A.value,{componentStack:A.stack})}}finally{Q.T=s,G.p=f}}(yr&3)!==0&&_f(),Gi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Rp?Fu++:(Fu=0,Rp=n):Fu=0,ju(0)}}function oE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Su(s)))}function _f(){return rE(),sE(),aE(),lE()}function lE(){if(Ht!==5)return!1;var n=as,s=bp;bp=0;var o=tr(yr),u=Q.T,f=G.p;try{G.p=32>o?32:o,Q.T=null,o=wp,wp=null;var m=as,y=yr;if(Ht=0,jo=as=null,yr=0,(Ye&6)!==0)throw Error(i(331));var A=Ye;if(Ye|=4,jT(m.current),BT(m,m.current,y,o),Ye=A,ju(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ai,m)}catch{}return!0}finally{G.p=f,Q.T=u,oE(n,s)}}function uE(n,s,o){s=Wn(o,s),s=sp(n.stateNode,s,2),n=Zr(n,s,2),n!==null&&(Zs(n,2),Gi(n))}function We(n,s,o){if(n.tag===3)uE(n,n,o);else for(;s!==null;){if(s.tag===3){uE(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ss===null||!ss.has(u))){n=Wn(o,n),o=cT(2),u=Zr(s,o,2),u!==null&&(hT(o,u,s,n),Zs(u,2),Gi(u));break}}s=s.return}}function Vp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new XR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Ap=!0,f.add(o),n=e1.bind(null,n,s,o),s.then(n,n))}function e1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,lt===n&&(ze&o)===o&&(St===4||St===3&&(ze&62914560)===ze&&300>mn()-hf?(Ye&2)===0&&Ho(n,0):Sp|=o,Fo===ze&&(Fo=0)),Gi(n)}function cE(n,s){s===0&&(s=fh()),n=da(n,s),n!==null&&(Zs(n,s),Gi(n))}function t1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),cE(n,o)}function n1(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),cE(n,o)}function i1(n,s){return jt(n,s)}var yf=null,Ko=null,Np=!1,vf=!1,xp=!1,ls=0;function Gi(n){n!==Ko&&n.next===null&&(Ko===null?yf=Ko=n:Ko=Ko.next=n),vf=!0,Np||(Np=!0,s1())}function ju(n,s){if(!xp&&vf){xp=!0;do for(var o=!1,u=yf;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var y=u.suspendedLanes,A=u.pingedLanes;m=(1<<31-wt(42|n)+1)-1,m&=f&~(y&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,mE(u,m))}else m=ze,m=Ri(u,u===lt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||oi(u,m)||(o=!0,mE(u,m));u=u.next}while(o);xp=!1}}function r1(){hE()}function hE(){vf=Np=!1;var n=0;ls!==0&&p1()&&(n=ls);for(var s=mn(),o=null,u=yf;u!==null;){var f=u.next,m=fE(u,s);m===0?(u.next=null,o===null?yf=f:o.next=f,f===null&&(Ko=o)):(o=u,(n!==0||(m&3)!==0)&&(vf=!0)),u=f}Ht!==0&&Ht!==5||ju(n),ls!==0&&(ls=0)}function fE(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var y=31-wt(m),A=1<<y,C=f[y];C===-1?((A&o)===0||(A&u)!==0)&&(f[y]=om(A,s)):C<=s&&(n.expiredLanes|=A),m&=~A}if(s=lt,o=ze,o=Ri(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&kr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||oi(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&kr(u),tr(o)){case 2:case 8:o=Zl;break;case 32:o=Lr;break;case 268435456:o=oh;break;default:o=Lr}return u=dE.bind(null,n),o=jt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&kr(u),n.callbackPriority=2,n.callbackNode=null,2}function dE(n,s){if(Ht!==0&&Ht!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(_f()&&n.callbackNode!==o)return null;var u=ze;return u=Ri(n,n===lt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(YT(n,u,s),fE(n,mn()),n.callbackNode!=null&&n.callbackNode===o?dE.bind(null,n):null)}function mE(n,s){if(_f())return null;YT(n,s,!0)}function s1(){_1(function(){(Ye&6)!==0?jt(Wl,r1):hE()})}function Op(){if(ls===0){var n=No;n===0&&(n=bi,bi<<=1,(bi&261888)===0&&(bi=256)),ls=n}return ls}function pE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:go(""+n)}function gE(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function a1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=pE((f[Yt]||null).action),y=u.submitter;y&&(s=(s=y[Yt]||null)?pE(s.formAction):y.getAttribute("formAction"),s!==null&&(m=s,y=null));var A=new Ui("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ls!==0){var C=y?gE(f,y):new FormData(f);Zm(o,{pending:!0,data:C,method:f.method,action:m},null,C)}}else typeof m=="function"&&(A.preventDefault(),C=y?gE(f,y):new FormData(f),Zm(o,{pending:!0,data:C,method:f.method,action:m},m,C))},currentTarget:f}]})}}for(var Pp=0;Pp<gm.length;Pp++){var Mp=gm[Pp],o1=Mp.toLowerCase(),l1=Mp[0].toUpperCase()+Mp.slice(1);pi(o1,"on"+l1)}pi(Qy,"onAnimationEnd"),pi(Yy,"onAnimationIteration"),pi(Xy,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(IR,"onTransitionRun"),pi(bR,"onTransitionStart"),pi(wR,"onTransitionCancel"),pi($y,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hu));function _E(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var y=u.length-1;0<=y;y--){var A=u[y],C=A.instance,B=A.currentTarget;if(A=A.listener,C!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=B;try{m(f)}catch(X){Oh(X)}f.currentTarget=null,m=C}else for(y=0;y<u.length;y++){if(A=u[y],C=A.instance,B=A.currentTarget,A=A.listener,C!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=B;try{m(f)}catch(X){Oh(X)}f.currentTarget=null,m=C}}}}function Le(n,s){var o=s[co];o===void 0&&(o=s[co]=new Set);var u=n+"__bubble";o.has(u)||(yE(s,n,2,!1),o.add(u))}function kp(n,s,o){var u=0;s&&(u|=4),yE(o,n,u,s)}var Tf="_reactListening"+Math.random().toString(36).slice(2);function Lp(n){if(!n[Tf]){n[Tf]=!0,nu.forEach(function(o){o!=="selectionchange"&&(u1.has(o)||kp(o,!1,n),kp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Tf]||(s[Tf]=!0,kp("selectionchange",!1,s))}}function yE(n,s,o,u){switch(QE(s)){case 2:var f=L1;break;case 8:f=U1;break;default:f=Wp}o=f.bind(null,s,o,n),f=void 0,!sa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Up(n,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var A=u.stateNode.containerInfo;if(A===f)break;if(y===4)for(y=u.return;y!==null;){var C=y.tag;if((C===3||C===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;A!==null;){if(y=Ni(A),y===null)return;if(C=y.tag,C===5||C===6||C===26||C===27){u=m=y;continue e}A=A.parentNode}}u=u.return}jr(function(){var B=m,X=Yn(o),Z=[];e:{var F=Jy.get(n);if(F!==void 0){var H=Ui,fe=n;switch(n){case"keypress":if(oa(o)===0)break e;case"keydown":case"keyup":H=Vh;break;case"focusin":fe="focus",H=ua;break;case"focusout":fe="blur",H=ua;break;case"beforeblur":case"afterblur":H=ua;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Eh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=_;break;case Qy:case Yy:case Xy:H=Sh;break;case $y:H=I;break;case"scroll":case"scrollend":H=mu;break;case"wheel":H=j;break;case"copy":case"cut":case"paste":H=Ih;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=rr;break;case"toggle":case"beforetoggle":H=De}var Ee=(s&4)!==0,st=!Ee&&(n==="scroll"||n==="scrollend"),M=Ee?F!==null?F+"Capture":null:F;Ee=[];for(var x=B,z;x!==null;){var J=x;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||M===null||(J=hi(x,M),J!=null&&Ee.push(Gu(x,J,z))),st)break;x=x.return}0<Ee.length&&(F=new H(F,fe,null,o,X),Z.push({event:F,listeners:Ee}))}}if((s&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",F&&o!==hu&&(fe=o.relatedTarget||o.fromElement)&&(Ni(fe)||fe[Di]))break e;if((H||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,H?(fe=o.relatedTarget||o.toElement,H=B,fe=fe?Ni(fe):null,fe!==null&&(st=l(fe),Ee=fe.tag,fe!==st||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(H=null,fe=B),H!==fe)){if(Ee=pu,J="onMouseLeave",M="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=rr,J="onPointerLeave",M="onPointerEnter",x="pointer"),st=H==null?F:Nn(H),z=fe==null?F:Nn(fe),F=new Ee(J,x+"leave",H,o,X),F.target=st,F.relatedTarget=z,J=null,Ni(X)===B&&(Ee=new Ee(M,x+"enter",fe,o,X),Ee.target=z,Ee.relatedTarget=st,J=Ee),st=J,H&&fe)t:{for(Ee=c1,M=H,x=fe,z=0,J=M;J;J=Ee(J))z++;J=0;for(var ye=x;ye;ye=Ee(ye))J++;for(;0<z-J;)M=Ee(M),z--;for(;0<J-z;)x=Ee(x),J--;for(;z--;){if(M===x||x!==null&&M===x.alternate){Ee=M;break t}M=Ee(M),x=Ee(x)}Ee=null}else Ee=null;H!==null&&vE(Z,F,H,Ee,!1),fe!==null&&st!==null&&vE(Z,st,fe,Ee,!0)}}e:{if(F=B?Nn(B):window,H=F.nodeName&&F.nodeName.toLowerCase(),H==="select"||H==="input"&&F.type==="file")var Ge=ky;else if(Py(F))if(Ly)Ge=ER;else{Ge=vR;var pe=yR}else H=F.nodeName,!H||H.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?B&&po(B.elementType)&&(Ge=ky):Ge=TR;if(Ge&&(Ge=Ge(n,B))){My(Z,Ge,o,X);break e}pe&&pe(n,F,B),n==="focusout"&&B&&F.type==="number"&&B.memoizedProps.value!=null&&lu(F,"number",F.value)}switch(pe=B?Nn(B):window,n){case"focusin":(Py(pe)||pe.contentEditable==="true")&&(So=pe,dm=B,Tu=null);break;case"focusout":Tu=dm=So=null;break;case"mousedown":mm=!0;break;case"contextmenu":case"mouseup":case"dragend":mm=!1,Gy(Z,o,X);break;case"selectionchange":if(SR)break;case"keydown":case"keyup":Gy(Z,o,X)}var Ne;if(Qe)e:{switch(n){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Ao?ca(n,o)&&(Be="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Be="onCompositionStart");Be&&(qi&&o.locale!=="ko"&&(Ao||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Ao&&(Ne=du()):(Li=X,fu="value"in Li?Li.value:Li.textContent,Ao=!0)),pe=Ef(B,Be),0<pe.length&&(Be=new Bi(Be,n,null,o,X),Z.push({event:Be,listeners:pe}),Ne?Be.data=Ne:(Ne=Eo(o),Ne!==null&&(Be.data=Ne)))),(Ne=$n?mR(n,o):pR(n,o))&&(Be=Ef(B,"onBeforeInput"),0<Be.length&&(pe=new Bi("onBeforeInput","beforeinput",null,o,X),Z.push({event:pe,listeners:Be}),pe.data=Ne)),a1(Z,n,B,o,X)}_E(Z,s)})}function Gu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Ef(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=hi(n,o),f!=null&&u.unshift(Gu(n,f,m)),f=hi(n,s),f!=null&&u.push(Gu(n,f,m))),n.tag===3)return u;n=n.return}return[]}function c1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function vE(n,s,o,u,f){for(var m=s._reactName,y=[];o!==null&&o!==u;){var A=o,C=A.alternate,B=A.stateNode;if(A=A.tag,C!==null&&C===u)break;A!==5&&A!==26&&A!==27||B===null||(C=B,f?(B=hi(o,m),B!=null&&y.unshift(Gu(o,B,C))):f||(B=hi(o,m),B!=null&&y.push(Gu(o,B,C)))),o=o.return}y.length!==0&&n.push({event:s,listeners:y})}var h1=/\r\n?/g,f1=/\u0000|\uFFFD/g;function TE(n){return(typeof n=="string"?n:""+n).replace(h1,`
`).replace(f1,"")}function EE(n,s){return s=TE(s),TE(n)===s}function rt(n,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||vn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&vn(n,""+u);break;case"className":xn(n,"class",u);break;case"tabIndex":xn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(n,o,u);break;case"style":cu(n,u,m);break;case"data":if(s!=="object"){xn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=go(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&rt(n,s,"name",f.name,f,null),rt(n,s,"formEncType",f.formEncType,f,null),rt(n,s,"formMethod",f.formMethod,f,null),rt(n,s,"formTarget",f.formTarget,f,null)):(rt(n,s,"encType",f.encType,f,null),rt(n,s,"method",f.method,f,null),rt(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=go(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ci);break;case"onScroll":u!=null&&Le("scroll",n);break;case"onScrollEnd":u!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=go(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Le("beforetoggle",n),Le("toggle",n),fo(n,"popover",u);break;case"xlinkActuate":kt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":fo(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Th.get(o)||o,fo(n,o,u))}}function zp(n,s,o,u,f,m){switch(o){case"style":cu(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?vn(n,u):(typeof u=="number"||typeof u=="bigint")&&vn(n,""+u);break;case"onScroll":u!=null&&Le("scroll",n);break;case"onScrollEnd":u!=null&&Le("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=n[Yt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):fo(n,o,u)}}}function on(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var y=o[m];if(y!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(n,s,m,y,o,null)}}f&&rt(n,s,"srcSet",o.srcSet,o,null),u&&rt(n,s,"src",o.src,o,null);return;case"input":Le("invalid",n);var A=m=y=f=null,C=null,B=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":f=X;break;case"type":y=X;break;case"checked":C=X;break;case"defaultChecked":B=X;break;case"value":m=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:rt(n,s,u,X,o,null)}}_h(n,m,A,C,B,y,f,!1);return;case"select":Le("invalid",n),u=y=m=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":y=A;break;case"multiple":u=A;default:rt(n,s,f,A,o,null)}s=m,o=y,n.multiple=!!u,s!=null?zr(n,!!u,s,!1):o!=null&&zr(n,!!u,o,!0);return;case"textarea":Le("invalid",n),m=f=u=null;for(y in o)if(o.hasOwnProperty(y)&&(A=o[y],A!=null))switch(y){case"value":u=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:rt(n,s,y,A,o,null)}Br(n,u,f,m);return;case"option":for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null)&&(C==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":rt(n,s,C,u,o,null));return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(u=0;u<Hu.length;u++)Le(Hu[u],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in o)if(o.hasOwnProperty(B)&&(u=o[B],u!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:rt(n,s,B,u,o,null)}return;default:if(po(s)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&zp(n,s,X,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&rt(n,s,A,u,o,null))}function d1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,y=null,A=null,C=null,B=null,X=null;for(H in o){var Z=o[H];if(o.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=Z;default:u.hasOwnProperty(H)||rt(n,s,H,null,u,Z)}}for(var F in u){var H=u[F];if(Z=o[F],u.hasOwnProperty(F)&&(H!=null||Z!=null))switch(F){case"type":m=H;break;case"name":f=H;break;case"checked":B=H;break;case"defaultChecked":X=H;break;case"value":y=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:H!==Z&&rt(n,s,F,H,u,Z)}}mo(n,y,A,C,B,X,m,f);return;case"select":H=y=A=F=null;for(m in o)if(C=o[m],o.hasOwnProperty(m)&&C!=null)switch(m){case"value":break;case"multiple":H=C;default:u.hasOwnProperty(m)||rt(n,s,m,null,u,C)}for(f in u)if(m=u[f],C=o[f],u.hasOwnProperty(f)&&(m!=null||C!=null))switch(f){case"value":F=m;break;case"defaultValue":A=m;break;case"multiple":y=m;default:m!==C&&rt(n,s,f,m,u,C)}s=A,o=y,u=H,F!=null?zr(n,!!o,F,!1):!!u!=!!o&&(s!=null?zr(n,!!o,s,!0):zr(n,!!o,o?[]:"",!1));return;case"textarea":H=F=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:rt(n,s,A,null,u,f)}for(y in u)if(f=u[y],m=o[y],u.hasOwnProperty(y)&&(f!=null||m!=null))switch(y){case"value":F=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&rt(n,s,y,f,u,m)}yh(n,F,H);return;case"option":for(var fe in o)F=o[fe],o.hasOwnProperty(fe)&&F!=null&&!u.hasOwnProperty(fe)&&(fe==="selected"?n.selected=!1:rt(n,s,fe,null,u,F));for(C in u)F=u[C],H=o[C],u.hasOwnProperty(C)&&F!==H&&(F!=null||H!=null)&&(C==="selected"?n.selected=F&&typeof F!="function"&&typeof F!="symbol":rt(n,s,C,F,u,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)F=o[Ee],o.hasOwnProperty(Ee)&&F!=null&&!u.hasOwnProperty(Ee)&&rt(n,s,Ee,null,u,F);for(B in u)if(F=u[B],H=o[B],u.hasOwnProperty(B)&&F!==H&&(F!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,s));break;default:rt(n,s,B,F,u,H)}return;default:if(po(s)){for(var st in o)F=o[st],o.hasOwnProperty(st)&&F!==void 0&&!u.hasOwnProperty(st)&&zp(n,s,st,void 0,u,F);for(X in u)F=u[X],H=o[X],!u.hasOwnProperty(X)||F===H||F===void 0&&H===void 0||zp(n,s,X,F,u,H);return}}for(var M in o)F=o[M],o.hasOwnProperty(M)&&F!=null&&!u.hasOwnProperty(M)&&rt(n,s,M,null,u,F);for(Z in u)F=u[Z],H=o[Z],!u.hasOwnProperty(Z)||F===H||F==null&&H==null||rt(n,s,Z,F,u,H)}function AE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,y=f.initiatorType,A=f.duration;if(m&&A&&AE(y)){for(y=0,A=f.responseEnd,u+=1;u<o.length;u++){var C=o[u],B=C.startTime;if(B>A)break;var X=C.transferSize,Z=C.initiatorType;X&&AE(Z)&&(C=C.responseEnd,y+=X*(C<A?1:(A-B)/(C-B)))}if(--u,s+=8*(m+y)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Bp=null,qp=null;function Af(n){return n.nodeType===9?n:n.ownerDocument}function SE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function IE(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Fp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jp=null;function p1(){var n=window.event;return n&&n.type==="popstate"?n===jp?!1:(jp=n,!0):(jp=null,!1)}var bE=typeof setTimeout=="function"?setTimeout:void 0,g1=typeof clearTimeout=="function"?clearTimeout:void 0,wE=typeof Promise=="function"?Promise:void 0,_1=typeof queueMicrotask=="function"?queueMicrotask:typeof wE<"u"?function(n){return wE.resolve(null).then(n).catch(y1)}:bE;function y1(n){setTimeout(function(){throw n})}function us(n){return n==="head"}function RE(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),$o(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ku(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Ku(o);for(var m=o.firstChild;m;){var y=m.nextSibling,A=m.nodeName;m[Vi]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=y}}else o==="body"&&Ku(n.ownerDocument.body);o=f}while(o);$o(s)}function CE(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Hp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Hp(o),ho(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function v1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Vi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ii(n.nextSibling),n===null)break}return null}function T1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ii(n.nextSibling),n===null))return null;return n}function DE(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=ii(n.nextSibling),n===null))return null;return n}function Gp(n){return n.data==="$?"||n.data==="$~"}function Kp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function E1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ii(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Qp=null;function VE(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return ii(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function NE(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function xE(n,s,o){switch(s=Af(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Ku(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ho(n)}var ri=new Map,OE=new Set;function Sf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var vr=G.d;G.d={f:A1,r:S1,D:I1,C:b1,L:w1,m:R1,X:D1,S:C1,M:V1};function A1(){var n=vr.f(),s=mf();return n||s}function S1(n){var s=Qn(n);s!==null&&s.tag===5&&s.type==="form"?$v(s):vr.r(n)}var Qo=typeof document>"u"?null:document;function PE(n,s,o){var u=Qo;if(u&&typeof s=="string"&&s){var f=yn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),OE.has(f)||(OE.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),on(s,"link",n),Mt(s),u.head.appendChild(s)))}}function I1(n){vr.D(n),PE("dns-prefetch",n,null)}function b1(n,s){vr.C(n,s),PE("preconnect",n,s)}function w1(n,s,o){vr.L(n,s,o);var u=Qo;if(u&&n&&s){var f='link[rel="preload"][as="'+yn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+yn(o.imageSizes)+'"]')):f+='[href="'+yn(n)+'"]';var m=f;switch(s){case"style":m=Yo(n);break;case"script":m=Xo(n)}ri.has(m)||(n=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),ri.set(m,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Qu(m))||s==="script"&&u.querySelector(Yu(m))||(s=u.createElement("link"),on(s,"link",n),Mt(s),u.head.appendChild(s)))}}function R1(n,s){vr.m(n,s);var o=Qo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Xo(n)}if(!ri.has(m)&&(n=E({rel:"modulepreload",href:n},s),ri.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yu(m)))return}u=o.createElement("link"),on(u,"link",n),Mt(u),o.head.appendChild(u)}}}function C1(n,s,o){vr.S(n,s,o);var u=Qo;if(u&&n){var f=xi(u).hoistableStyles,m=Yo(n);s=s||"default";var y=f.get(m);if(!y){var A={loading:0,preload:null};if(y=u.querySelector(Qu(m)))A.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},o),(o=ri.get(m))&&Yp(n,o);var C=y=u.createElement("link");Mt(C),on(C,"link",n),C._p=new Promise(function(B,X){C.onload=B,C.onerror=X}),C.addEventListener("load",function(){A.loading|=1}),C.addEventListener("error",function(){A.loading|=2}),A.loading|=4,If(y,s,u)}y={type:"stylesheet",instance:y,count:1,state:A},f.set(m,y)}}}function D1(n,s){vr.X(n,s);var o=Qo;if(o&&n){var u=xi(o).hoistableScripts,f=Xo(n),m=u.get(f);m||(m=o.querySelector(Yu(f)),m||(n=E({src:n,async:!0},s),(s=ri.get(f))&&Xp(n,s),m=o.createElement("script"),Mt(m),on(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function V1(n,s){vr.M(n,s);var o=Qo;if(o&&n){var u=xi(o).hoistableScripts,f=Xo(n),m=u.get(f);m||(m=o.querySelector(Yu(f)),m||(n=E({src:n,async:!0,type:"module"},s),(s=ri.get(f))&&Xp(n,s),m=o.createElement("script"),Mt(m),on(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function ME(n,s,o,u){var f=(f=ve.current)?Sf(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Yo(o.href),o=xi(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Yo(o.href);var m=xi(f).hoistableStyles,y=m.get(n);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,y),(m=f.querySelector(Qu(n)))&&!m._p&&(y.instance=m,y.state.loading=5),ri.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ri.set(n,o),m||N1(f,n,o,y.state))),s&&u===null)throw Error(i(528,""));return y}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xo(o),o=xi(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Yo(n){return'href="'+yn(n)+'"'}function Qu(n){return'link[rel="stylesheet"]['+n+"]"}function kE(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function N1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),on(s,"link",o),Mt(s),n.head.appendChild(s))}function Xo(n){return'[src="'+yn(n)+'"]'}function Yu(n){return"script[async]"+n}function LE(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+yn(o.href)+'"]');if(u)return s.instance=u,Mt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Mt(u),on(u,"style",f),If(u,o.precedence,n),s.instance=u;case"stylesheet":f=Yo(o.href);var m=n.querySelector(Qu(f));if(m)return s.state.loading|=4,s.instance=m,Mt(m),m;u=kE(o),(f=ri.get(f))&&Yp(u,f),m=(n.ownerDocument||n).createElement("link"),Mt(m);var y=m;return y._p=new Promise(function(A,C){y.onload=A,y.onerror=C}),on(m,"link",u),s.state.loading|=4,If(m,o.precedence,n),s.instance=m;case"script":return m=Xo(o.src),(f=n.querySelector(Yu(m)))?(s.instance=f,Mt(f),f):(u=o,(f=ri.get(m))&&(u=E({},o),Xp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Mt(f),on(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,If(u,o.precedence,n));return s.instance}function If(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,y=0;y<u.length;y++){var A=u[y];if(A.dataset.precedence===s)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Yp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Xp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var bf=null;function UE(n,s,o){if(bf===null){var u=new Map,f=bf=new Map;f.set(o,u)}else f=bf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Vi]||m[Pt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var y=m.getAttribute(s)||"";y=n+y;var A=u.get(y);A?A.push(m):u.set(y,[m])}}return u}function zE(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function x1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function BE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function O1(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Yo(u.href),m=s.querySelector(Qu(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=wf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,Mt(m);return}m=s.ownerDocument||s,u=kE(u),(f=ri.get(f))&&Yp(u,f),m=m.createElement("link"),Mt(m);var y=m;y._p=new Promise(function(A,C){y.onload=A,y.onerror=C}),on(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=wf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var $p=0;function P1(n,s){return n.stylesheets&&n.count===0&&Cf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Cf(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&$p===0&&($p=62500*m1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Cf(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>$p?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function wf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Rf=null;function Cf(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Rf=new Map,s.forEach(M1,n),Rf=null,wf.call(n))}function M1(n,s){if(!(s.state.loading&4)){var o=Rf.get(n);if(o)var u=o.get(null);else{o=new Map,Rf.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var y=f[m];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(o.set(y.dataset.precedence,y),u=y)}u&&o.set(null,u)}f=s.instance,y=f.getAttribute("data-precedence"),m=o.get(y)||u,m===u&&o.set(null,f),o.set(y,f),this.count++,u=wf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Xu={$$typeof:ue,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function k1(n,s,o,u,f,m,y,A,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function qE(n,s,o,u,f,m,y,A,C,B,X,Z){return n=new k1(n,s,o,y,C,B,X,Z,A),s=1,m===!0&&(s|=24),m=Pn(3,null,null,s),n.current=m,m.stateNode=n,s=Dm(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Om(m),n}function FE(n){return n?(n=wo,n):wo}function jE(n,s,o,u,f,m){f=FE(f),u.context===null?u.context=f:u.pendingContext=f,u=Wr(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Zr(n,u,s),o!==null&&(In(o,n,s),Ru(o,n,s))}function HE(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Jp(n,s){HE(n,s),(n=n.alternate)&&HE(n,s)}function GE(n){if(n.tag===13||n.tag===31){var s=da(n,67108864);s!==null&&In(s,n,67108864),Jp(n,67108864)}}function KE(n){if(n.tag===13||n.tag===31){var s=zn();s=ta(s);var o=da(n,s);o!==null&&In(o,n,s),Jp(n,s)}}var Df=!0;function L1(n,s,o,u){var f=Q.T;Q.T=null;var m=G.p;try{G.p=2,Wp(n,s,o,u)}finally{G.p=m,Q.T=f}}function U1(n,s,o,u){var f=Q.T;Q.T=null;var m=G.p;try{G.p=8,Wp(n,s,o,u)}finally{G.p=m,Q.T=f}}function Wp(n,s,o,u){if(Df){var f=Zp(u);if(f===null)Up(n,s,u,Vf,o),YE(n,u);else if(B1(f,n,s,o,u))u.stopPropagation();else if(YE(n,u),s&4&&-1<z1.indexOf(n)){for(;f!==null;){var m=Qn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var y=wi(m.pendingLanes);if(y!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;y;){var C=1<<31-wt(y);A.entanglements[1]|=C,y&=~C}Gi(m),(Ye&6)===0&&(ff=mn()+500,ju(0))}}break;case 31:case 13:A=da(m,2),A!==null&&In(A,m,2),mf(),Jp(m,2)}if(m=Zp(u),m===null&&Up(n,s,u,Vf,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Up(n,s,u,null,o)}}function Zp(n){return n=Yn(n),eg(n)}var Vf=null;function eg(n){if(Vf=null,n=Ni(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=d(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Vf=n,null}function QE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Js()){case Wl:return 2;case Zl:return 8;case Lr:case am:return 32;case oh:return 268435456;default:return 32}default:return 32}}var tg=!1,cs=null,hs=null,fs=null,$u=new Map,Ju=new Map,ds=[],z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function YE(n,s){switch(n){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":$u.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(s.pointerId)}}function Wu(n,s,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Qn(s),s!==null&&GE(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function B1(n,s,o,u,f){switch(s){case"focusin":return cs=Wu(cs,n,s,o,u,f),!0;case"dragenter":return hs=Wu(hs,n,s,o,u,f),!0;case"mouseover":return fs=Wu(fs,n,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return $u.set(m,Wu($u.get(m)||null,n,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Ju.set(m,Wu(Ju.get(m)||null,n,s,o,u,f)),!0}return!1}function XE(n){var s=Ni(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,li(n.priority,function(){KE(o)});return}}else if(s===31){if(s=d(o),s!==null){n.blockedOn=s,li(n.priority,function(){KE(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Nf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Zp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);hu=u,o.target.dispatchEvent(u),hu=null}else return s=Qn(o),s!==null&&GE(s),n.blockedOn=o,!1;s.shift()}return!0}function $E(n,s,o){Nf(n)&&o.delete(s)}function q1(){tg=!1,cs!==null&&Nf(cs)&&(cs=null),hs!==null&&Nf(hs)&&(hs=null),fs!==null&&Nf(fs)&&(fs=null),$u.forEach($E),Ju.forEach($E)}function xf(n,s){n.blockedOn===s&&(n.blockedOn=null,tg||(tg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,q1)))}var Of=null;function JE(n){Of!==n&&(Of=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Of===n&&(Of=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(eg(u||o)===null)continue;break}var m=Qn(o);m!==null&&(n.splice(s,3),s-=3,Zm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function $o(n){function s(C){return xf(C,n)}cs!==null&&xf(cs,n),hs!==null&&xf(hs,n),fs!==null&&xf(fs,n),$u.forEach(s),Ju.forEach(s);for(var o=0;o<ds.length;o++){var u=ds[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ds.length&&(o=ds[0],o.blockedOn===null);)XE(o),o.blockedOn===null&&ds.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],y=f[Yt]||null;if(typeof m=="function")y||JE(o);else if(y){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,y=m[Yt]||null)A=y.formAction;else if(eg(f)!==null)continue}else A=y.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),JE(o)}}}function WE(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(y){return f=y})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function ng(n){this._internalRoot=n}Pf.prototype.render=ng.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=zn();jE(o,u,n,s,null,null)},Pf.prototype.unmount=ng.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;jE(n.current,2,null,n,null,null),mf(),s[Di]=null}};function Pf(n){this._internalRoot=n}Pf.prototype.unstable_scheduleHydration=function(n){if(n){var s=dh();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ds.length&&s!==0&&s<ds[o].priority;o++);ds.splice(o,0,n),o===0&&XE(n)}};var ZE=e.version;if(ZE!=="19.2.4")throw Error(i(527,ZE,"19.2.4"));G.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var F1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{ai=Mf.inject(F1),tn=Mf}catch{}}return ec.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=aT,m=oT,y=lT;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=qE(n,1,!1,null,null,o,u,null,f,m,y,WE),n[Di]=s.current,Lp(n),new ng(s)},ec.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=aT,y=oT,A=lT,C=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(C=o.formState)),s=qE(n,1,!0,s,o??null,u,f,C,m,y,A,WE),s.context=FE(null),o=s.current,u=zn(),u=ta(u),f=Wr(u),f.callback=null,Zr(o,f,u),o=u,s.current.lanes=o,Zs(s,o),Gi(s),n[Di]=s.current,Lp(n),new Pf(s)},ec.version="19.2.4",ec}var uA;function tC(){if(uA)return sg.exports;uA=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sg.exports=eC(),sg.exports}var nC=tC();const iC="modulepreload",rC=function(r){return"/kids-tracker/"+r},cA={},jn=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=p(t.map(g=>{if(g=rC(g),g in cA)return;cA[g]=!0;const v=g.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${E}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":iC,v||(S.as="script"),S.crossOrigin="",S.href=g,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((O,K)=>{S.addEventListener("load",O),S.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},sC=()=>{};var hA={};const dI=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},aC=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],d=r[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},mI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,d=c?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,O=g&63;p||(O=64,c||(S=64)),i.push(t[v],t[E],t[S],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(dI(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):aC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],d=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const E=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new oC;const S=l<<2|d>>4;if(i.push(S),g!==64){const O=d<<4&240|g>>2;if(i.push(O),E!==64){const K=g<<6&192|E;i.push(K)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class oC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lC=function(r){const e=dI(r);return mI.encodeByteArray(e,!0)},ad=function(r){return lC(r).replace(/\./g,"")},pI=function(r){try{return mI.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const uC=()=>gI().__FIREBASE_DEFAULTS__,cC=()=>{if(typeof process>"u"||typeof hA>"u")return;const r=hA.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},hC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&pI(r[1]);return e&&JSON.parse(e)},Vd=()=>{try{return sC()||uC()||cC()||hC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_I=r=>Vd()?.emulatorHosts?.[r],fC=r=>{const e=_I(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},yI=()=>Vd()?.config,vI=r=>Vd()?.[`_${r}`];class dC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Za(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function d_(r){return(await fetch(r,{credentials:"include"})).ok}function mC(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ad(JSON.stringify(t)),ad(JSON.stringify(c)),""].join(".")}const dc={};function pC(){const r={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?r.emulator.push(e):r.prod.push(e);return r}function gC(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let fA=!1;function TI(r,e){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||dc[r]===e||dc[r]||fA)return;dc[r]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=pC().prod.length>0;function c(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,O){S.setAttribute("width","24"),S.setAttribute("id",O),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{fA=!0,c()},S}function v(S,O){S.setAttribute("id",O),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=gC(i),O=t("text"),K=document.getElementById(O)||document.createElement("span"),Y=t("learnmore"),ee=document.getElementById(Y)||document.createElement("a"),se=t("preprendIcon"),le=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ue=S.element;d(ue),v(ee,Y);const Se=g();p(le,se),ue.append(le,K,ee,Se),document.body.appendChild(ue)}l?(K.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _C(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function EI(){const r=Vd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vC(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function TC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EC(){const r=Gt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function AI(){return!EI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SI(){return!EI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function II(){try{return typeof indexedDB=="object"}catch{return!1}}function AC(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const SC="FirebaseError";class Nr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=SC,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?IC(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Nr(a,d,i)}}function IC(r,e){return r.replace(bC,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const bC=/\{\$([^}]+)}/g;function wC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Si(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(dA(l)&&dA(c)){if(!Si(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function dA(r){return r!==null&&typeof r=="object"}function Bc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function oc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function lc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function RC(r,e){const t=new CC(r,e);return t.subscribe.bind(t)}class CC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");DC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=ug),a.error===void 0&&(a.error=ug),a.complete===void 0&&(a.complete=ug);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DC(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function ug(){}function at(r){return r&&r._delegate?r._delegate:r}class qa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ra="[DEFAULT]";class VC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new dC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xC(e))try{this.getOrInitializeService({instanceIdentifier:Ra})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ra){return this.instances.has(e)}getOptions(e=Ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:NC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ra){return this.component?this.component.multipleInstances?e:Ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NC(r){return r===Ra?void 0:r}function xC(r){return r.instantiationMode==="EAGER"}class OC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const PC={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},MC=qe.INFO,kC={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},LC=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=kC[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m_{constructor(e){this.name=e,this._logLevel=MC,this._logHandler=LC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const UC=(r,e)=>e.some(t=>r instanceof t);let mA,pA;function zC(){return mA||(mA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BC(){return pA||(pA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bI=new WeakMap,bg=new WeakMap,wI=new WeakMap,cg=new WeakMap,p_=new WeakMap;function qC(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(ws(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&bI.set(t,r)}).catch(()=>{}),p_.set(e,r),e}function FC(r){if(bg.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});bg.set(r,e)}let wg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return bg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||wI.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function jC(r){wg=r(wg)}function HC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(hg(this),e,...t);return wI.set(i,e.sort?e.sort():[e]),ws(i)}:BC().includes(r)?function(...e){return r.apply(hg(this),e),ws(bI.get(this))}:function(...e){return ws(r.apply(hg(this),e))}}function GC(r){return typeof r=="function"?HC(r):(r instanceof IDBTransaction&&FC(r),UC(r,zC())?new Proxy(r,wg):r)}function ws(r){if(r instanceof IDBRequest)return qC(r);if(cg.has(r))return cg.get(r);const e=GC(r);return e!==r&&(cg.set(r,e),p_.set(e,r)),e}const hg=r=>p_.get(r);function KC(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),d=ws(c);return i&&c.addEventListener("upgradeneeded",p=>{i(ws(c.result),p.oldVersion,p.newVersion,ws(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const QC=["get","getKey","getAll","getAllKeys","count"],YC=["put","add","delete","clear"],fg=new Map;function gA(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(fg.get(e))return fg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=YC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||QC.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return fg.set(e,l),l}jC(r=>({...r,get:(e,t,i)=>gA(e,t)||r.get(e,t,i),has:(e,t)=>!!gA(e,t)||r.has(e,t)}));class XC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($C(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function $C(r){return r.getComponent()?.type==="VERSION"}const Rg="@firebase/app",_A="0.14.7";const wr=new m_("@firebase/app"),JC="@firebase/app-compat",WC="@firebase/analytics-compat",ZC="@firebase/analytics",eD="@firebase/app-check-compat",tD="@firebase/app-check",nD="@firebase/auth",iD="@firebase/auth-compat",rD="@firebase/database",sD="@firebase/data-connect",aD="@firebase/database-compat",oD="@firebase/functions",lD="@firebase/functions-compat",uD="@firebase/installations",cD="@firebase/installations-compat",hD="@firebase/messaging",fD="@firebase/messaging-compat",dD="@firebase/performance",mD="@firebase/performance-compat",pD="@firebase/remote-config",gD="@firebase/remote-config-compat",_D="@firebase/storage",yD="@firebase/storage-compat",vD="@firebase/firestore",TD="@firebase/ai",ED="@firebase/firestore-compat",AD="firebase",SD="12.8.0";const od="[DEFAULT]",ID={[Rg]:"fire-core",[JC]:"fire-core-compat",[ZC]:"fire-analytics",[WC]:"fire-analytics-compat",[tD]:"fire-app-check",[eD]:"fire-app-check-compat",[nD]:"fire-auth",[iD]:"fire-auth-compat",[rD]:"fire-rtdb",[sD]:"fire-data-connect",[aD]:"fire-rtdb-compat",[oD]:"fire-fn",[lD]:"fire-fn-compat",[uD]:"fire-iid",[cD]:"fire-iid-compat",[hD]:"fire-fcm",[fD]:"fire-fcm-compat",[dD]:"fire-perf",[mD]:"fire-perf-compat",[pD]:"fire-rc",[gD]:"fire-rc-compat",[_D]:"fire-gcs",[yD]:"fire-gcs-compat",[vD]:"fire-fst",[ED]:"fire-fst-compat",[TD]:"fire-vertex","fire-js":"fire-js",[AD]:"fire-js-all"};const ld=new Map,bD=new Map,Cg=new Map;function yA(r,e){try{r.container.addComponent(e)}catch(t){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function dl(r){const e=r.name;if(Cg.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,r);for(const t of ld.values())yA(t,r);for(const t of bD.values())yA(t,r);return!0}function qc(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function wD(r,e,t=od){qc(r,e).clearInstance(t)}function qn(r){return r==null?!1:r.settings!==void 0}const RD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new zc("app","Firebase",RD);class CD{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}const Ml=SD;function RI(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:od,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Rs.create("bad-app-name",{appName:String(a)});if(t||(t=yI()),!t)throw Rs.create("no-options");const l=ld.get(a);if(l){if(Si(t,l.options)&&Si(i,l.config))return l;throw Rs.create("duplicate-app",{appName:a})}const c=new OC(a);for(const p of Cg.values())c.addComponent(p);const d=new CD(t,i,c);return ld.set(a,d),d}function CI(r=od){const e=ld.get(r);if(!e&&r===od&&yI())return RI();if(!e)throw Rs.create("no-app",{appName:r});return e}function Cs(r,e,t){let i=ID[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(c.join(" "));return}dl(new qa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const DD="firebase-heartbeat-database",VD=1,Ic="firebase-heartbeat-store";let dg=null;function DI(){return dg||(dg=KC(DD,VD,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ic)}catch(t){console.warn(t)}}}}).catch(r=>{throw Rs.create("idb-open",{originalErrorMessage:r.message})})),dg}async function ND(r){try{const t=(await DI()).transaction(Ic),i=await t.objectStore(Ic).get(VI(r));return await t.done,i}catch(e){if(e instanceof Nr)wr.warn(e.message);else{const t=Rs.create("idb-get",{originalErrorMessage:e?.message});wr.warn(t.message)}}}async function vA(r,e){try{const i=(await DI()).transaction(Ic,"readwrite");await i.objectStore(Ic).put(e,VI(r)),await i.done}catch(t){if(t instanceof Nr)wr.warn(t.message);else{const i=Rs.create("idb-set",{originalErrorMessage:t?.message});wr.warn(i.message)}}}function VI(r){return`${r.name}!${r.options.appId}`}const xD=1024,OD=30;class PD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kD(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=TA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>OD){const a=LD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=TA(),{heartbeatsToSend:t,unsentEntries:i}=MD(this._heartbeatsCache.heartbeats),a=ad(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return wr.warn(e),""}}}function TA(){return new Date().toISOString().substring(0,10)}function MD(r,e=xD){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),EA(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),EA(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class kD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return II()?AC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ND(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function EA(r){return ad(JSON.stringify({version:2,heartbeats:r})).length}function LD(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function UD(r){dl(new qa("platform-logger",e=>new XC(e),"PRIVATE")),dl(new qa("heartbeat",e=>new PD(e),"PRIVATE")),Cs(Rg,_A,r),Cs(Rg,_A,"esm2020"),Cs("fire-js","")}UD("");var zD="firebase",BD="12.8.0";Cs(zD,BD,"app");function NI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qD=NI,xI=new zc("auth","Firebase",NI());const ud=new m_("@firebase/auth");function FD(r,...e){ud.logLevel<=qe.WARN&&ud.warn(`Auth (${Ml}): ${r}`,...e)}function Kf(r,...e){ud.logLevel<=qe.ERROR&&ud.error(`Auth (${Ml}): ${r}`,...e)}function si(r,...e){throw __(r,...e)}function Ti(r,...e){return __(r,...e)}function g_(r,e,t){const i={...qD(),[e]:t};return new zc("auth","Firebase",i).create(e,{appName:r.name})}function br(r){return g_(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jD(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&si(r,"argument-error"),g_(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function __(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return xI.create(r,...e)}function Ie(r,e,...t){if(!r)throw __(e,...t)}function Er(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Kf(e),new Error(e)}function Rr(r,e){r||Er(e)}function Dg(){return typeof self<"u"&&self.location?.href||""}function HD(){return AA()==="http:"||AA()==="https:"}function AA(){return typeof self<"u"&&self.location?.protocol||null}function GD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HD()||vC()||"connection"in navigator)?navigator.onLine:!0}function KD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rr(t>e,"Short delay should be less than long delay!"),this.isMobile=_C()||TC()}get(){return GD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function y_(r,e){Rr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class OI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const QD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const YD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XD=new Fc(3e4,6e4);function zs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Bs(r,e,t,i,a={}){return PI(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Bc({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return yC()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Za(r.emulatorConfig.host)&&(g.credentials="include"),OI.fetch()(await MI(r,r.config.apiHost,t,d),g)})}async function PI(r,e,t){r._canInitEmulator=!1;const i={...QD,...e};try{const a=new JD(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw kf(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw kf(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw kf(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw kf(r,"user-disabled",c);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw g_(r,v,g);si(r,v)}}catch(a){if(a instanceof Nr)throw a;si(r,"network-request-failed",{message:String(a)})}}async function jc(r,e,t,i,a={}){const l=await Bs(r,e,t,i,a);return"mfaPendingCredential"in l&&si(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function MI(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?y_(r.config,a):`${r.config.apiScheme}://${a}`;return YD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function $D(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ti(this.auth,"network-request-failed")),XD.get())})}}function kf(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ti(r,e,i);return a.customData._tokenResponse=t,a}function SA(r){return r!==void 0&&r.enterprise!==void 0}class WD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $D(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZD(r,e){return Bs(r,"GET","/v2/recaptchaConfig",zs(r,e))}async function eV(r,e){return Bs(r,"POST","/v1/accounts:delete",e)}async function cd(r,e){return Bs(r,"POST","/v1/accounts:lookup",e)}function mc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tV(r,e=!1){const t=at(r),i=await t.getIdToken(e),a=v_(i);Ie(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:mc(mg(a.auth_time)),issuedAtTime:mc(mg(a.iat)),expirationTime:mc(mg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function mg(r){return Number(r)*1e3}function v_(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Kf("JWT malformed, contained fewer than 3 sections"),null;try{const a=pI(t);return a?JSON.parse(a):(Kf("Failed to decode base64 JWT payload"),null)}catch(a){return Kf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function IA(r){const e=v_(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function bc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Nr&&nV(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function nV({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class iV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Vg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hd(r){const e=r.auth,t=await r.getIdToken(),i=await bc(r,cd(e,{idToken:t}));Ie(i?.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?kI(a.providerUserInfo):[],c=sV(r.providerData,l),d=r.isAnonymous,p=!(r.email&&a.passwordHash)&&!c?.length,g=d?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Vg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,v)}async function rV(r){const e=at(r);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sV(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function kI(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function aV(r,e){const t=await PI(r,{},async()=>{const i=Bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await MI(r,a,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return r.emulatorConfig&&Za(r.emulatorConfig.host)&&(p.credentials="include"),OI.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function oV(r,e){return Bs(r,"POST","/v2/accounts:revokeToken",zs(r,e))}class ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=IA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await aV(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new ol;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ie(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ie(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ol,this.toJSON())}_performRefresh(){return Er("not implemented")}}function ps(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new iV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Vg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await bc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tV(this,e)}reload(){return rV(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await hd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await bc(this,eV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:O,providerData:K,stsTokenManager:Y}=t;Ie(E&&Y,e,"internal-error");const ee=ol.fromJSON(this.name,Y);Ie(typeof E=="string",e,"internal-error"),ps(i,e.name),ps(a,e.name),Ie(typeof S=="boolean",e,"internal-error"),Ie(typeof O=="boolean",e,"internal-error"),ps(l,e.name),ps(c,e.name),ps(d,e.name),ps(p,e.name),ps(g,e.name),ps(v,e.name);const se=new vi({uid:E,auth:e,email:a,emailVerified:S,displayName:i,isAnonymous:O,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:ee,createdAt:g,lastLoginAt:v});return K&&Array.isArray(K)&&(se.providerData=K.map(le=>({...le}))),p&&(se._redirectEventId=p),se}static async _fromIdTokenResponse(e,t,i=!1){const a=new ol;a.updateFromServerResponse(t);const l=new vi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await hd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ie(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?kI(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new ol;d.updateFromIdToken(i);const p=new vi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Vg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const bA=new Map;function Ar(r){Rr(r instanceof Function,"Expected a class definition");let e=bA.get(r);return e?(Rr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,bA.set(r,e),e)}class LI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LI.type="NONE";const wA=LI;function Qf(r,e,t){return`firebase:${r}:${e}:${t}`}class ll{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Qf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Qf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cd(this.auth,{idToken:e}).catch(()=>{});return t?vi._fromGetAccountInfoResponse(this.auth,t,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ll(Ar(wA),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Ar(wA);const c=Qf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const S=await cd(e,{idToken:v}).catch(()=>{});if(!S)break;E=await vi._fromGetAccountInfoResponse(e,S,v)}else E=vi._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ll(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new ll(l,e,i))}}function RA(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jI(e))return"Blackberry";if(HI(e))return"Webos";if(zI(e))return"Safari";if((e.includes("chrome/")||BI(e))&&!e.includes("edge/"))return"Chrome";if(FI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function UI(r=Gt()){return/firefox\//i.test(r)}function zI(r=Gt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BI(r=Gt()){return/crios\//i.test(r)}function qI(r=Gt()){return/iemobile/i.test(r)}function FI(r=Gt()){return/android/i.test(r)}function jI(r=Gt()){return/blackberry/i.test(r)}function HI(r=Gt()){return/webos/i.test(r)}function T_(r=Gt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function lV(r=Gt()){return T_(r)&&!!window.navigator?.standalone}function uV(){return EC()&&document.documentMode===10}function GI(r=Gt()){return T_(r)||FI(r)||HI(r)||jI(r)||/windows phone/i.test(r)||qI(r)}function KI(r,e=[]){let t;switch(r){case"Browser":t=RA(Gt());break;case"Worker":t=`${RA(Gt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ml}/${i}`}class cV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function hV(r,e={}){return Bs(r,"GET","/v2/passwordPolicy",zs(r,e))}const fV=6;class dV{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??fV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class mV{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CA(this),this.idTokenSubscription=new CA(this),this.beforeStateQueue=new cV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ll.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cd(this,{idToken:e}),i=await vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(br(this));const t=e?at(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hV(this),t=new dV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await oV(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await ll.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&FD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qs(r){return at(r)}class CA{constructor(e){this.auth=e,this.observer=null,this.addObserver=RC(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pV(r){Nd=r}function QI(r){return Nd.loadJS(r)}function gV(){return Nd.recaptchaEnterpriseScript}function _V(){return Nd.gapiScript}function yV(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class vV{constructor(){this.enterprise=new TV}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class TV{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const EV="recaptcha-enterprise",YI="NO_RECAPTCHA";class AV{constructor(e){this.type=EV,this.auth=qs(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{ZD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new WD(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;SA(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(YI)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vV().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&SA(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=gV();p.length!==0&&(p+=d),QI(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function DA(r,e,t,i=!1,a=!1){const l=new AV(r);let c;if(a)c=YI;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Ng(r,e,t,i,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await DA(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await DA(r,e,t,t==="getOobCode");return i(r,c)}else return Promise.reject(l)})}function SV(r,e){const t=qc(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Si(l,e??{}))return a;si(a,"already-initialized")}return t.initialize({options:e})}function IV(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ar);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function bV(r,e,t){const i=qs(r);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=XI(e),{host:c,port:d}=wV(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Si(g,i.config.emulator)&&Si(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Za(c)?(d_(`${l}//${c}${p}`),TI("Auth",!0)):RV()}function XI(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function wV(r){const e=XI(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:VA(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:VA(c)}}}function VA(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function RV(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class E_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Er("not implemented")}_getIdTokenResponse(e){return Er("not implemented")}_linkToIdToken(e,t){return Er("not implemented")}_getReauthenticationResolver(e){return Er("not implemented")}}async function CV(r,e){return Bs(r,"POST","/v1/accounts:signUp",e)}async function DV(r,e){return jc(r,"POST","/v1/accounts:signInWithPassword",zs(r,e))}async function VV(r,e){return jc(r,"POST","/v1/accounts:signInWithEmailLink",zs(r,e))}async function NV(r,e){return jc(r,"POST","/v1/accounts:signInWithEmailLink",zs(r,e))}class wc extends E_{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new wc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new wc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ng(e,t,"signInWithPassword",DV);case"emailLink":return VV(e,{email:this._email,oobCode:this._password});default:si(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ng(e,i,"signUpPassword",CV);case"emailLink":return NV(e,{idToken:t,email:this._email,oobCode:this._password});default:si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ul(r,e){return jc(r,"POST","/v1/accounts:signInWithIdp",zs(r,e))}const xV="http://localhost";class Fa extends E_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):si("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Fa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ul(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:xV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bc(t)}return e}}function OV(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PV(r){const e=oc(lc(r)).link,t=e?oc(lc(e)).deep_link_id:null,i=oc(lc(r)).deep_link_id;return(i?oc(lc(i)).link:null)||i||t||e||r}class A_{constructor(e){const t=oc(lc(e)),i=t.apiKey??null,a=t.oobCode??null,l=OV(t.mode??null);Ie(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=PV(e);try{return new A_(t)}catch{return null}}}class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,t){return wc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=A_.parseLink(t);return Ie(i,"argument-error"),wc._fromEmailAndCode(e,i.code,i.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class S_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hc extends S_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vs extends Hc{constructor(){super("facebook.com")}static credential(e){return Fa._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";class Tr extends Hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fa._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Tr.credential(t,i)}catch{return null}}}Tr.GOOGLE_SIGN_IN_METHOD="google.com";Tr.PROVIDER_ID="google.com";class Ts extends Hc{constructor(){super("github.com")}static credential(e){return Fa._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";class Es extends Hc{constructor(){super("twitter.com")}static credential(e,t){return Fa._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Es.credential(t,i)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";async function MV(r,e){return jc(r,"POST","/v1/accounts:signUp",zs(r,e))}class ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await vi._fromIdTokenResponse(e,i,a),c=NA(i);return new ja({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=NA(i);return new ja({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function NA(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class fd extends Nr{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,fd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new fd(e,t,i,a)}}function $I(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?fd._fromErrorAndOperation(r,l,e,i):l})}async function kV(r,e,t=!1){const i=await bc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ja._forOperation(r,"link",i)}async function LV(r,e,t=!1){const{auth:i}=r;if(qn(i.app))return Promise.reject(br(i));const a="reauthenticate";try{const l=await bc(r,$I(i,a,e,r),t);Ie(l.idToken,i,"internal-error");const c=v_(l.idToken);Ie(c,i,"internal-error");const{sub:d}=c;return Ie(r.uid===d,i,"user-mismatch"),ja._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&si(i,"user-mismatch"),l}}async function JI(r,e,t=!1){if(qn(r.app))return Promise.reject(br(r));const i="signIn",a=await $I(r,i,e),l=await ja._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function UV(r,e){return JI(qs(r),e)}async function WI(r){const e=qs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _k(r,e,t){if(qn(r.app))return Promise.reject(br(r));const i=qs(r),c=await Ng(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MV).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&WI(r),p}),d=await ja._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function yk(r,e,t){return qn(r.app)?Promise.reject(br(r)):UV(at(r),kl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&WI(r),i})}function zV(r,e,t,i){return at(r).onIdTokenChanged(e,t,i)}function BV(r,e,t){return at(r).beforeAuthStateChanged(e,t)}function qV(r,e,t,i){return at(r).onAuthStateChanged(e,t,i)}function FV(r){return at(r).signOut()}const dd="__sak";class ZI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dd,"1"),this.storage.removeItem(dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const jV=1e3,HV=10;class eb extends ZI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);uV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,HV):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},jV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eb.type="LOCAL";const GV=eb;class tb extends ZI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tb.type="SESSION";const nb=tb;function KV(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new xd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await KV(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xd.receivers=[];function I_(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class QV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=I_("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ji(){return window}function YV(r){Ji().location.href=r}function ib(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function XV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $V(){return navigator?.serviceWorker?.controller||null}function JV(){return ib()?self:null}const rb="firebaseLocalStorageDb",WV=1,md="firebaseLocalStorage",sb="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Od(r,e){return r.transaction([md],e?"readwrite":"readonly").objectStore(md)}function ZV(){const r=indexedDB.deleteDatabase(rb);return new Gc(r).toPromise()}function xg(){const r=indexedDB.open(rb,WV);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(md,{keyPath:sb})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(md)?e(i):(i.close(),await ZV(),e(await xg()))})})}async function xA(r,e,t){const i=Od(r,!0).put({[sb]:e,value:t});return new Gc(i).toPromise()}async function eN(r,e){const t=Od(r,!1).get(e),i=await new Gc(t).toPromise();return i===void 0?null:i.value}function OA(r,e){const t=Od(r,!0).delete(e);return new Gc(t).toPromise()}const tN=800,nN=3;class ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>nN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(JV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await XV(),!this.activeServiceWorker)return;this.sender=new QV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$V()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xg();return await xA(e,dd,"1"),await OA(e,dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>xA(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>eN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>OA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Od(a,!1).getAll();return new Gc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ab.type="LOCAL";const iN=ab;new Fc(3e4,6e4);function ob(r,e){return e?Ar(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class b_ extends E_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rN(r){return JI(r.auth,new b_(r),r.bypassAuthState)}function sN(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),LV(t,new b_(r),r.bypassAuthState)}async function aN(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),kV(t,new b_(r),r.bypassAuthState)}class lb{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rN;case"linkViaPopup":case"linkViaRedirect":return aN;case"reauthViaPopup":case"reauthViaRedirect":return sN;default:si(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oN=new Fc(2e3,1e4);async function vk(r,e,t){if(qn(r.app))return Promise.reject(Ti(r,"operation-not-supported-in-this-environment"));const i=qs(r);jD(r,e,S_);const a=ob(i,t);return new Pa(i,"signInViaPopup",e,a).executeNotNull()}class Pa extends lb{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const e=I_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oN.get())};e()}}Pa.currentPopupAction=null;const lN="pendingRedirect",Yf=new Map;class uN extends lb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Yf.get(this.auth._key());if(!e){try{const i=await cN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Yf.set(this.auth._key(),e)}return this.bypassAuthState||Yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cN(r,e){const t=dN(e),i=fN(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function hN(r,e){Yf.set(r._key(),e)}function fN(r){return Ar(r._redirectPersistence)}function dN(r){return Qf(lN,r.config.apiKey,r.name)}async function mN(r,e,t=!1){if(qn(r.app))return Promise.reject(br(r));const i=qs(r),a=ob(i,e),c=await new uN(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const pN=600*1e3;class gN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_N(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ub(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pN&&this.cachedEventUids.clear(),this.cachedEventUids.has(PA(e))}saveEventToCache(e){this.cachedEventUids.add(PA(e)),this.lastProcessedEventTime=Date.now()}}function PA(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ub({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function _N(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ub(r);default:return!1}}async function yN(r,e={}){return Bs(r,"GET","/v1/projects",e)}const vN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TN=/^https?/;async function EN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await yN(r);for(const t of e)try{if(AN(t))return}catch{}si(r,"unauthorized-domain")}function AN(r){const e=Dg(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!TN.test(t))return!1;if(vN.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const SN=new Fc(3e4,6e4);function MA(){const r=Ji().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function IN(r){return new Promise((e,t)=>{function i(){MA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MA(),t(Ti(r,"network-request-failed"))},timeout:SN.get()})}if(Ji().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ji().gapi?.load)i();else{const a=yV("iframefcb");return Ji()[a]=()=>{gapi.load?i():t(Ti(r,"network-request-failed"))},QI(`${_V()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Xf=null,e})}let Xf=null;function bN(r){return Xf=Xf||IN(r),Xf}const wN=new Fc(5e3,15e3),RN="__/auth/iframe",CN="emulator/auth/iframe",DN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NN(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?y_(e,CN):`https://${r.config.authDomain}/${RN}`,i={apiKey:e.apiKey,appName:r.name,v:Ml},a=VN.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Bc(i).slice(1)}`}async function xN(r){const e=await bN(r),t=Ji().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:NN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DN,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ti(r,"network-request-failed"),d=Ji().setTimeout(()=>{l(c)},wN.get());function p(){Ji().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}const ON={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PN=500,MN=600,kN="_blank",LN="http://localhost";class kA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UN(r,e,t,i=PN,a=MN){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...ON,width:i.toString(),height:a.toString(),top:l,left:c},g=Gt().toLowerCase();t&&(d=BI(g)?kN:t),UI(g)&&(e=e||LN,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[O,K])=>`${S}${O}=${K},`,"");if(lV(g)&&d!=="_self")return zN(e||"",d),new kA(null);const E=window.open(e||"",d,v);Ie(E,r,"popup-blocked");try{E.focus()}catch{}return new kA(E)}function zN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const BN="__/auth/handler",qN="emulator/auth/handler",FN=encodeURIComponent("fac");async function LA(r,e,t,i,a,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Ml,eventId:a};if(e instanceof S_){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",wC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Hc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}r.tenantId&&(c.tid=r.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await r._getAppCheckToken(),g=p?`#${FN}=${encodeURIComponent(p)}`:"";return`${jN(r)}?${Bc(d).slice(1)}${g}`}function jN({config:r}){return r.emulator?y_(r,qN):`https://${r.authDomain}/${BN}`}const pg="webStorageSupport";class HN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nb,this._completeRedirectFn=mN,this._overrideRedirectResult=hN}async _openPopup(e,t,i,a){Rr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await LA(e,t,i,Dg(),a);return UN(e,l,I_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await LA(e,t,i,Dg(),a);return YV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Rr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await xN(e),i=new gN(e);return t.register("authEvent",a=>(Ie(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pg,{type:pg},a=>{const l=a?.[0]?.[pg];l!==void 0&&t(!!l),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=EN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GI()||zI()||T_()}}const GN=HN;var UA="@firebase/auth",zA="1.12.0";class KN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function QN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YN(r){dl(new qa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KI(r)},g=new mV(i,a,l,p);return IV(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),dl(new qa("auth-internal",e=>{const t=qs(e.getProvider("auth").getImmediate());return(i=>new KN(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(UA,zA,QN(r)),Cs(UA,zA,"esm2020")}const XN=300,$N=vI("authIdTokenMaxAge")||XN;let BA=null;const JN=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$N)return;const a=t?.token;BA!==a&&(BA=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function WN(r=CI()){const e=qc(r,"auth");if(e.isInitialized())return e.getImmediate();const t=SV(r,{popupRedirectResolver:GN,persistence:[iN,GV,nb]}),i=vI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=JN(l.toString());BV(t,c,()=>c(t.currentUser)),zV(t,d=>c(d))}}const a=_I("auth");return a&&bV(t,`http://${a}`),t}function ZN(){return document.getElementsByTagName("head")?.[0]??document}pV({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Ti("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",ZN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YN("Browser");const e2={apiKey:"AIzaSyD8M2Vb_gJcy3hrOIvKi5JJLUluBgw0E_k",authDomain:"kidstracker-ed3e9.firebaseapp.com",projectId:"kidstracker-ed3e9",storageBucket:"kidstracker-ed3e9.firebasestorage.app",messagingSenderId:"805669729661",appId:"1:805669729661:web:28b82522d564fbe2784814",measurementId:"G-J4J9CLTJFR"},Og=RI(e2),qA=WN(Og),t2=new Tr;t2.setCustomParameters({prompt:"select_account"});var FA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ds,cb;(function(){var r;function e(w,b){function D(){}D.prototype=b.prototype,w.F=b.prototype,w.prototype=new D,w.prototype.constructor=w,w.D=function(P,N,k){for(var R=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)R[ut-2]=arguments[ut];return b.prototype[N].apply(P,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,b,D){D||(D=0);const P=Array(16);if(typeof b=="string")for(var N=0;N<16;++N)P[N]=b.charCodeAt(D++)|b.charCodeAt(D++)<<8|b.charCodeAt(D++)<<16|b.charCodeAt(D++)<<24;else for(N=0;N<16;++N)P[N]=b[D++]|b[D++]<<8|b[D++]<<16|b[D++]<<24;b=w.g[0],D=w.g[1],N=w.g[2];let k=w.g[3],R;R=b+(k^D&(N^k))+P[0]+3614090360&4294967295,b=D+(R<<7&4294967295|R>>>25),R=k+(N^b&(D^N))+P[1]+3905402710&4294967295,k=b+(R<<12&4294967295|R>>>20),R=N+(D^k&(b^D))+P[2]+606105819&4294967295,N=k+(R<<17&4294967295|R>>>15),R=D+(b^N&(k^b))+P[3]+3250441966&4294967295,D=N+(R<<22&4294967295|R>>>10),R=b+(k^D&(N^k))+P[4]+4118548399&4294967295,b=D+(R<<7&4294967295|R>>>25),R=k+(N^b&(D^N))+P[5]+1200080426&4294967295,k=b+(R<<12&4294967295|R>>>20),R=N+(D^k&(b^D))+P[6]+2821735955&4294967295,N=k+(R<<17&4294967295|R>>>15),R=D+(b^N&(k^b))+P[7]+4249261313&4294967295,D=N+(R<<22&4294967295|R>>>10),R=b+(k^D&(N^k))+P[8]+1770035416&4294967295,b=D+(R<<7&4294967295|R>>>25),R=k+(N^b&(D^N))+P[9]+2336552879&4294967295,k=b+(R<<12&4294967295|R>>>20),R=N+(D^k&(b^D))+P[10]+4294925233&4294967295,N=k+(R<<17&4294967295|R>>>15),R=D+(b^N&(k^b))+P[11]+2304563134&4294967295,D=N+(R<<22&4294967295|R>>>10),R=b+(k^D&(N^k))+P[12]+1804603682&4294967295,b=D+(R<<7&4294967295|R>>>25),R=k+(N^b&(D^N))+P[13]+4254626195&4294967295,k=b+(R<<12&4294967295|R>>>20),R=N+(D^k&(b^D))+P[14]+2792965006&4294967295,N=k+(R<<17&4294967295|R>>>15),R=D+(b^N&(k^b))+P[15]+1236535329&4294967295,D=N+(R<<22&4294967295|R>>>10),R=b+(N^k&(D^N))+P[1]+4129170786&4294967295,b=D+(R<<5&4294967295|R>>>27),R=k+(D^N&(b^D))+P[6]+3225465664&4294967295,k=b+(R<<9&4294967295|R>>>23),R=N+(b^D&(k^b))+P[11]+643717713&4294967295,N=k+(R<<14&4294967295|R>>>18),R=D+(k^b&(N^k))+P[0]+3921069994&4294967295,D=N+(R<<20&4294967295|R>>>12),R=b+(N^k&(D^N))+P[5]+3593408605&4294967295,b=D+(R<<5&4294967295|R>>>27),R=k+(D^N&(b^D))+P[10]+38016083&4294967295,k=b+(R<<9&4294967295|R>>>23),R=N+(b^D&(k^b))+P[15]+3634488961&4294967295,N=k+(R<<14&4294967295|R>>>18),R=D+(k^b&(N^k))+P[4]+3889429448&4294967295,D=N+(R<<20&4294967295|R>>>12),R=b+(N^k&(D^N))+P[9]+568446438&4294967295,b=D+(R<<5&4294967295|R>>>27),R=k+(D^N&(b^D))+P[14]+3275163606&4294967295,k=b+(R<<9&4294967295|R>>>23),R=N+(b^D&(k^b))+P[3]+4107603335&4294967295,N=k+(R<<14&4294967295|R>>>18),R=D+(k^b&(N^k))+P[8]+1163531501&4294967295,D=N+(R<<20&4294967295|R>>>12),R=b+(N^k&(D^N))+P[13]+2850285829&4294967295,b=D+(R<<5&4294967295|R>>>27),R=k+(D^N&(b^D))+P[2]+4243563512&4294967295,k=b+(R<<9&4294967295|R>>>23),R=N+(b^D&(k^b))+P[7]+1735328473&4294967295,N=k+(R<<14&4294967295|R>>>18),R=D+(k^b&(N^k))+P[12]+2368359562&4294967295,D=N+(R<<20&4294967295|R>>>12),R=b+(D^N^k)+P[5]+4294588738&4294967295,b=D+(R<<4&4294967295|R>>>28),R=k+(b^D^N)+P[8]+2272392833&4294967295,k=b+(R<<11&4294967295|R>>>21),R=N+(k^b^D)+P[11]+1839030562&4294967295,N=k+(R<<16&4294967295|R>>>16),R=D+(N^k^b)+P[14]+4259657740&4294967295,D=N+(R<<23&4294967295|R>>>9),R=b+(D^N^k)+P[1]+2763975236&4294967295,b=D+(R<<4&4294967295|R>>>28),R=k+(b^D^N)+P[4]+1272893353&4294967295,k=b+(R<<11&4294967295|R>>>21),R=N+(k^b^D)+P[7]+4139469664&4294967295,N=k+(R<<16&4294967295|R>>>16),R=D+(N^k^b)+P[10]+3200236656&4294967295,D=N+(R<<23&4294967295|R>>>9),R=b+(D^N^k)+P[13]+681279174&4294967295,b=D+(R<<4&4294967295|R>>>28),R=k+(b^D^N)+P[0]+3936430074&4294967295,k=b+(R<<11&4294967295|R>>>21),R=N+(k^b^D)+P[3]+3572445317&4294967295,N=k+(R<<16&4294967295|R>>>16),R=D+(N^k^b)+P[6]+76029189&4294967295,D=N+(R<<23&4294967295|R>>>9),R=b+(D^N^k)+P[9]+3654602809&4294967295,b=D+(R<<4&4294967295|R>>>28),R=k+(b^D^N)+P[12]+3873151461&4294967295,k=b+(R<<11&4294967295|R>>>21),R=N+(k^b^D)+P[15]+530742520&4294967295,N=k+(R<<16&4294967295|R>>>16),R=D+(N^k^b)+P[2]+3299628645&4294967295,D=N+(R<<23&4294967295|R>>>9),R=b+(N^(D|~k))+P[0]+4096336452&4294967295,b=D+(R<<6&4294967295|R>>>26),R=k+(D^(b|~N))+P[7]+1126891415&4294967295,k=b+(R<<10&4294967295|R>>>22),R=N+(b^(k|~D))+P[14]+2878612391&4294967295,N=k+(R<<15&4294967295|R>>>17),R=D+(k^(N|~b))+P[5]+4237533241&4294967295,D=N+(R<<21&4294967295|R>>>11),R=b+(N^(D|~k))+P[12]+1700485571&4294967295,b=D+(R<<6&4294967295|R>>>26),R=k+(D^(b|~N))+P[3]+2399980690&4294967295,k=b+(R<<10&4294967295|R>>>22),R=N+(b^(k|~D))+P[10]+4293915773&4294967295,N=k+(R<<15&4294967295|R>>>17),R=D+(k^(N|~b))+P[1]+2240044497&4294967295,D=N+(R<<21&4294967295|R>>>11),R=b+(N^(D|~k))+P[8]+1873313359&4294967295,b=D+(R<<6&4294967295|R>>>26),R=k+(D^(b|~N))+P[15]+4264355552&4294967295,k=b+(R<<10&4294967295|R>>>22),R=N+(b^(k|~D))+P[6]+2734768916&4294967295,N=k+(R<<15&4294967295|R>>>17),R=D+(k^(N|~b))+P[13]+1309151649&4294967295,D=N+(R<<21&4294967295|R>>>11),R=b+(N^(D|~k))+P[4]+4149444226&4294967295,b=D+(R<<6&4294967295|R>>>26),R=k+(D^(b|~N))+P[11]+3174756917&4294967295,k=b+(R<<10&4294967295|R>>>22),R=N+(b^(k|~D))+P[2]+718787259&4294967295,N=k+(R<<15&4294967295|R>>>17),R=D+(k^(N|~b))+P[9]+3951481745&4294967295,w.g[0]=w.g[0]+b&4294967295,w.g[1]=w.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,w.g[2]=w.g[2]+N&4294967295,w.g[3]=w.g[3]+k&4294967295}i.prototype.v=function(w,b){b===void 0&&(b=w.length);const D=b-this.blockSize,P=this.C;let N=this.h,k=0;for(;k<b;){if(N==0)for(;k<=D;)a(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<b;)if(P[N++]=w.charCodeAt(k++),N==this.blockSize){a(this,P),N=0;break}}else for(;k<b;)if(P[N++]=w[k++],N==this.blockSize){a(this,P),N=0;break}}this.h=N,this.o+=b},i.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var b=1;b<w.length-8;++b)w[b]=0;b=this.o*8;for(var D=w.length-8;D<w.length;++D)w[D]=b&255,b/=256;for(this.v(w),w=Array(16),b=0,D=0;D<4;++D)for(let P=0;P<32;P+=8)w[b++]=this.g[D]>>>P&255;return w};function l(w,b){var D=d;return Object.prototype.hasOwnProperty.call(D,w)?D[w]:D[w]=b(w)}function c(w,b){this.h=b;const D=[];let P=!0;for(let N=w.length-1;N>=0;N--){const k=w[N]|0;P&&k==b||(D[N]=k,P=!1)}this.g=D}var d={};function p(w){return-128<=w&&w<128?l(w,function(b){return new c([b|0],b<0?-1:0)}):new c([w|0],w<0?-1:0)}function g(w){if(isNaN(w)||!isFinite(w))return E;if(w<0)return ee(g(-w));const b=[];let D=1;for(let P=0;w>=D;P++)b[P]=w/D|0,D*=4294967296;return new c(b,0)}function v(w,b){if(w.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(w.charAt(0)=="-")return ee(v(w.substring(1),b));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=g(Math.pow(b,8));let P=E;for(let k=0;k<w.length;k+=8){var N=Math.min(8,w.length-k);const R=parseInt(w.substring(k,k+N),b);N<8?(N=g(Math.pow(b,N)),P=P.j(N).add(g(R))):(P=P.j(D),P=P.add(g(R)))}return P}var E=p(0),S=p(1),O=p(16777216);r=c.prototype,r.m=function(){if(Y(this))return-ee(this).m();let w=0,b=1;for(let D=0;D<this.g.length;D++){const P=this.i(D);w+=(P>=0?P:4294967296+P)*b,b*=4294967296}return w},r.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(K(this))return"0";if(Y(this))return"-"+ee(this).toString(w);const b=g(Math.pow(w,6));var D=this;let P="";for(;;){const N=Se(D,b).g;D=se(D,N.j(b));let k=((D.g.length>0?D.g[0]:D.h)>>>0).toString(w);if(D=N,K(D))return k+P;for(;k.length<6;)k="0"+k;P=k+P}},r.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function K(w){if(w.h!=0)return!1;for(let b=0;b<w.g.length;b++)if(w.g[b]!=0)return!1;return!0}function Y(w){return w.h==-1}r.l=function(w){return w=se(this,w),Y(w)?-1:K(w)?0:1};function ee(w){const b=w.g.length,D=[];for(let P=0;P<b;P++)D[P]=~w.g[P];return new c(D,~w.h).add(S)}r.abs=function(){return Y(this)?ee(this):this},r.add=function(w){const b=Math.max(this.g.length,w.g.length),D=[];let P=0;for(let N=0;N<=b;N++){let k=P+(this.i(N)&65535)+(w.i(N)&65535),R=(k>>>16)+(this.i(N)>>>16)+(w.i(N)>>>16);P=R>>>16,k&=65535,R&=65535,D[N]=R<<16|k}return new c(D,D[D.length-1]&-2147483648?-1:0)};function se(w,b){return w.add(ee(b))}r.j=function(w){if(K(this)||K(w))return E;if(Y(this))return Y(w)?ee(this).j(ee(w)):ee(ee(this).j(w));if(Y(w))return ee(this.j(ee(w)));if(this.l(O)<0&&w.l(O)<0)return g(this.m()*w.m());const b=this.g.length+w.g.length,D=[];for(var P=0;P<2*b;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(let N=0;N<w.g.length;N++){const k=this.i(P)>>>16,R=this.i(P)&65535,ut=w.i(N)>>>16,It=w.i(N)&65535;D[2*P+2*N]+=R*It,le(D,2*P+2*N),D[2*P+2*N+1]+=k*It,le(D,2*P+2*N+1),D[2*P+2*N+1]+=R*ut,le(D,2*P+2*N+1),D[2*P+2*N+2]+=k*ut,le(D,2*P+2*N+2)}for(w=0;w<b;w++)D[w]=D[2*w+1]<<16|D[2*w];for(w=b;w<2*b;w++)D[w]=0;return new c(D,0)};function le(w,b){for(;(w[b]&65535)!=w[b];)w[b+1]+=w[b]>>>16,w[b]&=65535,b++}function ue(w,b){this.g=w,this.h=b}function Se(w,b){if(K(b))throw Error("division by zero");if(K(w))return new ue(E,E);if(Y(w))return b=Se(ee(w),b),new ue(ee(b.g),ee(b.h));if(Y(b))return b=Se(w,ee(b)),new ue(ee(b.g),b.h);if(w.g.length>30){if(Y(w)||Y(b))throw Error("slowDivide_ only works with positive integers.");for(var D=S,P=b;P.l(w)<=0;)D=Re(D),P=Re(P);var N=_e(D,1),k=_e(P,1);for(P=_e(P,2),D=_e(D,2);!K(P);){var R=k.add(P);R.l(w)<=0&&(N=N.add(D),k=R),P=_e(P,1),D=_e(D,1)}return b=se(w,N.j(b)),new ue(N,b)}for(N=E;w.l(b)>=0;){for(D=Math.max(1,Math.floor(w.m()/b.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),k=g(D),R=k.j(b);Y(R)||R.l(w)>0;)D-=P,k=g(D),R=k.j(b);K(k)&&(k=S),N=N.add(k),w=se(w,R)}return new ue(N,w)}r.B=function(w){return Se(this,w).h},r.and=function(w){const b=Math.max(this.g.length,w.g.length),D=[];for(let P=0;P<b;P++)D[P]=this.i(P)&w.i(P);return new c(D,this.h&w.h)},r.or=function(w){const b=Math.max(this.g.length,w.g.length),D=[];for(let P=0;P<b;P++)D[P]=this.i(P)|w.i(P);return new c(D,this.h|w.h)},r.xor=function(w){const b=Math.max(this.g.length,w.g.length),D=[];for(let P=0;P<b;P++)D[P]=this.i(P)^w.i(P);return new c(D,this.h^w.h)};function Re(w){const b=w.g.length+1,D=[];for(let P=0;P<b;P++)D[P]=w.i(P)<<1|w.i(P-1)>>>31;return new c(D,w.h)}function _e(w,b){const D=b>>5;b%=32;const P=w.g.length-D,N=[];for(let k=0;k<P;k++)N[k]=b>0?w.i(k+D)>>>b|w.i(k+D+1)<<32-b:w.i(k+D);return new c(N,w.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,cb=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Ds=c}).apply(typeof FA<"u"?FA:typeof self<"u"?self:typeof window<"u"?window:{});var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hb,uc,fb,$f,Pg,db,mb,pb;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lf=="object"&&Lf];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var T=i;h=h.split(".");for(var I=0;I<h.length-1;I++){var U=h[I];if(!(U in T))break e;T=T[U]}h=h[h.length-1],I=T[h],_=_(I),_!=I&&_!=null&&e(T,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var T=[],I;for(I in _)Object.prototype.hasOwnProperty.call(_,I)&&T.push([I,_[I]]);return T}});var l=l||{},c=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function p(h,_,T){return h.call.apply(h.bind,arguments)}function g(h,_,T){return g=p,g.apply(null,arguments)}function v(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function E(h,_){function T(){}T.prototype=_.prototype,h.Z=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(I,U,j){for(var ie=Array(arguments.length-2),De=2;De<arguments.length;De++)ie[De-2]=arguments[De];return _.prototype[U].apply(I,ie)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const _=h.length;if(_>0){const T=Array(_);for(let I=0;I<_;I++)T[I]=h[I];return T}return[]}function K(h,_){for(let I=1;I<arguments.length;I++){const U=arguments[I];var T=typeof U;if(T=T!="object"?T:U?Array.isArray(U)?"array":T:"null",T=="array"||T=="object"&&typeof U.length=="number"){T=h.length||0;const j=U.length||0;h.length=T+j;for(let ie=0;ie<j;ie++)h[T+ie]=U[ie]}else h.push(U)}}class Y{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function ee(h){c.setTimeout(()=>{throw h},0)}function se(){var h=w;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class le{constructor(){this.h=this.g=null}add(_,T){const I=ue.get();I.set(_,T),this.h?this.h.next=I:this.g=I,this.h=I}}var ue=new Y(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,_e=!1,w=new le,b=()=>{const h=Promise.resolve(void 0);Re=()=>{h.then(D)}};function D(){for(var h;h=se();){try{h.h.call(h.g)}catch(T){ee(T)}var _=ue;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}_e=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,_),c.removeEventListener("test",T,_)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function ut(h,_){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}E(ut,N),ut.prototype.init=function(h,_){const T=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ut.Z.h.call(this)},ut.prototype.h=function(){ut.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var It="closure_listenable_"+(Math.random()*1e6|0),Q=0;function G(h,_,T,I,U){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!I,this.ha=U,this.key=++Q,this.da=this.fa=!1}function ae(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ae(h,_,T){for(const I in h)_.call(T,h[I],I,h)}function xe(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function V(h){const _={};for(const T in h)_[T]=h[T];return _}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,_){let T,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(T in I)h[T]=I[T];for(let j=0;j<$.length;j++)T=$[j],Object.prototype.hasOwnProperty.call(I,T)&&(h[T]=I[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,_,T,I,U){const j=h.toString();h=this.g[j],h||(h=this.g[j]=[],this.h++);const ie=ve(h,_,I,U);return ie>-1?(_=h[ie],T||(_.fa=!1)):(_=new G(_,this.src,j,!!I,U),_.fa=T,h.push(_)),_};function Te(h,_){const T=_.type;if(T in h.g){var I=h.g[T],U=Array.prototype.indexOf.call(I,_,void 0),j;(j=U>=0)&&Array.prototype.splice.call(I,U,1),j&&(ae(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ve(h,_,T,I){for(let U=0;U<h.length;++U){const j=h[U];if(!j.da&&j.listener==_&&j.capture==!!T&&j.ha==I)return U}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),bt={};function ct(h,_,T,I,U){if(Array.isArray(_)){for(let j=0;j<_.length;j++)ct(h,_[j],T,I,U);return null}return T=Jl(T),h&&h[It]?h.J(_,T,d(I)?!!I.capture:!1,U):Xs(h,_,T,!1,I,U)}function Xs(h,_,T,I,U,j){if(!_)throw Error("Invalid event type");const ie=d(U)?!!U.capture:!!U;let De=$s(h);if(De||(h[Ue]=De=new ce(h)),T=De.add(_,T,I,ie,j),T.proxy)return T;if(I=ao(),T.proxy=I,I.src=h,I.listener=T,h.addEventListener)k||(U=ie),U===void 0&&(U=!1),h.addEventListener(_.toString(),I,U);else if(h.attachEvent)h.attachEvent(Ii(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ao(){function h(T){return _.call(h.src,h.listener,T)}const _=Xl;return h}function oo(h,_,T,I,U){if(Array.isArray(_))for(var j=0;j<_.length;j++)oo(h,_[j],T,I,U);else I=d(I)?!!I.capture:!!I,T=Jl(T),h&&h[It]?(h=h.i,j=String(_).toString(),j in h.g&&(_=h.g[j],T=ve(_,T,I,U),T>-1&&(ae(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete h.g[j],h.h--)))):h&&(h=$s(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ve(_,T,I,U)),(T=h>-1?_[h]:null)&&lo(T))}function lo(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[It])Te(_.i,h);else{var T=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(T,I,h.capture):_.detachEvent?_.detachEvent(Ii(T),I):_.addListener&&_.removeListener&&_.removeListener(I),(T=$s(_))?(Te(T,h),T.h==0&&(T.src=null,_[Ue]=null)):ae(h)}}}function Ii(h){return h in bt?bt[h]:bt[h]="on"+h}function Xl(h,_){if(h.da)h=!0;else{_=new ut(_,this);const T=h.listener,I=h.ha||h.src;h.fa&&lo(h),h=T.call(I,_)}return h}function $s(h){return h=h[Ue],h instanceof ce?h:null}var $l="__closure_events_fn_"+(Math.random()*1e9>>>0);function Jl(h){return typeof h=="function"?h:(h[$l]||(h[$l]=function(_){return h.handleEvent(_)}),h[$l])}function xt(){P.call(this),this.i=new ce(this),this.M=this,this.G=null}E(xt,P),xt.prototype[It]=!0,xt.prototype.removeEventListener=function(h,_,T,I){oo(this,h,_,T,I)};function jt(h,_){var T,I=h.G;if(I)for(T=[];I;I=I.G)T.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new N(_,h);else if(_ instanceof N)_.target=_.target||h;else{var U=_;_=new N(I,h),oe(_,U)}U=!0;let j,ie;if(T)for(ie=T.length-1;ie>=0;ie--)j=_.g=T[ie],U=kr(j,I,!0,_)&&U;if(j=_.g=h,U=kr(j,I,!0,_)&&U,U=kr(j,I,!1,_)&&U,T)for(ie=0;ie<T.length;ie++)j=_.g=T[ie],U=kr(j,I,!1,_)&&U}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const T=h.g[_];for(let I=0;I<T.length;I++)ae(T[I]);delete h.g[_],h.h--}}this.G=null},xt.prototype.J=function(h,_,T,I){return this.i.add(String(h),_,!1,T,I)},xt.prototype.K=function(h,_,T,I){return this.i.add(String(h),_,!0,T,I)};function kr(h,_,T,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let U=!0;for(let j=0;j<_.length;++j){const ie=_[j];if(ie&&!ie.da&&ie.capture==T){const De=ie.listener,Rt=ie.ha||ie.src;ie.fa&&Te(h.i,ie),U=De.call(Rt,I)!==!1&&U}}return U&&!I.defaultPrevented}function sm(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function ah(h){h.g=sm(()=>{h.g=null,h.i&&(h.i=!1,ah(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class mn extends P{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ah(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(h){P.call(this),this.h=h,this.g={}}E(Js,P);var Wl=[];function Zl(h){Ae(h.g,function(_,T){this.g.hasOwnProperty(T)&&lo(_)},h),h.g={}}Js.prototype.N=function(){Js.Z.N.call(this),Zl(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lr=c.JSON.stringify,am=c.JSON.parse,oh=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function lh(){}function uh(){}var ai={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){N.call(this,"d")}E(tn,N);function Kn(){N.call(this,"c")}E(Kn,N);var wt={},ch=null;function uo(){return ch=ch||new xt}wt.Ia="serverreachability";function hh(h){N.call(this,wt.Ia,h)}E(hh,N);function bi(h){const _=uo();jt(_,new hh(_))}wt.STAT_EVENT="statevent";function Ws(h,_){N.call(this,wt.STAT_EVENT,h),this.stat=_}E(Ws,N);function Ot(h){const _=uo();jt(_,new Ws(_,h))}wt.Ja="timingevent";function wi(h,_){N.call(this,wt.Ja,h),this.size=_}E(wi,N);function Ri(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function oi(){this.g=!0}oi.prototype.ua=function(){this.g=!1};function om(h,_,T,I,U,j){h.info(function(){if(h.g)if(j){var ie="",De=j.split("&");for(let Qe=0;Qe<De.length;Qe++){var Rt=De[Qe].split("=");if(Rt.length>1){const gt=Rt[0];Rt=Rt[1];const $n=gt.split("_");ie=$n.length>=2&&$n[1]=="type"?ie+(gt+"="+Rt+"&"):ie+(gt+"=redacted&")}}}else ie=null;else ie=j;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+_+`
`+T+`
`+ie})}function fh(h,_,T,I,U,j,ie){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+_+`
`+T+`
`+j+" "+ie})}function Ci(h,_,T,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+lm(h,T)+(I?" "+I:"")})}function Zs(h,_){h.info(function(){return"TIMEOUT: "+_})}oi.prototype.info=function(){};function lm(h,_){if(!h.g)return _;if(!_)return null;try{const j=JSON.parse(_);if(j){for(h=0;h<j.length;h++)if(Array.isArray(j[h])){var T=j[h];if(!(T.length<2)){var I=T[1];if(Array.isArray(I)&&!(I.length<1)){var U=I[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ie=1;ie<I.length;ie++)I[ie]=""}}}}return Lr(j)}catch{return _}}var ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},eu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tu;function ta(){}E(ta,lh),ta.prototype.g=function(){return new XMLHttpRequest},tu=new ta;function tr(h){return encodeURIComponent(String(h))}function dh(h){var _=1;h=h.split(":");const T=[];for(;_>0&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function li(h,_,T,I){this.j=h,this.i=_,this.l=T,this.S=I||1,this.V=new Js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ui}function ui(){this.i=null,this.g="",this.h=!1}var Pt={},Yt={};function Di(h,_,T){h.M=1,h.A=na(kt(_)),h.u=T,h.R=!0,co(h,null)}function co(h,_){h.F=Date.now(),Vi(h),h.B=kt(h.A);var T=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),po(T.i,"t",I),h.C=0,T=h.j.L,h.h=new ui,h.g=Ch(h.j,T?_:null,!h.u),h.P>0&&(h.O=new mn(g(h.Y,h,h.g),h.P)),_=h.V,T=h.g,I=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(Wl[0]=U.toString()),U=Wl);for(let j=0;j<U.length;j++){const ie=ct(T,U[j],I||_.handleEvent,!1,_.h||_);if(!ie)break;_.g[ie.key]=ie}_=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),bi(),om(h.i,h.v,h.B,h.l,h.S,h.u)}li.prototype.ba=function(h){h=h.target;const _=this.O;_&&fi(h)==3?_.j():this.Y(h)},li.prototype.Y=function(h){try{if(h==this.g)e:{const De=fi(this.g),Rt=this.g.ya(),Qe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||De!=4||Rt==7||(Rt==8||Qe<=0?bi(3):bi(2)),Ni(this);var _=this.g.ca();this.X=_;var T=um(this);if(this.o=_==200,fh(this.i,this.v,this.B,this.l,this.S,De,_),this.o){if(this.U&&!this.L){t:{if(this.g){var I,U=this.g;if((I=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var j=I;break t}}j=null}if(h=j)Ci(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,h);else{this.o=!1,this.m=3,Ot(12),Nn(this),Qn(this);break e}}if(this.R){h=!0;let gt;for(;!this.K&&this.C<T.length;)if(gt=ph(this,T),gt==Yt){De==4&&(this.m=4,Ot(14),h=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Pt){this.m=4,Ot(15),Ci(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Ci(this.i,this.l,gt,null),xi(this,gt);if(mh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||T.length!=0||this.h.h||(this.m=1,Ot(16),h=!1),this.o=this.o&&h,!h)Ci(this.i,this.l,T,"[Invalid Chunked Response]"),Nn(this),Qn(this);else if(T.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),gu(ie),ie.P=!0,Ot(11))}}else Ci(this.i,this.l,T,null),xi(this,T);De==4&&Nn(this),this.o&&!this.K&&(De==4?Ih(this.j,this):(this.o=!1,Vi(this)))}else ir(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Nn(this),Qn(this)}}}catch{}};function um(h){if(!mh(h))return h.g.la();const _=nn(h.g);if(_==="")return"";let T="";const I=_.length,U=fi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Nn(h),Qn(h),"";h.h.i=new c.TextDecoder}for(let j=0;j<I;j++)h.h.h=!0,T+=h.h.i.decode(_[j],{stream:!(U&&j==I-1)});return _.length=0,h.h.g+=T,h.C=0,h.h.g}function mh(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ph(h,_){var T=h.C,I=_.indexOf(`
`,T);return I==-1?Yt:(T=Number(_.substring(T,I)),isNaN(T)?Pt:(I+=1,I+T>_.length?Yt:(_=_.slice(I,I+T),h.C=I+T,_)))}li.prototype.cancel=function(){this.K=!0,Nn(this)};function Vi(h){h.T=Date.now()+h.H,ho(h,h.H)}function ho(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ri(g(h.aa,h),_)}function Ni(h){h.D&&(c.clearTimeout(h.D),h.D=null)}li.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Zs(this.i,this.B),this.M!=2&&(bi(),Ot(17)),Nn(this),this.m=2,Qn(this)):ho(this,this.T-h)};function Qn(h){h.j.I==0||h.K||Ih(h.j,h)}function Nn(h){Ni(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Zl(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function xi(h,_){try{var T=h.j;if(T.I!=0&&(T.g==h||Pi(T.h,h))){if(!h.L&&Pi(T.h,h)&&T.I==3){try{var I=T.Ba.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)To(T),Gr(T);else break e;ua(T),Ot(18)}}else T.xa=U[1],0<T.xa-T.K&&U[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ri(g(T.Va,T),6e3));Oi(T.h)<=1&&T.ta&&(T.ta=void 0)}else Bi(T,11)}else if((h.L||T.g==h)&&To(T),!R(_))for(U=T.Ba.g.parse(_),_=0;_<U.length;_++){let Qe=U[_];const gt=Qe[0];if(!(gt<=T.K))if(T.K=gt,Qe=Qe[1],T.I==2)if(Qe[0]=="c"){T.M=Qe[1],T.ba=Qe[2];const $n=Qe[3];$n!=null&&(T.ka=$n,T.j.info("VER="+T.ka));const qi=Qe[4];qi!=null&&(T.za=qi,T.j.info("SVER="+T.za));const di=Qe[5];di!=null&&typeof di=="number"&&di>0&&(I=1.5*di,T.O=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const mi=h.g;if(mi){const ca=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ca){var j=I.h;j.g||ca.indexOf("spdy")==-1&&ca.indexOf("quic")==-1&&ca.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ru(j,j.h),j.h=null))}if(I.G){const Eo=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Eo&&(I.wa=Eo,$e(I.J,I.G,Eo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),I=T;var ie=h;if(I.na=Rh(I,I.L?I.ba:null,I.W),ie.L){su(I.h,ie);var De=ie,Rt=I.O;Rt&&(De.H=Rt),De.D&&(Ni(De),Vi(De)),I.g=ie}else Ah(I);T.i.length>0&&zi(T)}else Qe[0]!="stop"&&Qe[0]!="close"||Bi(T,7);else T.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Bi(T,7):mu(T):Qe[0]!="noop"&&T.l&&T.l.qa(Qe),T.A=0)}}bi(4)}catch{}}var Mt=class{constructor(h,_){this.g=h,this.map=_}};function nu(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function iu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Oi(h){return h.h?1:h.g?h.g.size:0}function Pi(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ru(h,_){h.g?h.g.add(_):h.h=_}function su(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}nu.prototype.cancel=function(){if(this.i=au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function au(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.G);return _}return O(h.i)}var gh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fo(h,_){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const I=h[T].indexOf("=");let U,j=null;I>=0?(U=h[T].substring(0,I),j=h[T].substring(I+1)):U=h[T],_(U,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function xn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof xn?(this.l=h.l,Xt(this,h.j),this.o=h.o,this.g=h.g,Ur(this,h.u),this.h=h.h,ou(this,Th(h.i)),this.m=h.m):h&&(_=String(h).match(gh))?(this.l=!1,Xt(this,_[1]||"",!0),this.o=Mi(_[2]||""),this.g=Mi(_[3]||"",!0),Ur(this,_[4]),this.h=Mi(_[5]||"",!0),ou(this,_[6]||"",!0),this.m=Mi(_[7]||"")):(this.l=!1,this.i=new Br(null,this.l))}xn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(ia(_,mo,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ia(_,mo,!0),"@"),h.push(tr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ia(T,T.charAt(0)=="/"?lu:_h,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ia(T,yh)),h.join("")},xn.prototype.resolve=function(h){const _=kt(this);let T=!!h.j;T?Xt(_,h.j):T=!!h.o,T?_.o=h.o:T=!!h.g,T?_.g=h.g:T=h.u!=null;var I=h.h;if(T)Ur(_,h.u);else if(T=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var U=_.h.lastIndexOf("/");U!=-1&&(I=_.h.slice(0,U+1)+I)}if(U=I,U==".."||U==".")I="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){I=U.lastIndexOf("/",0)==0,U=U.split("/");const j=[];for(let ie=0;ie<U.length;){const De=U[ie++];De=="."?I&&ie==U.length&&j.push(""):De==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),I&&ie==U.length&&j.push("")):(j.push(De),I=!0)}I=j.join("/")}else I=U}return T?_.h=I:T=h.i.toString()!=="",T?ou(_,Th(h.i)):T=!!h.m,T&&(_.m=h.m),_};function kt(h){return new xn(h)}function Xt(h,_,T){h.j=T?Mi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Ur(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function ou(h,_,T){_ instanceof Br?(h.i=_,go(h.i,h.l)):(T||(_=ia(_,zr)),h.i=new Br(_,h.l))}function $e(h,_,T){h.i.set(_,T)}function na(h){return $e(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ia(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,yn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var mo=/[#\/\?@]/g,_h=/[#\?:]/g,lu=/[#\?]/g,zr=/[#\?@]/g,yh=/#/g;function Br(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function vn(h){h.g||(h.g=new Map,h.h=0,h.i&&fo(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}r=Br.prototype,r.add=function(h,_){vn(this),this.i=null,h=qr(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function vh(h,_){vn(h),_=qr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function uu(h,_){return vn(h),_=qr(h,_),h.g.has(_)}r.forEach=function(h,_){vn(this),this.g.forEach(function(T,I){T.forEach(function(U){h.call(_,U,I,this)},this)},this)};function cu(h,_){vn(h);let T=[];if(typeof _=="string")uu(h,_)&&(T=T.concat(h.g.get(qr(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)T=T.concat(h[_]);return T}r.set=function(h,_){return vn(this),this.i=null,h=qr(this,h),uu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},r.get=function(h,_){return h?(h=cu(this,h),h.length>0?String(h[0]):_):_};function po(h,_,T){vh(h,_),T.length>0&&(h.i=null,h.g.set(qr(h,_),O(T)),h.h+=T.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let I=0;I<_.length;I++){var T=_[I];const U=tr(T);T=cu(this,T);for(let j=0;j<T.length;j++){let ie=U;T[j]!==""&&(ie+="="+tr(T[j])),h.push(ie)}}return this.i=h.join("&")};function Th(h){const _=new Br;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function qr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function go(h,_){_&&!h.j&&(vn(h),h.i=null,h.g.forEach(function(T,I){const U=I.toLowerCase();I!=U&&(vh(this,I),po(this,U,T))},h)),h.j=_}function ci(h,_){const T=new oi;if(c.Image){const I=new Image;I.onload=v(Yn,T,"TestLoadImage: loaded",!0,_,I),I.onerror=v(Yn,T,"TestLoadImage: error",!1,_,I),I.onabort=v(Yn,T,"TestLoadImage: abort",!1,_,I),I.ontimeout=v(Yn,T,"TestLoadImage: timeout",!1,_,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function hu(h,_){const T=new oi,I=new AbortController,U=setTimeout(()=>{I.abort(),Yn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(j=>{clearTimeout(U),j.ok?Yn(T,"TestPingServer: ok",!0,_):Yn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(U),Yn(T,"TestPingServer: error",!1,_)})}function Yn(h,_,T,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(T)}catch{}}function Fr(){this.g=new oh}function ki(h){this.i=h.Sb||null,this.h=h.ab||!1}E(ki,lh),ki.prototype.g=function(){return new ra(this.i,this.h)};function ra(h,_){xt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ra,xt),r=ra.prototype,r.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,hi(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_o(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _o(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?jr(this):hi(this),this.readyState==3&&_o(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,jr(this))},r.Na=function(h){this.g&&(this.response=h,jr(this))},r.ga=function(){this.g&&jr(this)};function jr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,hi(h)}r.setRequestHeader=function(h,_){this.A.append(h,_)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function hi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xn(h){let _="";return Ae(h,function(T,I){_+=I,_+=":",_+=T,_+=`\r
`}),_}function sa(h,_,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=Xn(T),typeof h=="string"?T!=null&&tr(T):$e(h,_,T))}function nt(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(nt,xt);var Li=/^https?$/i,fu=["POST","PUT"];r=nt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,_,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tu.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(j){aa(this,j);return}if(h=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)T.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const j of I.keys())T.set(j,I.get(j));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(j=>j.toLowerCase()=="content-type"),U=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(fu,_,void 0)>=0)||I||U||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ie]of T)this.g.setRequestHeader(j,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(j){aa(this,j)}};function aa(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,du(h),nr(h)}function du(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),nr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nr(this,!0)),nt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?oa(this):this.Xa())},r.Xa=function(){oa(this)};function oa(h){if(h.h&&typeof l<"u"){if(h.v&&fi(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),fi(h)==4){h.h=!1;try{const j=h.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var I;if(I=j===0){let ie=String(h.D).match(gh)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),I=!Li.test(ie?ie.toLowerCase():"")}T=I}if(T)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var U=fi(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",du(h)}}finally{nr(h)}}}}function nr(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,_||jt(h,"ready");try{T.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function fi(h){return h.g?h.g.readyState:0}r.ca=function(){try{return fi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),am(_)}};function nn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ir(h){const _={};h=(h.g&&fi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(R(h[I]))continue;var T=dh(h[I]);const U=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const j=_[U]||[];_[U]=j,j.push(T)}xe(_,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function Hr(h){this.za=0,this.i=[],this.j=new oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ui("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ui("baseRetryDelayMs",5e3,h),this.Za=Ui("retryDelaySeedMs",1e4,h),this.Ta=Ui("forwardChannelMaxRetries",2,h),this.va=Ui("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new nu(h&&h.concurrentRequestLimit),this.Ba=new Fr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Hr.prototype,r.ka=8,r.I=1,r.connect=function(h,_,T,I){Ot(0),this.W=h,this.H=_||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.J=Rh(this,null,this.W),zi(this)};function mu(h){if(yo(h),h.I==3){var _=h.V++,T=kt(h.J);if($e(T,"SID",h.M),$e(T,"RID",_),$e(T,"TYPE","terminate"),la(h,T),_=new li(h,h.j,_),_.M=2,_.A=na(kt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=_.A,T=!0),T||(_.g=Ch(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Vi(_)}wh(h)}function Gr(h){h.g&&(gu(h),h.g.cancel(),h.g=null)}function yo(h){Gr(h),h.v&&(c.clearTimeout(h.v),h.v=null),To(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function zi(h){if(!iu(h.h)&&!h.m){h.m=!0;var _=h.Ea;Re||b(),_e||(Re(),_e=!0),w.add(_,h),h.D=0}}function vo(h,_){return Oi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ri(g(h.Ea,h,_),bh(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new li(this,this.j,h);let j=this.o;if(this.U&&(j?(j=V(j),oe(j,this.U)):j=this.U),this.u!==null||this.R||(U.J=j,j=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Eh(this,U,_),T=kt(this.J),$e(T,"RID",h),$e(T,"CVER",22),this.G&&$e(T,"X-HTTP-Session-Id",this.G),la(this,T),j&&(this.R?_="headers="+tr(Xn(j))+"&"+_:this.u&&sa(T,this.u,j)),ru(this.h,U),this.Ra&&$e(T,"TYPE","init"),this.S?($e(T,"$req",_),$e(T,"SID","null"),U.U=!0,Di(U,T,null)):Di(U,T,_),this.I=2}}else this.I==3&&(h?pu(this,h):this.i.length==0||iu(this.h)||pu(this))};function pu(h,_){var T;_?T=_.l:T=h.V++;const I=kt(h.J);$e(I,"SID",h.M),$e(I,"RID",T),$e(I,"AID",h.K),la(h,I),h.u&&h.o&&sa(I,h.u,h.o),T=new li(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Eh(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ru(h.h,T),Di(T,I,_)}function la(h,_){h.H&&Ae(h.H,function(T,I){$e(_,I,T)}),h.l&&Ae({},function(T,I){$e(_,I,T)})}function Eh(h,_,T){T=Math.min(h.i.length,T);const I=h.l?g(h.l.Ka,h.l,h):null;e:{var U=h.i;let De=-1;for(;;){const Rt=["count="+T];De==-1?T>0?(De=U[0].g,Rt.push("ofs="+De)):De=0:Rt.push("ofs="+De);let Qe=!0;for(let gt=0;gt<T;gt++){var j=U[gt].g;const $n=U[gt].map;if(j-=De,j<0)De=Math.max(0,U[gt].g-100),Qe=!1;else try{j="req"+j+"_"||"";try{var ie=$n instanceof Map?$n:Object.entries($n);for(const[qi,di]of ie){let mi=di;d(di)&&(mi=Lr(di)),Rt.push(j+qi+"="+encodeURIComponent(mi))}}catch(qi){throw Rt.push(j+"type="+encodeURIComponent("_badmap")),qi}}catch{I&&I($n)}}if(Qe){ie=Rt.join("&");break e}}ie=void 0}return h=h.i.splice(0,T),_.G=h,ie}function Ah(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;Re||b(),_e||(Re(),_e=!0),w.add(_,h),h.A=0}}function ua(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ri(g(h.Da,h),bh(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Sh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ri(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),Gr(this),Sh(this))};function gu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Sh(h){h.g=new li(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=kt(h.na);$e(_,"RID","rpc"),$e(_,"SID",h.M),$e(_,"AID",h.K),$e(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&$e(_,"TO",h.ia),$e(_,"TYPE","xmlhttp"),la(h,_),h.u&&h.o&&sa(_,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=na(kt(_)),T.u=null,T.R=!0,co(T,h)}r.Va=function(){this.C!=null&&(this.C=null,Gr(this),ua(this),Ot(19))};function To(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Ih(h,_){var T=null;if(h.g==_){To(h),gu(h),h.g=null;var I=2}else if(Pi(h.h,_))T=_.G,su(h.h,_),I=1;else return;if(h.I!=0){if(_.o)if(I==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var U=h.D;I=uo(),jt(I,new wi(I,T)),zi(h)}else Ah(h);else if(U=_.m,U==3||U==0&&_.X>0||!(I==1&&vo(h,_)||I==2&&ua(h)))switch(T&&T.length>0&&(_=h.h,_.i=_.i.concat(T)),U){case 1:Bi(h,5);break;case 4:Bi(h,10);break;case 3:Bi(h,6);break;default:Bi(h,2)}}}function bh(h,_){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*_}function Bi(h,_){if(h.j.info("Error code "+_),_==2){var T=g(h.bb,h),I=h.Ua;const U=!I;I=new xn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Xt(I,"https"),na(I),U?ci(I.toString(),T):hu(I.toString(),T)}else Ot(2);h.I=0,h.l&&h.l.pa(_),wh(h),yo(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function wh(h){if(h.I=0,h.ja=[],h.l){const _=au(h.h);(_.length!=0||h.i.length!=0)&&(K(h.ja,_),K(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function Rh(h,_,T){var I=T instanceof xn?kt(T):new xn(T);if(I.g!="")_&&(I.g=_+"."+I.g),Ur(I,I.u);else{var U=c.location;I=U.protocol,_=_?_+"."+U.hostname:U.hostname,U=+U.port;const j=new xn(null);I&&Xt(j,I),_&&(j.g=_),U&&Ur(j,U),T&&(j.h=T),I=j}return T=h.G,_=h.wa,T&&_&&$e(I,T,_),$e(I,"VER",h.ka),la(h,I),I}function Ch(h,_,T){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new nt(new ki({ab:T})):new nt(h.ma),_.Fa(h.L),_}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dh(){}r=Dh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Kr(){}Kr.prototype.g=function(h,_){return new pn(h,_)};function pn(h,_){xt.call(this),this.g=new Hr(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!R(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!R(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new rr(this)}E(pn,xt),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){mu(this.g)},pn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Lr(h),h=T);_.i.push(new Mt(_.Ya++,h)),_.I==3&&zi(_)},pn.prototype.N=function(){this.g.l=null,delete this.j,mu(this.g),delete this.g,pn.Z.N.call(this)};function Vh(h){tn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const T in _){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}E(Vh,tn);function Nh(){Kn.call(this),this.status=1}E(Nh,Kn);function rr(h){this.g=h}E(rr,Dh),rr.prototype.ra=function(){jt(this.g,"a")},rr.prototype.qa=function(h){jt(this.g,new Vh(h))},rr.prototype.pa=function(h){jt(this.g,new Nh)},rr.prototype.oa=function(){jt(this.g,"b")},Kr.prototype.createWebChannel=Kr.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,pb=function(){return new Kr},mb=function(){return uo()},db=wt,Pg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,$f=ea,eu.COMPLETE="complete",fb=eu,uh.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",xt.prototype.listen=xt.prototype.J,uc=uh,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,hb=nt}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");let Ll="12.8.0";function n2(r){Ll=r}const Ns=new m_("@firebase/firestore");function il(){return Ns.logLevel}function i2(r){Ns.setLogLevel(r)}function te(r,...e){if(Ns.logLevel<=qe.DEBUG){const t=e.map(w_);Ns.debug(`Firestore (${Ll}): ${r}`,...t)}}function Vt(r,...e){if(Ns.logLevel<=qe.ERROR){const t=e.map(w_);Ns.error(`Firestore (${Ll}): ${r}`,...t)}}function Hn(r,...e){if(Ns.logLevel<=qe.WARN){const t=e.map(w_);Ns.warn(`Firestore (${Ll}): ${r}`,...t)}}function w_(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function he(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,gb(r,i,t)}function gb(r,e,t){let i=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vt(i),new Error(i)}function de(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||gb(e,a,i)}function r2(r,e){r||he(57014,e)}function re(r,e){return r}const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class en{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class _b{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class s2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class a2{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){de(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new en;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new en,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new en)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(de(typeof i.accessToken=="string",31837,{l:i}),new _b(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class o2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class l2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new o2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Mg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){de(this.o===void 0,3512);const i=l=>{l.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Mg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(de(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Mg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class c2{getToken(){return Promise.resolve(new Mg(""))}invalidateToken(){}start(e,t){}shutdown(){}}function h2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class Pd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=h2(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function be(r,e){return r<e?-1:r>e?1:0}function kg(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return gg(a)===gg(l)?be(a,l):gg(a)?1:-1}return be(r.length,e.length)}const f2=55296,d2=57343;function gg(r){const e=r.charCodeAt(0);return e>=f2&&e<=d2}function ml(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function vb(r){return r+"\0"}const Lg="__name__";class Ki{constructor(e,t,i){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&he(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Ki.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return be(e.length,t.length)}static compareSegments(e,t){const i=Ki.isNumericId(e),a=Ki.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Ki.extractNumericId(e).compare(Ki.extractNumericId(t)):kg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ds.fromString(e.substring(4,e.length-2))}}class Pe extends Ki{construct(e,t,i){return new Pe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new W(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Pe(t)}static emptyPath(){return new Pe([])}}const m2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Ki{construct(e,t,i){return new pt(e,t,i)}static isValidIdentifier(e){return m2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Lg}static keyField(){return new pt([Lg])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new W(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new W(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new W(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new W(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(t)}static emptyPath(){return new pt([])}}class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Pe.fromString(e))}static fromName(e){return new ne(Pe.fromString(e).popFirst(5))}static empty(){return new ne(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Pe(e.slice()))}}function R_(r,e,t){if(!t)throw new W(q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Tb(r,e,t,i){if(e===!0&&i===!0)throw new W(q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function jA(r){if(!ne.isDocumentKey(r))throw new W(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function HA(r){if(ne.isDocumentKey(r))throw new W(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Eb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Md(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":he(12329,{type:typeof r})}function Me(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new W(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Md(r);throw new W(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Ab(r,e){if(e<=0)throw new W(q.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function Ft(r,e){const t={typeString:r};return e&&(t.value=e),t}function eo(r,e){if(!Eb(r))throw new W(q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new W(q.INVALID_ARGUMENT,t);return!0}const GA=-62135596800,KA=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*KA);return new Xe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<GA)throw new W(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KA}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eo(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-GA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Ft("string",Xe._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Xe(0,0))}static max(){return new ge(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const pl=-1;class gl{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Ug(r){return r.fields.find((e=>e.kind===2))}function Ca(r){return r.fields.filter((e=>e.kind!==2))}function p2(r,e){let t=be(r.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let i=0;i<Math.min(r.fields.length,e.fields.length);++i)if(t=g2(r.fields[i],e.fields[i]),t!==0)return t;return be(r.fields.length,e.fields.length)}gl.UNKNOWN_ID=-1;class Ua{constructor(e,t){this.fieldPath=e,this.kind=t}}function g2(r,e){const t=pt.comparator(r.fieldPath,e.fieldPath);return t!==0?t:be(r.kind,e.kind)}class _l{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _l(0,Gn.min())}}function Sb(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=ge.fromTimestamp(i===1e9?new Xe(t+1,0):new Xe(t,i));return new Gn(a,ne.empty(),e)}function Ib(r){return new Gn(r.readTime,r.key,pl)}class Gn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Gn(ge.min(),ne.empty(),pl)}static max(){return new Gn(ge.max(),ne.empty(),pl)}}function C_(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(r.documentKey,e.documentKey),t!==0?t:be(r.largestBatchId,e.largestBatchId))}const bb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fs(r){if(r.code!==q.FAILED_PRECONDITION||r.message!==bb)throw r;te("LocalStore","Unexpectedly lost primary lease")}class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,i)=>{t(e)}))}static reject(e){return new L(((t,i)=>{i(e)}))}static waitFor(e){return new L(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=L.resolve(!1);for(const i of e)t=t.next((a=>a?L.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new L(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&i(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new L(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}const Bn="SimpleDb";class kd{static open(e,t,i,a){try{return new kd(t,e.transaction(a,i))}catch(l){throw new pc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new en,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new pc(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=D_(i.target.error);this.S.reject(new pc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(te(Bn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new y2(t)}}class Wi{static delete(e){return te(Bn,"Removing database:",e),Va(gI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!II())return!1;if(Wi.F())return!0;const e=Gt(),t=Wi.M(e),i=0<t&&t<10,a=Rb(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Wi.M(Gt())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(te(Bn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new pc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new W(q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new W(q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new pc(e,c))},a.onupgradeneeded=l=>{te(Bn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{te(Bn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=kd.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),L.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(te(Bn,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Rb(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class _2{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Va(this.U.delete())}}class pc extends W{constructor(e,t){super(q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function js(r){return r.name==="IndexedDbTransactionError"}class y2{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(te(Bn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(te(Bn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Va(i)}add(e){return te(Bn,"ADD",this.store.name,e,e),Va(this.store.add(e))}get(e){return Va(this.store.get(e)).next((t=>(t===void 0&&(t=null),te(Bn,"GET",this.store.name,e,t),t)))}delete(e){return te(Bn,"DELETE",this.store.name,e),Va(this.store.delete(e))}count(){return te(Bn,"COUNT",this.store.name),Va(this.store.count())}H(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new L(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.J(l,((d,p)=>{c.push(p)})).next((()=>c))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new L(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}X(e,t){te(Bn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.J(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.J(a,t)}te(e){const t=this.cursor({});return new L(((i,a)=>{t.onerror=l=>{const c=D_(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}J(e,t){const i=[];return new L(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new _2(d),g=t(d.primaryKey,d.value,p);if(g instanceof L){const v=g.catch((E=>(p.done(),L.reject(E))));i.push(v)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>L.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Va(r){return new L(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=D_(i.target.error);t(a)}}))}let QA=!1;function D_(r){const e=Wi.M(Gt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QA||(QA=!0,setTimeout((()=>{throw i}),0)),i}}return r}const gc="IndexBackfiller";class v2{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){te(gc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();te(gc,`Documents written: ${t}`)}catch(t){js(t)?te(gc,"Ignoring IndexedDB error during index backfill: ",t):await Fs(t)}await this.re(6e4)}))}}class T2{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return L.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return te(gc,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(te(gc,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=Ib(l);C_(c,i)>0&&(i=c)})),new Gn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class wn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wn.ce=-1;const Vs=-1;function Kc(r){return r==null}function Rc(r){return r===0&&1/r==-1/0}function Cb(r){return typeof r=="number"&&Number.isInteger(r)&&!Rc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const pd="";function fn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=YA(e)),e=E2(r.get(t),e);return YA(e)}function E2(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case pd:t+="";break;default:t+=l}}return t}function YA(r){return r+pd+""}function Yi(r){const e=r.length;if(de(e>=2,64408,{path:r}),e===2)return de(r.charAt(0)===pd&&r.charAt(1)==="",56145,{path:r}),Pe.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(pd,l);switch((c<0||c>t)&&he(50515,{path:r}),r.charAt(c+1)){case"":const d=r.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:he(61167,{path:r})}l=c+2}return new Pe(i)}const Da="remoteDocuments",Qc="owner",Jo="owner",Cc="mutationQueues",A2="userId",yi="mutations",XA="batchId",Ma="userMutationsIndex",$A=["userId","batchId"];function Jf(r,e){return[r,fn(e)]}function Db(r,e,t){return[r,fn(e),t]}const S2={},yl="documentMutations",gd="remoteDocumentsV14",I2=["prefixPath","collectionGroup","readTime","documentId"],Wf="documentKeyIndex",b2=["prefixPath","collectionGroup","documentId"],Vb="collectionGroupIndex",w2=["collectionGroup","readTime","prefixPath","documentId"],Dc="remoteDocumentGlobal",zg="remoteDocumentGlobalKey",vl="targets",Nb="queryTargetsIndex",R2=["canonicalId","targetId"],Tl="targetDocuments",C2=["targetId","path"],V_="documentTargetsIndex",D2=["path","targetId"],_d="targetGlobalKey",za="targetGlobal",Vc="collectionParents",V2=["collectionId","parent"],El="clientMetadata",N2="clientId",Ld="bundles",x2="bundleId",Ud="namedQueries",O2="name",N_="indexConfiguration",P2="indexId",Bg="collectionGroupIndex",M2="collectionGroup",_c="indexState",k2=["indexId","uid"],xb="sequenceNumberIndex",L2=["uid","sequenceNumber"],yc="indexEntries",U2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ob="documentKeyIndex",z2=["indexId","uid","orderedDocumentKey"],zd="documentOverlays",B2=["userId","collectionPath","documentId"],qg="collectionPathOverlayIndex",q2=["userId","collectionPath","largestBatchId"],Pb="collectionGroupOverlayIndex",F2=["userId","collectionGroup","largestBatchId"],x_="globals",j2="name",Mb=[Cc,yi,yl,Da,vl,Qc,za,Tl,El,Dc,Vc,Ld,Ud],H2=[...Mb,zd],kb=[Cc,yi,yl,gd,vl,Qc,za,Tl,El,Dc,Vc,Ld,Ud,zd],Lb=kb,O_=[...Lb,N_,_c,yc],G2=O_,Ub=[...O_,x_],K2=Ub;class Fg extends wb{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Qt(r,e){const t=re(r);return Wi.O(t.le,e)}function JA(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Hs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function zb(r,e){const t=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.push(e(r[i],i,r));return t}function Bb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ht{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uf(this.root,e,this.comparator,!0)}}class Uf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??ln.RED,this.left=a??ln.EMPTY,this.right=l??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new ln(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return ln.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new WA(this.data.getIterator())}getIteratorFrom(e){return new WA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class WA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wo(r){return r.hasNext()?r.getNext():void 0}class Rn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new Rn([])}unionWith(e){let t=new tt(pt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class qb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Q2(){return typeof atob<"u"}class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new qb("Invalid base64 string: "+l):l}})(e);return new Et(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Et(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const Y2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(r){if(de(!!r,39018),typeof r=="string"){let e=0;const t=Y2.exec(r);if(de(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yt(r.seconds),nanos:yt(r.nanos)}}function yt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Dr(r){return typeof r=="string"?Et.fromBase64String(r):Et.fromUint8Array(r)}const Fb="server_timestamp",jb="__type__",Hb="__previous_value__",Gb="__local_write_time__";function Bd(r){return(r?.mapValue?.fields||{})[jb]?.stringValue===Fb}function qd(r){const e=r.mapValue.fields[Hb];return Bd(e)?qd(e):e}function Nc(r){const e=Cr(r.mapValue.fields[Gb].timestampValue);return new Xe(e.seconds,e.nanos)}class X2{constructor(e,t,i,a,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const xc="(default)";class xs{constructor(e,t){this.projectId=e,this.database=t||xc}static empty(){return new xs("","")}get isDefaultDatabase(){return this.database===xc}isEqual(e){return e instanceof xs&&e.projectId===this.projectId&&e.database===this.database}}function $2(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new W(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(r.options.projectId,e)}const P_="__type__",Kb="__max__",Is={mapValue:{fields:{__type__:{stringValue:Kb}}}},M_="__vector__",Al="value",Zf={nullValue:"NULL_VALUE"};function Os(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bd(r)?4:Qb(r)?9007199254740991:Fd(r)?10:11:he(28295,{value:r})}function er(r,e){if(r===e)return!0;const t=Os(r);if(t!==Os(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Nc(r).isEqual(Nc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Cr(a.timestampValue),d=Cr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return Dr(a.bytesValue).isEqual(Dr(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return yt(a.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(a.geoPointValue.longitude)===yt(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return yt(a.integerValue)===yt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=yt(a.doubleValue),d=yt(l.doubleValue);return c===d?Rc(c)===Rc(d):isNaN(c)&&isNaN(d)}return!1})(r,e);case 9:return ml(r.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(JA(c)!==JA(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!er(c[p],d[p])))return!1;return!0})(r,e);default:return he(52216,{left:r})}}function Oc(r,e){return(r.values||[]).find((t=>er(t,e)))!==void 0}function Ps(r,e){if(r===e)return 0;const t=Os(r),i=Os(e);if(t!==i)return be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=yt(l.integerValue||l.doubleValue),p=yt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(r,e);case 3:return ZA(r.timestampValue,e.timestampValue);case 4:return ZA(Nc(r),Nc(e));case 5:return kg(r.stringValue,e.stringValue);case 6:return(function(l,c){const d=Dr(l),p=Dr(c);return d.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=be(d[g],p[g]);if(v!==0)return v}return be(d.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=be(yt(l.latitude),yt(c.latitude));return d!==0?d:be(yt(l.longitude),yt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return eS(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[Al]?.arrayValue,v=p[Al]?.arrayValue,E=be(g?.values?.length||0,v?.values?.length||0);return E!==0?E:eS(g,v)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Is.mapValue&&c===Is.mapValue)return 0;if(l===Is.mapValue)return 1;if(c===Is.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=kg(p[E],v[E]);if(S!==0)return S;const O=Ps(d[p[E]],g[v[E]]);if(O!==0)return O}return be(p.length,v.length)})(r.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function ZA(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return be(r,e);const t=Cr(r),i=Cr(e),a=be(t.seconds,i.seconds);return a!==0?a:be(t.nanos,i.nanos)}function eS(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Ps(t[a],i[a]);if(l)return l}return be(t.length,i.length)}function Sl(r){return jg(r)}function jg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Cr(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Dr(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ne.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=jg(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${jg(t.fields[c])}`;return a+"}"})(r.mapValue):he(61005,{value:r})}function ed(r){switch(Os(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qd(r);return e?16+ed(e):16;case 5:return 2*r.stringValue.length;case 6:return Dr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+ed(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Hs(i.fields,((l,c)=>{a+=l.length+ed(c)})),a})(r.mapValue);default:throw he(13486,{value:r})}}function Ha(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Hg(r){return!!r&&"integerValue"in r}function Pc(r){return!!r&&"arrayValue"in r}function tS(r){return!!r&&"nullValue"in r}function nS(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function td(r){return!!r&&"mapValue"in r}function Fd(r){return(r?.mapValue?.fields||{})[P_]?.stringValue===M_}function vc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Hs(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=vc(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vc(r.arrayValue.values[t]);return e}return{...r}}function Qb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Kb}const Yb={mapValue:{fields:{[P_]:{stringValue:M_},[Al]:{arrayValue:{}}}}};function J2(r){return"nullValue"in r?Zf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ha(xs.empty(),ne.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Fd(r)?Yb:{mapValue:{}}:he(35942,{value:r})}function W2(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ha(xs.empty(),ne.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Yb:"mapValue"in r?Fd(r)?{mapValue:{}}:Is:he(61959,{value:r})}function iS(r,e){const t=Ps(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function rS(r,e){const t=Ps(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!td(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(t)}setAll(e){let t=pt.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=vc(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());td(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];td(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Hs(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new Zt(vc(this.value))}}function Xb(r){const e=[];return Hs(r.fields,((t,i)=>{const a=new pt([t]);if(td(i)){const l=Xb(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Rn(e)}class mt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new mt(e,0,ge.min(),ge.min(),ge.min(),Zt.empty(),0)}static newFoundDocument(e,t,i,a){return new mt(e,1,t,ge.min(),i,a,0)}static newNoDocument(e,t){return new mt(e,2,t,ge.min(),ge.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new mt(e,3,t,ge.min(),ge.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ms{constructor(e,t){this.position=e,this.inclusive=t}}function sS(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=ne.comparator(ne.fromName(c.referenceValue),t.key):i=Ps(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function aS(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!er(r.position[t],e.position[t]))return!1;return!0}class Mc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Z2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class $b{}class Fe extends $b{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new ex(e,t,i):t==="array-contains"?new ix(e,i):t==="in"?new nw(e,i):t==="not-in"?new rx(e,i):t==="array-contains-any"?new sx(e,i):new Fe(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new tx(e,i):new nx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ps(t,this.value)):t!==null&&Os(this.value)===Os(t)&&this.matchesComparison(Ps(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends $b{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ze(e,t)}matches(e){return Il(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Il(r){return r.op==="and"}function Gg(r){return r.op==="or"}function k_(r){return Jb(r)&&Il(r)}function Jb(r){for(const e of r.filters)if(e instanceof Ze)return!1;return!0}function Kg(r){if(r instanceof Fe)return r.field.canonicalString()+r.op.toString()+Sl(r.value);if(k_(r))return r.filters.map((e=>Kg(e))).join(",");{const e=r.filters.map((t=>Kg(t))).join(",");return`${r.op}(${e})`}}function Wb(r,e){return r instanceof Fe?(function(i,a){return a instanceof Fe&&i.op===a.op&&i.field.isEqual(a.field)&&er(i.value,a.value)})(r,e):r instanceof Ze?(function(i,a){return a instanceof Ze&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&Wb(c,a.filters[d])),!0):!1})(r,e):void he(19439)}function Zb(r,e){const t=r.filters.concat(e);return Ze.create(t,r.op)}function ew(r){return r instanceof Fe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sl(t.value)}`})(r):r instanceof Ze?(function(t){return t.op.toString()+" {"+t.getFilters().map(ew).join(" ,")+"}"})(r):"Filter"}class ex extends Fe{constructor(e,t,i){super(e,t,i),this.key=ne.fromName(i.referenceValue)}matches(e){const t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class tx extends Fe{constructor(e,t){super(e,"in",t),this.keys=tw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nx extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=tw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tw(r,e){return(e.arrayValue?.values||[]).map((t=>ne.fromName(t.referenceValue)))}class ix extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pc(t)&&Oc(t.arrayValue,this.value)}}class nw extends Fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Oc(this.value.arrayValue,t)}}class rx extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Oc(this.value.arrayValue,t)}}class sx extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Oc(this.value.arrayValue,i)))}}class ax{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Qg(r,e=null,t=[],i=[],a=null,l=null,c=null){return new ax(r,e,t,i,a,l,c)}function Ga(r){const e=re(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Kg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Sl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Sl(i))).join(",")),e.Te=t}return e.Te}function Yc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Z2(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Wb(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!aS(r.startAt,e.startAt)&&aS(r.endAt,e.endAt)}function yd(r){return ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function vd(r,e){return r.filters.filter((t=>t instanceof Fe&&t.field.isEqual(e)))}function oS(r,e,t){let i=Zf,a=!0;for(const l of vd(r,e)){let c=Zf,d=!0;switch(l.op){case"<":case"<=":c=J2(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Zf}iS({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];iS({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function lS(r,e,t){let i=Is,a=!0;for(const l of vd(r,e)){let c=Is,d=!0;switch(l.op){case">=":case">":c=W2(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Is}rS({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];rS({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}class xr{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function iw(r,e,t,i,a,l,c,d){return new xr(r,e,t,i,a,l,c,d)}function Ul(r){return new xr(r)}function uS(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ox(r){return ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function L_(r){return r.collectionGroup!==null}function cl(r){const e=re(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new tt(pt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Mc(l,i))})),t.has(pt.keyField().canonicalString())||e.Ie.push(new Mc(pt.keyField(),i))}return e.Ie}function dn(r){const e=re(r);return e.Ee||(e.Ee=sw(e,cl(r))),e.Ee}function rw(r){const e=re(r);return e.Re||(e.Re=sw(e,r.explicitOrderBy)),e.Re}function sw(r,e){if(r.limitType==="F")return Qg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Mc(a.field,l)}));const t=r.endAt?new Ms(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Ms(r.startAt.position,r.startAt.inclusive):null;return Qg(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Yg(r,e){const t=r.filters.concat([e]);return new xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function lx(r,e){const t=r.explicitOrderBy.concat([e]);return new xr(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Td(r,e,t){return new xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ux(r,e){return new xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,e,r.endAt)}function cx(r,e){return new xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,e)}function Xc(r,e){return Yc(dn(r),dn(e))&&r.limitType===e.limitType}function aw(r){return`${Ga(dn(r))}|lt:${r.limitType}`}function rl(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>ew(a))).join(", ")}]`),Kc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Sl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Sl(a))).join(",")),`Target(${i})`})(dn(r))}; limitType=${r.limitType})`}function $c(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ne.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of cl(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=sS(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,cl(i),a)||i.endAt&&!(function(c,d,p){const g=sS(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,cl(i),a))})(r,e)}function ow(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function lw(r){return(e,t)=>{let i=!1;for(const a of cl(r)){const l=hx(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function hx(r,e,t){const i=r.field.isKeyField()?ne.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ps(p,g):he(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return he(19790,{direction:r.dir})}}class Or{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Hs(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Bb(this.inner)}size(){return this.innerSize}}const fx=new ht(ne.comparator);function Cn(){return fx}const uw=new ht(ne.comparator);function cc(...r){let e=uw;for(const t of r)e=e.insert(t.key,t);return e}function cw(r){let e=uw;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Xi(){return Tc()}function hw(){return Tc()}function Tc(){return new Or((r=>r.toString()),((r,e)=>r.isEqual(e)))}const dx=new ht(ne.comparator),mx=new tt(ne.comparator);function Ce(...r){let e=mx;for(const t of r)e=e.add(t);return e}const px=new tt(be);function U_(){return px}function z_(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function fw(r){return{integerValue:""+r}}function dw(r,e){return Cb(e)?fw(e):z_(r,e)}class jd{constructor(){this._=void 0}}function gx(r,e,t){return r instanceof bl?(function(a,l){const c={fields:{[jb]:{stringValue:Fb},[Gb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Bd(l)&&(l=qd(l)),l&&(c.fields[Hb]=l),{mapValue:c}})(t,e):r instanceof Ka?pw(r,e):r instanceof Qa?gw(r,e):(function(a,l){const c=mw(a,l),d=cS(c)+cS(a.Ae);return Hg(c)&&Hg(a.Ae)?fw(d):z_(a.serializer,d)})(r,e)}function _x(r,e,t){return r instanceof Ka?pw(r,e):r instanceof Qa?gw(r,e):t}function mw(r,e){return r instanceof wl?(function(i){return Hg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class bl extends jd{}class Ka extends jd{constructor(e){super(),this.elements=e}}function pw(r,e){const t=_w(e);for(const i of r.elements)t.some((a=>er(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Qa extends jd{constructor(e){super(),this.elements=e}}function gw(r,e){let t=_w(e);for(const i of r.elements)t=t.filter((a=>!er(a,i)));return{arrayValue:{values:t}}}class wl extends jd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cS(r){return yt(r.integerValue||r.doubleValue)}function _w(r){return Pc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Jc{constructor(e,t){this.field=e,this.transform=t}}function yx(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof Ka&&a instanceof Ka||i instanceof Qa&&a instanceof Qa?ml(i.elements,a.elements,er):i instanceof wl&&a instanceof wl?er(i.Ae,a.Ae):i instanceof bl&&a instanceof bl})(r.transform,e.transform)}class vx{constructor(e,t){this.version=e,this.transformResults=t}}class vt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Hd{}function yw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Bl(r.key,vt.none()):new zl(r.key,r.data,vt.none());{const t=r.data,i=Zt.empty();let a=new tt(pt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Pr(r.key,i,new Rn(a.toArray()),vt.none())}}function Tx(r,e,t){r instanceof zl?(function(a,l,c){const d=a.value.clone(),p=fS(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):r instanceof Pr?(function(a,l,c){if(!nd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=fS(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(vw(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ec(r,e,t,i){return r instanceof zl?(function(l,c,d,p){if(!nd(l.precondition,c))return d;const g=l.value.clone(),v=dS(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,e,t,i):r instanceof Pr?(function(l,c,d,p){if(!nd(l.precondition,c))return d;const g=dS(l.fieldTransforms,p,c),v=c.data;return v.setAll(vw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,i):(function(l,c,d){return nd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(r,e,t)}function Ex(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=mw(i.transform,a||null);l!=null&&(t===null&&(t=Zt.empty()),t.set(i.field,l))}return t||null}function hS(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&ml(i,a,((l,c)=>yx(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class zl extends Hd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Pr extends Hd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function vw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function fS(r,e,t){const i=new Map;de(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,_x(c,d,t[a]))}return i}function dS(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,gx(l,c,e))}return i}class Bl extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B_ extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class q_{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Tx(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ec(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ec(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=hw();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=yw(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(ge.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ce())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,((t,i)=>hS(t,i)))&&ml(this.baseMutations,e.baseMutations,((t,i)=>hS(t,i)))}}class F_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){de(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return dx})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new F_(e,t,i,a)}}class j_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Tw{constructor(e,t,i){this.alias=e,this.aggregateType=t,this.fieldPath=i}}class Ax{constructor(e,t){this.count=e,this.unchangedNames=t}}var qt,He;function Ew(r){switch(r){case q.OK:return he(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return he(15467,{code:r})}}function Aw(r){if(r===void 0)return Vt("GRPC error has no .code"),q.UNKNOWN;switch(r){case qt.OK:return q.OK;case qt.CANCELLED:return q.CANCELLED;case qt.UNKNOWN:return q.UNKNOWN;case qt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case qt.INTERNAL:return q.INTERNAL;case qt.UNAVAILABLE:return q.UNAVAILABLE;case qt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case qt.NOT_FOUND:return q.NOT_FOUND;case qt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case qt.ABORTED:return q.ABORTED;case qt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case qt.DATA_LOSS:return q.DATA_LOSS;default:return he(39323,{code:r})}}(He=qt||(qt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";let Xg=null;function Sx(r){if(Xg)throw new Error("a TestingHooksSpi instance is already set");Xg=r}function Sw(){return new TextEncoder}const Ix=new Ds([4294967295,4294967295],0);function mS(r){const e=Sw().encode(r),t=new cb;return t.update(e),new Uint8Array(t.digest())}function pS(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ds([t,i],0),new Ds([a,l],0)]}class H_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new hc(`Invalid padding: ${t}`);if(i<0)throw new hc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new hc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new hc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ds.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Ds.fromNumber(i)));return a.compare(Ix)===1&&(a=new Ds([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=mS(e),[i,a]=pS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new H_(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=mS(e),[i,a]=pS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wc(ge.min(),a,new ht(be),Cn(),Ce())}}class Zc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Zc(i,t,Ce(),Ce(),Ce())}}class id{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class Iw{constructor(e,t){this.targetId=e,this.Ce=t}}class bw{constructor(e,t,i=Et.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class gS{constructor(){this.ve=0,this.Fe=_S(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),t=Ce(),i=Ce();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:he(38017,{changeType:l})}})),new Zc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=_S()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class bx{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.He=zf(),this.Je=zf(),this.Ze=new ht(be)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(yd(l))if(i===0){const c=new ne(l.path);this.et(t,c,mt.newNoDocument(c,ge.min()))}else de(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}Xg?.lt((function(v,E,S,O,K){const Y={localCacheCount:v,existenceFilterCount:E.count,databaseId:S.database,projectId:S.projectId},ee=E.unchangedNames;return ee&&(Y.bloomFilter={applied:K===0,hashCount:ee?.hashCount??0,bitmapLength:ee?.bits?.bitmap?.length??0,padding:ee?.bits?.padding??0,mightContain:se=>O?.mightContain(se)??!1}),Y})(c,e.Ce,this.Ge.ht(),d,p))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Dr(i).toUint8Array()}catch(p){if(p instanceof qb)return Hn("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new H_(c,a,l)}catch(p){return Hn(p instanceof hc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&yd(d.target)){const p=new ne(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,mt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let i=Ce();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Wc(e,t,this.Ze,this.je,i);return this.je=Cn(),this.He=zf(),this.Je=zf(),this.Ze=new ht(be),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new gS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new tt(be),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new tt(be),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zf(){return new ht(ne.comparator)}function _S(){return new ht(ne.comparator)}const wx={asc:"ASCENDING",desc:"DESCENDING"},Rx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cx={and:"AND",or:"OR"};class Dx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $g(r,e){return r.useProto3Json||Kc(e)?e:{value:e}}function Rl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ww(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Vx(r,e){return Rl(r,e.toTimestamp())}function Nt(r){return de(!!r,49232),ge.fromTimestamp((function(t){const i=Cr(t);return new Xe(i.seconds,i.nanos)})(r))}function G_(r,e){return Jg(r,e).canonicalString()}function Jg(r,e){const t=(function(a){return new Pe(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Rw(r){const e=Pe.fromString(r);return de(kw(e),10190,{key:e.toString()}),e}function kc(r,e){return G_(r.databaseId,e.path)}function Zi(r,e){const t=Rw(e);if(t.get(1)!==r.databaseId.projectId)throw new W(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new W(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ne(Vw(t))}function Cw(r,e){return G_(r.databaseId,e)}function Dw(r){const e=Rw(r);return e.length===4?Pe.emptyPath():Vw(e)}function Wg(r){return new Pe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Vw(r){return de(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function yS(r,e,t){return{name:kc(r,e),fields:t.value.mapValue.fields}}function Gd(r,e,t){const i=Zi(r,e.name),a=Nt(e.updateTime),l=e.createTime?Nt(e.createTime):ge.min(),c=new Zt({mapValue:{fields:e.fields}}),d=mt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Nx(r,e){return"found"in e?(function(i,a){de(!!a.found,43571),a.found.name,a.found.updateTime;const l=Zi(i,a.found.name),c=Nt(a.found.updateTime),d=a.found.createTime?Nt(a.found.createTime):ge.min(),p=new Zt({mapValue:{fields:a.found.fields}});return mt.newFoundDocument(l,c,d,p)})(r,e):"missing"in e?(function(i,a){de(!!a.missing,3894),de(!!a.readTime,22933);const l=Zi(i,a.missing),c=Nt(a.readTime);return mt.newNoDocument(l,c)})(r,e):he(7234,{result:e})}function xx(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:he(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(de(v===void 0||typeof v=="string",58123),Et.fromBase64String(v||"")):(de(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Et.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?q.UNKNOWN:Aw(g.code);return new W(v,g.message||"")})(c);t=new bw(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Zi(r,i.document.name),l=Nt(i.document.updateTime),c=i.document.createTime?Nt(i.document.createTime):ge.min(),d=new Zt({mapValue:{fields:i.document.fields}}),p=mt.newFoundDocument(a,l,c,d),g=i.targetIds||[],v=i.removedTargetIds||[];t=new id(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Zi(r,i.document),l=i.readTime?Nt(i.readTime):ge.min(),c=mt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new id([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Zi(r,i.document),l=i.removedTargetIds||[];t=new id([],l,a,null)}else{if(!("filter"in e))return he(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new Ax(a,l),d=i.targetId;t=new Iw(d,c)}}return t}function Lc(r,e){let t;if(e instanceof zl)t={update:yS(r,e.key,e.value)};else if(e instanceof Bl)t={delete:kc(r,e.key)};else if(e instanceof Pr)t={update:yS(r,e.key,e.data),updateMask:Ux(e.fieldMask)};else{if(!(e instanceof B_))return he(16599,{dt:e.type});t={verify:kc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof bl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ka)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Qa)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof wl)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw he(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:Vx(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:he(27497)})(r,e.precondition)),t}function Zg(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?vt.updateTime(Nt(l.updateTime)):l.exists!==void 0?vt.exists(l.exists):vt.none()})(e.currentDocument):vt.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)de(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new bl;else if("appendMissingElements"in d){const v=d.appendMissingElements.values||[];p=new Ka(v)}else if("removeAllFromArray"in d){const v=d.removeAllFromArray.values||[];p=new Qa(v)}else"increment"in d?p=new wl(c,d.increment):he(16584,{proto:d});const g=pt.fromServerFormat(d.fieldPath);return new Jc(g,p)})(r,a))):[];if(e.update){e.update.name;const a=Zi(r,e.update.name),l=new Zt({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new Rn(g.map((v=>pt.fromServerFormat(v))))})(e.updateMask);return new Pr(a,l,c,t,i)}return new zl(a,l,t,i)}if(e.delete){const a=Zi(r,e.delete);return new Bl(a,t)}if(e.verify){const a=Zi(r,e.verify);return new B_(a,t)}return he(1463,{proto:e})}function Ox(r,e){return r&&r.length>0?(de(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?Nt(a.updateTime):Nt(l);return c.isEqual(ge.min())&&(c=Nt(l)),new vx(c,a.transformResults||[])})(t,e)))):[]}function Nw(r,e){return{documents:[Cw(r,e.path)]}}function Kd(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Cw(r,a);const l=(function(g){if(g.length!==0)return Mw(Ze.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:As(S.field),direction:Mx(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=$g(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function xw(r,e,t,i){const{ft:a,parent:l}=Kd(r,e),c={},d=[];let p=0;return t.forEach((g=>{const v=i?g.alias:"aggregate_"+p++;c[v]=g.alias,g.aggregateType==="count"?d.push({alias:v,count:{}}):g.aggregateType==="avg"?d.push({alias:v,avg:{field:As(g.fieldPath)}}):g.aggregateType==="sum"&&d.push({alias:v,sum:{field:As(g.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:a.structuredQuery},parent:a.parent},gt:c,parent:l}}function Ow(r){let e=Dw(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){de(i===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=Pw(E);return S instanceof Ze&&k_(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(K){return new Mc(sl(K.field),(function(ee){switch(ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Kc(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,O=E.values||[];return new Ms(O,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,O=E.values||[];return new Ms(O,S)})(t.endAt)),iw(e,a,c,l,d,"F",p,g)}function Px(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Pw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=sl(t.unaryFilter.field);return Fe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=sl(t.unaryFilter.field);return Fe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=sl(t.unaryFilter.field);return Fe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=sl(t.unaryFilter.field);return Fe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Fe.create(sl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ze.create(t.compositeFilter.filters.map((i=>Pw(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(r):he(30097,{filter:r})}function Mx(r){return wx[r]}function kx(r){return Rx[r]}function Lx(r){return Cx[r]}function As(r){return{fieldPath:r.canonicalString()}}function sl(r){return pt.fromServerFormat(r.fieldPath)}function Mw(r){return r instanceof Fe?(function(t){if(t.op==="=="){if(nS(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NAN"}};if(tS(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nS(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NOT_NAN"}};if(tS(t.value))return{unaryFilter:{field:As(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(t.field),op:kx(t.op),value:t.value}}})(r):r instanceof Ze?(function(t){const i=t.getFilters().map((a=>Mw(a)));return i.length===1?i[0]:{compositeFilter:{op:Lx(t.op),filters:i}}})(r):he(54877,{filter:r})}function Ux(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function kw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function Lw(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class Sr{constructor(e,t,i,a,l=ge.min(),c=ge.min(),d=Et.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Uw{constructor(e){this.yt=e}}function zx(r,e){let t;if(e.document)t=Gd(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ne.fromSegments(e.noDocument.path),a=Xa(e.noDocument.readTime);t=mt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const i=ne.fromSegments(e.unknownDocument.path),a=Xa(e.unknownDocument.version);t=mt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new Xe(a[0],a[1]);return ge.fromTimestamp(l)})(e.readTime)),t}function vS(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ed(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:kc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Rl(l,c.version.toTimestamp()),createTime:Rl(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Ya(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Ya(e.version)}}return i}function Ed(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ya(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xa(r){const e=new Xe(r.seconds,r.nanoseconds);return ge.fromTimestamp(e)}function Na(r,e){const t=(e.baseMutations||[]).map((l=>Zg(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>Zg(r.yt,l))),a=Xe.fromMillis(e.localWriteTimeMs);return new q_(e.batchId,a,t,i)}function fc(r){const e=Xa(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Xa(r.lastLimboFreeSnapshotVersion):ge.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return de(c===1,1966,{count:c}),dn(Ul(Dw(l.documents[0])))})(r.query):(function(l){return dn(Ow(l))})(r.query),new Sr(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Et.fromBase64String(r.resumeToken))}function zw(r,e){const t=Ya(e.snapshotVersion),i=Ya(e.lastLimboFreeSnapshotVersion);let a;a=yd(e.target)?Nw(r.yt,e.target):Kd(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ga(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function Qd(r){const e=Ow({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Td(e,e.limit,"L"):e}function _g(r,e){return new j_(e.largestBatchId,Zg(r.yt,e.overlayMutation))}function TS(r,e){const t=e.path.lastSegment();return[r,fn(e.path.popLast()),t]}function ES(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ya(i.readTime),documentKey:fn(i.documentKey.path),largestBatchId:i.largestBatchId}}class Bx{getBundleMetadata(e,t){return AS(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Xa(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return AS(e).put((function(a){return{bundleId:a.id,createTime:Ya(Nt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return SS(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:Qd(l.bundledQuery),readTime:Xa(l.readTime)}})(i)}))}saveNamedQuery(e,t){return SS(e).put((function(a){return{name:a.name,readTime:Ya(Nt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function AS(r){return Qt(r,Ld)}function SS(r){return Qt(r,Ud)}class Yd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Yd(e,i)}getOverlay(e,t){return tc(e).get(TS(this.userId,t)).next((i=>i?_g(this.serializer,i):null))}getOverlays(e,t){const i=Xi();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new j_(t,c);a.push(this.bt(e,d))})),L.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(fn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(tc(e).X(qg,d))})),L.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Xi(),l=fn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return tc(e).H(qg,c).next((d=>{for(const p of d){const g=_g(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Xi();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tc(e).ee({index:Pb,range:d},((p,g,v)=>{const E=_g(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return tc(e).put((function(a,l,c){const[d,p,g]=TS(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Lc(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function tc(r){return Qt(r,zd)}class qx{St(e){return Qt(e,x_)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t?.value;return i?Et.fromUint8Array(i):Et.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class xa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(yt(e.integerValue));else if("doubleValue"in e){const i=yt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Rc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Cr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Dr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?Qb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Fd(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):he(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=Al,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(yt(l)),this.Ot(a,t),this.Ct(i[a],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ne.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}xa.Wt=new xa;const Zo=255;function Fx(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function IS(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=Fx(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class jx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),i=IS(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=IS(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Zo),this.sn(255)}_n(){this.an(Zo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Zo?(this.sn(Zo),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Zo?(this.an(Zo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class Hx{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class Gx{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class nc{constructor(){this.cn=new jx,this.ascending=new Hx(this.cn),this.descending=new Gx(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Oa{constructor(e,t,i,a){this.hn=e,this.Pn=t,this.Tn=i,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new Oa(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:rd(this.Tn),directionalValue:rd(this.In),orderedDocumentKey:rd(t),documentKey:i.path.toArray()}}An(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function gs(r,e){let t=r.hn-e.hn;return t!==0?t:(t=bS(r.Tn,e.Tn),t!==0?t:(t=bS(r.In,e.In),t!==0?t:ne.comparator(r.Pn,e.Pn)))}function bS(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function rd(r){return SI()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function wS(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class RS{constructor(e){this.Vn=new tt(((t,i)=>pt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(de(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Ug(e);if(t!==void 0&&!this.pn(t))return!1;const i=Ca(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.pn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Vn.size>0){const d=this.Vn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.yn(d,p)||!this.wn(this.dn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.dn.length||!this.wn(this.dn[c++],d))return!1}return!0}bn(){if(this.fn)return null;let e=new tt(pt.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Ua(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Ua(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Ua(i.field,i.dir==="asc"?0:1)));return new gl(gl.UNKNOWN_ID,this.collectionId,t,_l.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function Bw(r){if(de(r instanceof Fe||r instanceof Ze,20012),r instanceof Fe){if(r instanceof nw){const t=r.value.arrayValue?.values?.map((i=>Fe.create(r.field,"==",i)))||[];return Ze.create(t,"or")}return r}const e=r.filters.map((t=>Bw(t)));return Ze.create(e,r.op)}function Kx(r){if(r.getFilters().length===0)return[];const e=n_(Bw(r));return de(qw(e),7391),e_(e)||t_(e)?[e]:e.getFilters()}function e_(r){return r instanceof Fe}function t_(r){return r instanceof Ze&&k_(r)}function qw(r){return e_(r)||t_(r)||(function(t){if(t instanceof Ze&&Gg(t)){for(const i of t.getFilters())if(!e_(i)&&!t_(i))return!1;return!0}return!1})(r)}function n_(r){if(de(r instanceof Fe||r instanceof Ze,34018),r instanceof Fe)return r;if(r.filters.length===1)return n_(r.filters[0]);const e=r.filters.map((i=>n_(i)));let t=Ze.create(e,r.op);return t=Ad(t),qw(t)?t:(de(t instanceof Ze,64498),de(Il(t),40251),de(t.filters.length>1,57927),t.filters.reduce(((i,a)=>K_(i,a))))}function K_(r,e){let t;return de(r instanceof Fe||r instanceof Ze,38388),de(e instanceof Fe||e instanceof Ze,25473),t=r instanceof Fe?e instanceof Fe?(function(a,l){return Ze.create([a,l],"and")})(r,e):CS(r,e):e instanceof Fe?CS(e,r):(function(a,l){if(de(a.filters.length>0&&l.filters.length>0,48005),Il(a)&&Il(l))return Zb(a,l.getFilters());const c=Gg(a)?a:l,d=Gg(a)?l:a,p=c.filters.map((g=>K_(g,d)));return Ze.create(p,"or")})(r,e),Ad(t)}function CS(r,e){if(Il(e))return Zb(e,r.getFilters());{const t=e.filters.map((i=>K_(r,i)));return Ze.create(t,"or")}}function Ad(r){if(de(r instanceof Fe||r instanceof Ze,11850),r instanceof Fe)return r;const e=r.getFilters();if(e.length===1)return Ad(e[0]);if(Jb(r))return r;const t=e.map((a=>Ad(a))),i=[];return t.forEach((a=>{a instanceof Fe?i.push(a):a instanceof Ze&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:Ze.create(i,r.op)}class Qx{constructor(){this.Sn=new Q_}addToCollectionParentIndex(e,t){return this.Sn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Gn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Gn.min())}updateCollectionGroup(e,t,i){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class Q_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new tt(Pe.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new tt(Pe.comparator)).toArray()}}const DS="IndexedDbIndexManager",Bf=new Uint8Array(0);class Yx{constructor(e,t){this.databaseId=t,this.Dn=new Q_,this.Cn=new Or((i=>Ga(i)),((i,a)=>Yc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:i,parent:fn(a)};return VS(e).put(l)}return L.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[vb(t),""],!1,!0);return VS(e).H(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Yi(c.parent))}return i}))}addFieldIndex(e,t){const i=ic(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=tl(e);return l.next((d=>{c.put(ES(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=ic(e),a=tl(e),l=el(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ic(e),i=el(e),a=tl(e);return t.X().next((()=>i.X())).next((()=>a.X()))}createTargetIndexes(e,t){return L.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new RS(i).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=el(e);let a=!0;const l=new Map;return L.forEach(this.vn(t),(c=>this.Fn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ce();const d=[];return L.forEach(l,((p,g)=>{te(DS,`Using index ${(function(ue){return`id=${ue.indexId}|cg=${ue.collectionGroup}|f=${ue.fields.map((Se=>`${Se.fieldPath}:${Se.kind}`)).join(",")}`})(p)} to execute ${Ga(t)}`);const v=(function(ue,Se){const Re=Ug(Se);if(Re===void 0)return null;for(const _e of vd(ue,Re.fieldPath))switch(_e.op){case"array-contains-any":return _e.value.arrayValue.values||[];case"array-contains":return[_e.value]}return null})(g,p),E=(function(ue,Se){const Re=new Map;for(const _e of Ca(Se))for(const w of vd(ue,_e.fieldPath))switch(w.op){case"==":case"in":Re.set(_e.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return Re.set(_e.fieldPath.canonicalString(),w.value),Array.from(Re.values())}return null})(g,p),S=(function(ue,Se){const Re=[];let _e=!0;for(const w of Ca(Se)){const b=w.kind===0?oS(ue,w.fieldPath,ue.startAt):lS(ue,w.fieldPath,ue.startAt);Re.push(b.value),_e&&(_e=b.inclusive)}return new Ms(Re,_e)})(g,p),O=(function(ue,Se){const Re=[];let _e=!0;for(const w of Ca(Se)){const b=w.kind===0?lS(ue,w.fieldPath,ue.endAt):oS(ue,w.fieldPath,ue.endAt);Re.push(b.value),_e&&(_e=b.inclusive)}return new Ms(Re,_e)})(g,p),K=this.Mn(p,g,S),Y=this.Mn(p,g,O),ee=this.xn(p,g,E),se=this.On(p.indexId,v,K,S.inclusive,Y,O.inclusive,ee);return L.forEach(se,(le=>i.Z(le,t.limit).next((ue=>{ue.forEach((Se=>{const Re=ne.fromSegments(Se.documentKey);c.has(Re)||(c=c.add(Re),d.push(Re))}))}))))})).next((()=>d))}return L.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=Kx(Ze.create(e.filters,"and")).map((i=>Qg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),v=[];for(let E=0;E<p;++E){const S=t?this.Nn(t[E/g]):Bf,O=this.Bn(e,S,i[E%g],a),K=this.Ln(e,S,l[E%g],c),Y=d.map((ee=>this.Bn(e,S,ee,!0)));v.push(...this.createRange(O,K,Y))}return v}Bn(e,t,i,a){const l=new Oa(e,ne.empty(),t,i);return a?l:l.En()}Ln(e,t,i,a){const l=new Oa(e,ne.empty(),t,i);return a?l.En():l}Fn(e,t){const i=new RS(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.gn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.vn(t);return L.forEach(a,(l=>this.Fn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new tt(pt.comparator),v=!1;for(const E of p.filters)for(const S of E.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?v=!0:g=g.add(S.field));for(const E of p.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(v?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}kn(e,t){const i=new nc;for(const a of Ca(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.ln(a.kind);xa.Wt.Dt(l,c)}return i.un()}Nn(e){const t=new nc;return xa.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new nc;return xa.Wt.Dt(Ha(this.databaseId,t),i.ln((function(l){const c=Ca(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let a=[];a.push(new nc);let l=0;for(const c of Ca(e)){const d=i[l++];for(const p of a)if(this.qn(t,c.fieldPath)&&Pc(d))a=this.Un(a,c,d);else{const g=p.ln(c.kind);xa.Wt.Dt(d,g)}}return this.$n(a)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new nc;p.seed(d.un()),xa.Wt.Dt(c,p.ln(t.kind)),l.push(p)}return l}qn(e,t){return!!e.filters.find((i=>i instanceof Fe&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=ic(e),a=tl(e);return(t?i.H(Bg,IDBKeyRange.bound(t,t)):i.H()).next((l=>{const c=[];return L.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(v,E){const S=E?new _l(E.sequenceNumber,new Gn(Xa(E.readTime),new ne(Yi(E.documentKey)),E.largestBatchId)):_l.empty(),O=v.fields.map((([K,Y])=>new Ua(pt.fromServerFormat(K),Y)));return new gl(v.indexId,v.collectionGroup,O,S)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:be(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=ic(e),l=tl(e);return this.Wn(e).next((c=>a.H(Bg,IDBKeyRange.bound(t,t)).next((d=>L.forEach(d,(p=>l.put(ES(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return L.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),L.forEach(d,(p=>this.Qn(e,a,p).next((g=>{const v=this.Gn(l,p);return g.isEqual(v)?L.resolve():this.zn(e,l,p,g,v)})))))))}))}jn(e,t,i,a){return el(e).put(a.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,a){return el(e).delete(a.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const a=el(e);let l=new tt(gs);return a.ee({index:Ob,range:IDBKeyRange.only([i.indexId,this.uid,rd(this.Kn(i,t))])},((c,d)=>{l=l.add(new Oa(i.indexId,t,wS(d.arrayValue),wS(d.directionalValue)))})).next((()=>l))}Gn(e,t){let i=new tt(gs);const a=this.kn(t,e);if(a==null)return i;const l=Ug(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Pc(c))for(const d of c.arrayValue.values||[])i=i.add(new Oa(t.indexId,e.key,this.Nn(d),a))}else i=i.add(new Oa(t.indexId,e.key,Bf,a));return i}zn(e,t,i,a,l){te(DS,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,v,E,S){const O=p.getIterator(),K=g.getIterator();let Y=Wo(O),ee=Wo(K);for(;Y||ee;){let se=!1,le=!1;if(Y&&ee){const ue=v(Y,ee);ue<0?le=!0:ue>0&&(se=!0)}else Y!=null?le=!0:se=!0;se?(E(ee),ee=Wo(K)):le?(S(Y),Y=Wo(O)):(Y=Wo(O),ee=Wo(K))}})(a,l,gs,(d=>{c.push(this.jn(e,t,i,d))}),(d=>{c.push(this.Hn(e,t,i,d))})),L.waitFor(c)}Wn(e){let t=1;return tl(e).ee({index:xb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>gs(c,d))).filter(((c,d,p)=>!d||gs(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=gs(c,e),p=gs(c,t);if(d===0)a[0]=e.En();else if(d>0&&p<0)a.push(c),a.push(c.En());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Jn(a[c],a[c+1]))return[];const d=a[c].An(this.uid,Bf,ne.empty()),p=a[c+1].An(this.uid,Bf,ne.empty());l.push(IDBKeyRange.bound(d,p))}return l}Jn(e,t){return gs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NS)}getMinOffset(e,t){return L.mapArray(this.vn(t),(i=>this.Fn(e,i).next((a=>a||he(44426))))).next(NS)}}function VS(r){return Qt(r,Vc)}function el(r){return Qt(r,yc)}function ic(r){return Qt(r,N_)}function tl(r){return Qt(r,_c)}function NS(r){de(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;C_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Gn(e.readTime,e.documentKey,t)}const xS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fw=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}function jw(r,e,t){const i=r.store(yi),a=r.store(yl),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((v,E,S)=>(d++,S.delete())));l.push(p.next((()=>{de(d===1,47070,{batchId:t.batchId})})));const g=[];for(const v of t.mutations){const E=Db(e,v.key.path,t.batchId);l.push(a.delete(E)),g.push(v.key)}return L.waitFor(l).next((()=>g))}function Sd(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw he(14731);e=r.noDocument}return JSON.stringify(e).length}hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(Fw,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class Xd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Zn={}}static wt(e,t,i,a){de(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Xd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).ee({index:Ma,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=al(e),c=_s(e);return c.add({}).next((d=>{de(typeof d=="number",49019);const p=new q_(d,t,i,a),g=(function(O,K,Y){const ee=Y.baseMutations.map((le=>Lc(O.yt,le))),se=Y.mutations.map((le=>Lc(O.yt,le)));return{userId:K,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ee,mutations:se}})(this.serializer,this.userId,p),v=[];let E=new tt(((S,O)=>be(S.canonicalString(),O.canonicalString())));for(const S of a){const O=Db(this.userId,S.key.path,d);E=E.add(S.key.path.popLast()),v.push(c.put(g)),v.push(l.put(O,S2))}return E.forEach((S=>{v.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Zn[d]=p.keys()})),L.waitFor(v).next((()=>p))}))}lookupMutationBatch(e,t){return _s(e).get(t).next((i=>i?(de(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Na(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?L.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return _s(e).ee({index:Ma,range:a},((c,d,p)=>{d.userId===this.userId&&(de(d.batchId>=i,47524,{Yn:i}),l=Na(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Vs;return _s(e).ee({index:Ma,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Vs],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).H(Ma,t).next((i=>i.map((a=>Na(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Jf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return al(e).ee({range:a},((c,d,p)=>{const[g,v,E]=c,S=Yi(v);if(g===this.userId&&t.path.isEqual(S))return _s(e).get(E).next((O=>{if(!O)throw he(61480,{er:c,batchId:E});de(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:E}),l.push(Na(this.serializer,O))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(be);const a=[];return t.forEach((l=>{const c=Jf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=al(e).ee({range:d},((g,v,E)=>{const[S,O,K]=g,Y=Yi(O);S===this.userId&&l.path.isEqual(Y)?i=i.add(K):E.done()}));a.push(p)})),L.waitFor(a).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Jf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new tt(be);return al(e).ee({range:c},((p,g,v)=>{const[E,S,O]=p,K=Yi(S);E===this.userId&&i.isPrefixOf(K)?K.length===a&&(d=d.add(O)):v.done()})).next((()=>this.tr(e,d)))}tr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(_s(e).get(l).next((c=>{if(c===null)throw he(35274,{batchId:l});de(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(Na(this.serializer,c))})))})),L.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return jw(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),L.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return al(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=Yi(l[1]);a.push(p)}else d.done()})).next((()=>{de(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return Hw(e,this.userId,t)}ir(e){return Gw(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Vs,lastStreamToken:""}))}}function Hw(r,e,t){const i=Jf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return al(r).ee({range:l,Y:!0},((d,p,g)=>{const[v,E,S]=d;v===e&&E===a&&(c=!0),g.done()})).next((()=>c))}function _s(r){return Qt(r,yi)}function al(r){return Qt(r,yl)}function Gw(r){return Qt(r,Cc)}class $a{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new $a(0)}static ar(){return new $a(-1)}}class Xx{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new $a(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>ge.fromTimestamp(new Xe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>nl(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(de(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return nl(e).ee(((c,d)=>{const p=fc(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>L.waitFor(l))).next((()=>a))}forEachTarget(e,t){return nl(e).ee(((i,a)=>{const l=fc(a);t(l)}))}ur(e){return OS(e).get(_d).next((t=>(de(t!==null,2888),t)))}cr(e,t){return OS(e).put(_d,t)}lr(e,t){return nl(e).put(zw(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Ga(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return nl(e).ee({range:a,index:Nb},((c,d,p)=>{const g=fc(d);Yc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=Ss(e);return t.forEach((c=>{const d=fn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),L.waitFor(a)}removeMatchingKeys(e,t,i){const a=Ss(e);return L.forEach(t,(l=>{const c=fn(l.path);return L.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=Ss(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Ss(e);let l=Ce();return a.ee({range:i,Y:!0},((c,d,p)=>{const g=Yi(c[1]),v=new ne(g);l=l.add(v)})).next((()=>l))}containsKey(e,t){const i=fn(t.path),a=IDBKeyRange.bound([i],[vb(i)],!1,!0);let l=0;return Ss(e).ee({index:V_,Y:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return nl(e).get(t).next((i=>i?fc(i):null))}}function nl(r){return Qt(r,vl)}function OS(r){return Qt(r,za)}function Ss(r){return Qt(r,Tl)}const PS="LruGarbageCollector",Kw=1048576;function MS([r,e],[t,i]){const a=be(r,t);return a===0?be(e,i):a}class $x{constructor(e){this.Pr=e,this.buffer=new tt(MS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();MS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qw{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){te(PS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){js(t)?te(PS,"Ignoring IndexedDB error during garbage collection: ",t):await Fs(t)}await this.Ar(3e5)}))}}class Jx{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(wn.ce);const i=new $x(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(xS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xS):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(g=Date.now(),il()<=qe.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function Yw(r,e){return new Jx(r,e)}class Wx{constructor(e,t){this.db=e,this.garbageCollector=Yw(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,a)=>t(a)))}addReference(e,t,i){return qf(e,i)}removeReference(e,t,i){return qf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return qf(e,t)}wr(e,t){return(function(a,l){let c=!1;return Gw(a).te((d=>Hw(a,d,l).next((p=>(p&&(c=!0),L.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((c,d)=>{if(d<=t){const p=this.wr(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,ge.min()),Ss(e).delete((function(E){return[0,fn(E.path)]})(c)))))}));a.push(p)}})).next((()=>L.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return qf(e,t)}yr(e,t){const i=Ss(e);let a,l=wn.ce;return i.ee({index:V_},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==wn.ce&&t(new ne(Yi(a)),l),l=g,a=p):l=wn.ce})).next((()=>{l!==wn.ce&&t(new ne(Yi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qf(r,e){return Ss(r).put((function(i,a){return{targetId:0,path:fn(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}class Xw{constructor(){this.changes=new Or((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?L.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zx{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return wa(e).put(i)}removeEntry(e,t,i){return wa(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Ed(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=mt.newInvalidDocument(t);return wa(e).ee({index:Wf,range:IDBKeyRange.only(rc(t))},((a,l)=>{i=this.Sr(t,l)})).next((()=>i))}Dr(e,t){let i={size:0,document:mt.newInvalidDocument(t)};return wa(e).ee({index:Wf,range:IDBKeyRange.only(rc(t))},((a,l)=>{i={document:this.Sr(t,l),size:Sd(l)}})).next((()=>i))}getEntries(e,t){let i=Cn();return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c)})).next((()=>i))}vr(e,t){let i=Cn(),a=new ht(ne.comparator);return this.Cr(e,t,((l,c)=>{const d=this.Sr(l,c);i=i.insert(l,d),a=a.insert(l,Sd(c))})).next((()=>({documents:i,Fr:a})))}Cr(e,t,i){if(t.isEmpty())return L.resolve();let a=new tt(US);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(rc(a.first()),rc(a.last())),c=a.getIterator();let d=c.getNext();return wa(e).ee({index:Wf,range:l},((p,g,v)=>{const E=ne.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&US(d,E)<0;)i(d,null),d=c.getNext();d&&d.isEqual(E)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?v.j(rc(d)):v.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Ed(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wa(e).H(IDBKeyRange.bound(d,p,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let v=Cn();for(const E of g){const S=this.Sr(ne.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);S.isFoundDocument()&&($c(t,S)||a.has(S.key))&&(v=v.insert(S.key,S))}return v}))}getAllFromCollectionGroup(e,t,i,a){let l=Cn();const c=LS(t,i),d=LS(t,Gn.max());return wa(e).ee({index:Vb,range:IDBKeyRange.bound(c,d,!0)},((p,g,v)=>{const E=this.Sr(ne.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new eO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return kS(e).get(zg).next((t=>(de(!!t,20021),t)))}br(e,t){return kS(e).put(zg,t)}Sr(e,t){if(t){const i=zx(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(ge.min())))return i}return mt.newInvalidDocument(e)}}function $w(r){return new Zx(r)}class eO extends Xw{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Or((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new tt(((l,c)=>be(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=vS(this.Mr.serializer,c);a=a.add(l.path.popLast());const g=Sd(p);i+=g-d.size,t.push(this.Mr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=vS(this.Mr.serializer,c.convertToNoDocument(ge.min()));t.push(this.Mr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,i)),L.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:a})=>(a.forEach(((l,c)=>{this.Or.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function kS(r){return Qt(r,Dc)}function wa(r){return Qt(r,gd)}function rc(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LS(r,e){const t=e.documentKey.path.toArray();return[r,Ed(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function US(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=be(t[l],i[l]),a)return a;return a=be(t.length,i.length),a||(a=be(t[t.length-2],i[i.length-2]),a||be(t[t.length-1],i[i.length-1]))}class tO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Jw{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Ec(i.mutation,a,Rn.empty(),Xe.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ce()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ce()){const a=Xi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=cc();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Xi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ce())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=Cn();const c=Tc(),d=(function(){return Tc()})();return t.forEach(((p,g)=>{const v=i.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Pr)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Ec(v.mutation,g,v.mutation.getFieldMask(),Xe.now())):c.set(g.key,Rn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new tO(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Tc();let a=new ht(((c,d)=>c-d)),l=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=i.get(p)||Rn.empty();v=d.applyToLocalView(g,v),i.set(p,v);const E=(a.get(d.batchId)||Ce()).add(p);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=hw();v.forEach((S=>{if(!l.has(S)){const O=yw(t.get(S),i.get(S));O!==null&&E.set(S,O),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return L.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return ox(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):L_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):L.resolve(Xi());let d=pl,p=l;return c.next((g=>L.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?L.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ce()))).next((v=>({batchId:d,changes:cw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next((i=>{let a=cc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=cc();return this.indexManager.getCollectionParents(e,l).next((d=>L.forEach(d,(p=>{const g=(function(E,S){return new xr(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((v=>{v.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,mt.newInvalidDocument(v)))}));let d=cc();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Ec(v.mutation,g,Rn.empty(),Xe.now()),$c(t,g)&&(d=d.insert(p,g))})),d}))}}class nO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return L.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Nt(a.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:Qd(a.bundledQuery),readTime:Nt(a.readTime)}})(t)),L.resolve()}}class iO{constructor(){this.overlays=new ht(ne.comparator),this.Lr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Xi();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),L.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),L.resolve()}getOverlaysForCollection(e,t,i){const a=Xi(),l=t.length+1,c=new ne(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return L.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new ht(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=l.get(g.largestBatchId);v===null&&(v=Xi(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Xi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return L.resolve(d)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new j_(t,i));let l=this.Lr.get(t);l===void 0&&(l=Ce(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}class rO{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}class Y_{constructor(){this.kr=new tt(Jt.Kr),this.qr=new tt(Jt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Jt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Jt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new ne(new Pe([])),i=new Jt(t,e),a=new Jt(t,e+1),l=[];return this.qr.forEachInRange([i,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ne(new Pe([])),i=new Jt(t,e),a=new Jt(t,e+1);let l=Ce();return this.qr.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Jt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Jt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ne.comparator(e.key,t.key)||be(e.Hr,t.Hr)}static Ur(e,t){return be(e.Hr,t.Hr)||ne.comparator(e.key,t.key)}}class sO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new tt(Jt.Kr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new q_(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new Jt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return L.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Vs:this.Yn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Jt(t,0),a=new Jt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),L.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(be);return t.forEach((a=>{const l=new Jt(a,0),c=new Jt(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{i=i.add(d.Hr)}))})),L.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ne.isDocumentKey(l)||(l=l.child(""));const c=new Jt(new ne(l),0);let d=new tt(be);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),L.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){de(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return L.forEach(t.mutations,(a=>{const l=new Jt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Jt(t,0),a=this.Jr.firstAfterOrEqual(i);return L.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class aO{constructor(e){this.ti=e,this.docs=(function(){return new ht(ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return L.resolve(i?i.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let i=Cn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():mt.newInvalidDocument(a))})),L.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Cn();const c=t.path,d=new ne(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||C_(Ib(v),i)<=0||(a.has(v.key)||$c(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return L.resolve(l)}getAllFromCollectionGroup(e,t,i,a){he(9500)}ni(e,t){return L.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new oO(this)}getSize(e){return L.resolve(this.size)}}class oO extends Xw{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),L.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class lO{constructor(e){this.persistence=e,this.ri=new Or((t=>Ga(t)),Yc),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.ii=0,this.si=new Y_,this.targetCount=0,this.oi=$a._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),L.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new $a(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.lr(t),L.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),L.waitFor(l).next((()=>a))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return L.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),L.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),L.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return L.resolve(i)}containsKey(e,t){return L.resolve(this.si.containsKey(t))}}class X_{constructor(e,t){this._i={},this.overlays={},this.ai=new wn(0),this.ui=!1,this.ui=!0,this.ci=new rO,this.referenceDelegate=e(this),this.li=new lO(this),this.indexManager=new Qx,this.remoteDocumentCache=(function(a){return new aO(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new Uw(t),this.Pi=new nO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new sO(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){te("MemoryPersistence","Starting transaction:",e);const a=new uO(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return L.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class uO extends wb{constructor(e){super(),this.currentSequenceNumber=e}}class $d{constructor(e){this.persistence=e,this.Ri=new Y_,this.Ai=null}static Vi(e){return new $d(e)}get di(){if(this.Ai)return this.Ai;throw he(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),L.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,(i=>{const a=ne.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,ge.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Id{constructor(e,t){this.persistence=e,this.fi=new Or((i=>fn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=Yw(this,t)}static Vi(e,t){return new Id(e,t)}Ti(){}Ii(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return L.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?L.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(i++,l.removeEntry(c,ge.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),L.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ed(e.data.value)),t}wr(e,t,i){return L.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return L.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cO{constructor(e){this.serializer=e}k(e,t,i,a){const l=new kd("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(Qc)})(e),(function(p){p.createObjectStore(Cc,{keyPath:A2}),p.createObjectStore(yi,{keyPath:XA,autoIncrement:!0}).createIndex(Ma,$A,{unique:!0}),p.createObjectStore(yl)})(e),zS(e),(function(p){p.createObjectStore(Da)})(e));let c=L.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(Tl),p.deleteObjectStore(vl),p.deleteObjectStore(za)})(e),zS(e)),c=c.next((()=>(function(p){const g=p.store(za),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return g.put(_d,v)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(yi).H().next((E=>{p.deleteObjectStore(yi),p.createObjectStore(yi,{keyPath:XA,autoIncrement:!0}).createIndex(Ma,$A,{unique:!0});const S=g.store(yi),O=E.map((K=>S.put(K)));return L.waitFor(O)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(El,{keyPath:N2})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.gi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(Dc)})(e),this.pi(l))))),i<7&&a>=7&&(c=c.next((()=>this.yi(l)))),i<8&&a>=8&&(c=c.next((()=>this.wi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.bi(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(Ld,{keyPath:x2})})(e),(function(p){p.createObjectStore(Ud,{keyPath:O2})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(zd,{keyPath:B2});g.createIndex(qg,q2,{unique:!1}),g.createIndex(Pb,F2,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(gd,{keyPath:I2});g.createIndex(Wf,b2),g.createIndex(Vb,w2)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(Da)))),i<14&&a>=14&&(c=c.next((()=>this.Di(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(N_,{keyPath:P2,autoIncrement:!0}).createIndex(Bg,M2,{unique:!1}),p.createObjectStore(_c,{keyPath:k2}).createIndex(xb,L2,{unique:!1}),p.createObjectStore(yc,{keyPath:U2}).createIndex(Ob,z2,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(_c).clear()})).next((()=>{t.objectStore(yc).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(x_,{keyPath:j2})})(e)}))),i<18&&a>=18&&SI()&&(c=c.next((()=>{t.objectStore(_c).clear()})).next((()=>{t.objectStore(yc).clear()}))),c}pi(e){let t=0;return e.store(Da).ee(((i,a)=>{t+=Sd(a)})).next((()=>{const i={byteSize:t};return e.store(Dc).put(zg,i)}))}gi(e){const t=e.store(Cc),i=e.store(yi);return t.H().next((a=>L.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Vs],[l.userId,l.lastAcknowledgedBatchId]);return i.H(Ma,c).next((d=>L.forEach(d,(p=>{de(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=Na(this.serializer,p);return jw(e,l.userId,g).next((()=>{}))}))))}))))}yi(e){const t=e.store(Tl),i=e.store(Da);return e.store(za).get(_d).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new Pe(c),g=(function(E){return[0,fn(E)]})(p);l.push(t.get(g).next((v=>v?L.resolve():(E=>t.put({targetId:0,path:fn(E),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>L.waitFor(l)))}))}wi(e,t){e.createObjectStore(Vc,{keyPath:V2});const i=t.store(Vc),a=new Q_,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:fn(p)})}};return t.store(Da).ee({Y:!0},((c,d)=>{const p=new Pe(c);return l(p.popLast())})).next((()=>t.store(yl).ee({Y:!0},(([c,d,p],g)=>{const v=Yi(d);return l(v.popLast())}))))}bi(e){const t=e.store(vl);return t.ee(((i,a)=>{const l=fc(a),c=zw(this.serializer,l);return t.put(c)}))}Si(e,t){const i=t.store(Da),a=[];return i.ee(((l,c)=>{const d=t.store(gd),p=(function(E){return E.document?new ne(Pe.fromString(E.document.name).popFirst(5)):E.noDocument?ne.fromSegments(E.noDocument.path):E.unknownDocument?ne.fromSegments(E.unknownDocument.path):he(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>L.waitFor(a)))}Di(e,t){const i=t.store(yi),a=$w(this.serializer),l=new X_($d.Vi,this.serializer.yt);return i.H().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Ce();Na(this.serializer,p).keys().forEach((v=>g=g.add(v))),d.set(p.userId,g)})),L.forEach(d,((p,g)=>{const v=new Wt(g),E=Yd.wt(this.serializer,v),S=l.getIndexManager(v),O=Xd.wt(v,this.serializer,S,l.referenceDelegate);return new Jw(a,O,E,S).recalculateAndSaveOverlaysForDocumentKeys(new Fg(t,wn.ce),p).next()}))}))}}function zS(r){r.createObjectStore(Tl,{keyPath:C2}).createIndex(V_,D2,{unique:!0}),r.createObjectStore(vl,{keyPath:"targetId"}).createIndex(Nb,R2,{unique:!0}),r.createObjectStore(za)}const ys="IndexedDbPersistence",yg=18e5,vg=5e3,Tg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ww="main";class $_{constructor(e,t,i,a,l,c,d,p,g,v,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=l,this.window=c,this.document=d,this.Fi=g,this.Mi=v,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=S=>Promise.resolve(),!$_.v())throw new W(q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wx(this,a),this.Ki=t+Ww,this.serializer=new Uw(p),this.qi=new Wi(this.Ki,this.xi,new cO(this.serializer)),this.ci=new qx,this.li=new Xx(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$w(this.serializer),this.Pi=new Bx,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Vt(ys,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(q.FAILED_PRECONDITION,Tg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new wn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(js(e))return te(ys,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te(ys,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return sc(e).get(Jo).next((t=>L.resolve(this.Xi(t))))}Yi(e){return Ff(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,yg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Qt(t,El);return i.H().next((a=>{const l=this.ns(a,yg),c=a.filter((d=>l.indexOf(d)===-1));return L.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?L.resolve(!0):sc(e).get(Jo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,vg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new W(q.FAILED_PRECONDITION,Tg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ff(e).H().next((i=>this.ns(i,vg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&te(ys,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Qc,El],(e=>{const t=new Fg(e,wn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Ff(e).H().next((t=>this.ns(t,yg).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Xd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yx(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Yd.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){te(ys,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?K2:p===17?Ub:p===16?G2:p===15?O_:p===14?Lb:p===13?kb:p===12?H2:p===11?Mb:void he(60245)})(this.xi);let c;return this.qi.runTransaction(e,a,l,(d=>(c=new Fg(d,this.ai?this.ai.next():wn.ce),t==="readwrite-primary"?this.ji(c).next((p=>!!p||this.Hi(c))).next((p=>{if(!p)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new W(q.FAILED_PRECONDITION,bb);return i(c)})).next((p=>this.Zi(c).next((()=>p)))):this.Ps(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Ps(e){return sc(e).get(Jo).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,vg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new W(q.FAILED_PRECONDITION,Tg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sc(e).put(Jo,t)}static v(){return Wi.v()}Ji(e){const t=sc(e);return t.get(Jo).next((i=>this.Xi(i)?(te(ys,"Releasing primary lease."),t.delete(Jo)):L.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Vt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;AI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return te(ys,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Vt(ys,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sc(r){return Qt(r,Qc)}function Ff(r){return Qt(r,El)}function J_(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class W_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=Ce(),a=Ce();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new W_(e,t.fromCache,i,a)}}class hO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Zw{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return AI()?8:Rb(Gt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new hO;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(il()<=qe.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(il()<=qe.DEBUG&&te("QueryEngine","Query:",rl(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(il()<=qe.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(t))):L.resolve())}gs(e,t){if(uS(t))return L.resolve(null);let i=dn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Td(t,null,"F"),i=dn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ce(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,Td(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,i,a){return uS(t)||a.isEqual(ge.min())?L.resolve(null):this.fs.getDocuments(e,i).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,i,a)?L.resolve(null):(il()<=qe.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),rl(t)),this.Ds(e,c,t,Sb(a,pl)).next((d=>d)))}))}bs(e,t){let i=new tt(lw(e));return t.forEach(((a,l)=>{$c(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return il()<=qe.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",rl(t)),this.fs.getDocumentsMatchingQuery(e,t,Gn.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Z_="LocalStore",fO=3e8;class dO{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new ht(be),this.Fs=new Or((l=>Ga(l)),Yc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jw(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function e0(r,e,t,i){return new dO(r,e,t,i)}async function t0(r,e){const t=re(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Ce();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function mO(r,e){const t=re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,S=E.keys();let O=L.resolve();return S.forEach((K=>{O=O.next((()=>v.getEntry(p,K))).next((Y=>{const ee=g.docVersions.get(K);de(ee!==null,48541),Y.version.compareTo(ee)<0&&(E.applyToRemoteDocument(Y,g),Y.isValidDocument()&&(Y.setReadTime(g.commitVersion),v.addEntry(Y)))}))})),O.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ce();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function n0(r){const e=re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function pO(r,e){const t=re(r),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=a.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Et.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):v.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(v.resumeToken,i)),a=a.insert(E,O),(function(Y,ee,se){return Y.resumeToken.approximateByteSize()===0||ee.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=fO?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(S,O,v)&&d.push(t.li.updateTargetData(l,O))}));let p=Cn(),g=Ce();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(i0(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!i.isEqual(ge.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(v)}return L.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function i0(r,e,t){let i=Ce(),a=Ce();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Cn();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(ge.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):te(Z_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function gO(r,e){const t=re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Vs),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Cl(r,e){const t=re(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,L.resolve(a)):t.li.allocateTargetId(i).next((c=>(a=new Sr(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Dl(r,e,t){const i=re(r),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!js(c))throw c;te(Z_,`Failed to update sequence numbers for target ${e}: ${c}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function bd(r,e,t){const i=re(r);let a=ge.min(),l=Ce();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=re(p),S=E.Fs.get(v);return S!==void 0?L.resolve(E.vs.get(S)):E.li.getTargetData(g,v)})(i,c,dn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:ge.min(),t?l:Ce()))).next((d=>(a0(i,ow(e),d),{documents:d,ks:l})))))}function r0(r,e){const t=re(r),i=re(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function s0(r,e){const t=re(r),i=t.Ms.get(e)||ge.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,Sb(i,pl),Number.MAX_SAFE_INTEGER))).then((a=>(a0(t,e,a),a)))}function a0(r,e,t){let i=r.Ms.get(e)||ge.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}async function _O(r,e,t,i){const a=re(r);let l=Ce(),c=Cn();for(const g of t){const v=e.Ks(g.metadata.name);g.document&&(l=l.add(v));const E=e.qs(g);E.setReadTime(e.Us(g.metadata.readTime)),c=c.insert(v,E)}const d=a.xs.newChangeBuffer({trackRemovals:!0}),p=await Cl(a,(function(v){return dn(Ul(Pe.fromString(`__bundle__/docs/${v}`)))})(i));return a.persistence.runTransaction("Apply bundle documents","readwrite",(g=>i0(g,d,c).next((v=>(d.apply(g),v))).next((v=>a.li.removeMatchingKeysForTargetId(g,p.targetId).next((()=>a.li.addMatchingKeys(g,l,p.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(g,v.Bs,v.Ls))).next((()=>v.Bs))))))}async function yO(r,e,t=Ce()){const i=await Cl(r,dn(Qd(e.bundledQuery))),a=re(r);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const c=Nt(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return a.Pi.saveNamedQuery(l,e);const d=i.withResumeToken(Et.EMPTY_BYTE_STRING,c);return a.vs=a.vs.insert(d.targetId,d),a.li.updateTargetData(l,d).next((()=>a.li.removeMatchingKeysForTargetId(l,i.targetId))).next((()=>a.li.addMatchingKeys(l,t,i.targetId))).next((()=>a.Pi.saveNamedQuery(l,e)))}))}const o0="firestore_clients";function BS(r,e){return`${o0}_${r}_${e}`}const l0="firestore_mutations";function qS(r,e,t){let i=`${l0}_${r}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const u0="firestore_targets";function Eg(r,e){return`${u0}_${r}_${e}`}const Qi="SharedClientState";class wd{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static $s(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new W(a.error.code,a.error.message))),c?new wd(e,t,a.state,l):(Vt(Qi,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ac{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new W(i.error.code,i.error.message))),l?new Ac(e,i.state,a):(Vt(Qi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=U_();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=Cb(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new Rd(e,l):(Vt(Qi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ey{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ey(t.clientId,t.onlineState):(Vt(Qi,`Failed to parse online state: ${e}`),null)}}class i_{constructor(){this.activeTargetIds=U_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ag{constructor(e,t,i,a,l){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ht(be),this.started=!1,this.Zs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=BS(this.persistenceKey,this.zs),this.Ys=(function(p){return`firestore_sequence_number_${p}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new i_),this.eo=new RegExp(`^${o0}_${c}_([^_]*)$`),this.no=new RegExp(`^${l0}_${c}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${u0}_${c}_(\\d+)$`),this.io=(function(p){return`firestore_online_state_${p}`})(this.persistenceKey),this.so=(function(p){return`firestore_bundle_loaded_v2_${p}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const a=this.getItem(BS(this.persistenceKey,i));if(a){const l=Rd.$s(i,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Eg(this.persistenceKey,e));if(a){const l=Ac.$s(e,a);l&&(i=l.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Eg(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.lo(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return te(Qi,"READ",e,t),t}setItem(e,t){te(Qi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){te(Qi,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(te(Qi,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(l){let c=wn.ce;if(l!=null)try{const d=JSON.parse(l);de(typeof d=="number",30636,{yo:l}),c=d}catch(d){Vt(Qi,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);i!==wn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const a=new wd(this.currentUser,e,t,i),l=qS(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=qS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const a=Eg(this.persistenceKey,e),l=new Ac(e,t,i);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return Rd.$s(i,t)}Vo(e,t){const i=this.no.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return wd.$s(new Wt(l),a,t)}fo(e,t){const i=this.ro.exec(e),a=Number(i[1]);return Ac.$s(a,t)}_o(e){return ey.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);te(Qi,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(i),c=[],d=[];return l.forEach((p=>{a.has(p)||c.push(p)})),a.forEach((p=>{l.has(p)||d.push(p)})),this.syncEngine.Co(c,d).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=U_();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class c0{constructor(){this.vo=new i_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new i_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vO{Mo(e){}shutdown(){}}const FS="ConnectivityMonitor";class jS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){te(FS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){te(FS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let jf=null;function r_(){return jf===null?jf=(function(){return 268435456+Math.round(2147483648*Math.random())})():jf++,"0x"+jf.toString(16)}const Sg="RestConnection",TO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class EO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===xc?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=r_(),d=this.Qo(e,t.toUriEncodedString());te(Sg,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=Za(g);return this.zo(e,d,p,i,v).then((E=>(te(Sg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Hn(Sg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",i),E}))}jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=TO[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class AO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const cn="WebChannelConnection",ac=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class hl extends EO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!hl.c_){const e=mb();ac(e,db.STAT_EVENT,(t=>{t.stat===Pg.PROXY?te(cn,"STAT_EVENT: detected buffering proxy"):t.stat===Pg.NOPROXY&&te(cn,"STAT_EVENT: detected no buffering proxy")})),hl.c_=!0}}zo(e,t,i,a,l){const c=r_();return new Promise(((d,p)=>{const g=new hb;g.setWithCredentials(!0),g.listenOnce(fb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case $f.NO_ERROR:const E=g.getResponseJson();te(cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case $f.TIMEOUT:te(cn,`RPC '${e}' ${c} timed out`),p(new W(q.DEADLINE_EXCEEDED,"Request time out"));break;case $f.HTTP_ERROR:const S=g.getStatus();if(te(cn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const K=O?.error;if(K&&K.status&&K.message){const Y=(function(se){const le=se.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(le)>=0?le:q.UNKNOWN})(K.status);p(new W(Y,K.message))}else p(new W(q.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new W(q.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{te(cn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);te(cn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const a=r_(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const g=l.join("");te(cn,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,S=!1;const O=new AO({Ho:K=>{S?te(cn,`Not sending because RPC '${e}' stream ${a} is closed:`,K):(E||(te(cn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),E=!0),te(cn,`RPC '${e}' stream ${a} sending:`,K),v.send(K))},Jo:()=>v.close()});return ac(v,uc.EventType.OPEN,(()=>{S||(te(cn,`RPC '${e}' stream ${a} transport opened.`),O.i_())})),ac(v,uc.EventType.CLOSE,(()=>{S||(S=!0,te(cn,`RPC '${e}' stream ${a} transport closed`),O.o_(),this.E_(v))})),ac(v,uc.EventType.ERROR,(K=>{S||(S=!0,Hn(cn,`RPC '${e}' stream ${a} transport errored. Name:`,K.name,"Message:",K.message),O.o_(new W(q.UNAVAILABLE,"The operation could not be completed")))})),ac(v,uc.EventType.MESSAGE,(K=>{if(!S){const Y=K.data[0];de(!!Y,16349);const ee=Y,se=ee?.error||ee[0]?.error;if(se){te(cn,`RPC '${e}' stream ${a} received error:`,se);const le=se.status;let ue=(function(_e){const w=qt[_e];if(w!==void 0)return Aw(w)})(le),Se=se.message;ue===void 0&&(ue=q.INTERNAL,Se="Unknown error status: "+le+" with message "+se.message),S=!0,O.o_(new W(ue,Se)),v.close()}else te(cn,`RPC '${e}' stream ${a} received:`,Y),O.__(Y)}})),hl.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return pb()}}function SO(r){return new hl(r)}function h0(){return typeof window<"u"?window:null}function sd(){return typeof document<"u"?document:null}function to(r){return new Dx(r,!0)}hl.c_=!1;class ty{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const HS="PersistentStream";class f0{constructor(e,t,i,a,l,c,d,p){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ty(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new W(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return te(HS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(te(HS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IO extends f0{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xx(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ge.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ge.min():c.readTime?Nt(c.readTime):ge.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Wg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=yd(p)?{documents:Nw(l,p)}:{query:Kd(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=ww(l,c.resumeToken);const g=$g(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(ge.min())>0){d.readTime=Rl(l,c.snapshotVersion.toTimestamp());const g=$g(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=Px(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.K_(t)}}class bO extends f0{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Ox(e.writeResults,e.commitTime),i=Nt(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Wg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Lc(this.serializer,i)))};this.K_(t)}}class wO{}class RO extends wO{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new W(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Jg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new W(q.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Jg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new W(q.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function CO(r,e,t,i){return new RO(r,e,t,i)}class DO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vt(t),this.aa=!1):te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ja="RemoteStore";class VO{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{i.enqueueAndForget((async()=>{Gs(this)&&(te(Ja,"Restarting streams for network reachability change."),await(async function(p){const g=re(p);g.Ea.add(4),await ql(g),g.Va.set("Unknown"),g.Ea.delete(4),await eh(g)})(this))}))})),this.Va=new DO(i,a)}}async function eh(r){if(Gs(r))for(const e of r.Ra)await e(!0)}async function ql(r){for(const e of r.Ra)await e(!1)}function Jd(r,e){const t=re(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ry(t)?iy(t):jl(t).O_()&&ny(t,e))}function Vl(r,e){const t=re(r),i=jl(t);t.Ia.delete(e),i.O_()&&d0(t,e),t.Ia.size===0&&(i.O_()?i.L_():Gs(t)&&t.Va.set("Unknown"))}function ny(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(r).Z_(e)}function d0(r,e){r.da.$e(e),jl(r).X_(e)}function iy(r){r.da=new bx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),jl(r).start(),r.Va.ua()}function ry(r){return Gs(r)&&!jl(r).x_()&&r.Ia.size>0}function Gs(r){return re(r).Ea.size===0}function m0(r){r.da=void 0}async function NO(r){r.Va.set("Online")}async function xO(r){r.Ia.forEach(((e,t)=>{ny(r,e)}))}async function OO(r,e){m0(r),ry(r)?(r.Va.ha(e),iy(r)):r.Va.set("Unknown")}async function PO(r,e,t){if(r.Va.set("Online"),e instanceof bw&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(r,e)}catch(i){te(Ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Cd(r,i)}else if(e instanceof id?r.da.Xe(e):e instanceof Iw?r.da.st(e):r.da.tt(e),!t.isEqual(ge.min()))try{const i=await n0(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Et.EMPTY_BYTE_STRING,v.snapshotVersion)),d0(l,p);const E=new Sr(v.target,p,g,v.sequenceNumber);ny(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(i){te(Ja,"Failed to raise snapshot:",i),await Cd(r,i)}}async function Cd(r,e,t){if(!js(e))throw e;r.Ea.add(1),await ql(r),r.Va.set("Offline"),t||(t=()=>n0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{te(Ja,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await eh(r)}))}function p0(r,e){return e().catch((t=>Cd(r,t,e)))}async function Fl(r){const e=re(r),t=ks(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vs;for(;MO(e);)try{const a=await gO(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,kO(e,a)}catch(a){await Cd(e,a)}g0(e)&&_0(e)}function MO(r){return Gs(r)&&r.Ta.length<10}function kO(r,e){r.Ta.push(e);const t=ks(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function g0(r){return Gs(r)&&!ks(r).x_()&&r.Ta.length>0}function _0(r){ks(r).start()}async function LO(r){ks(r).ra()}async function UO(r){const e=ks(r);for(const t of r.Ta)e.ea(t.mutations)}async function zO(r,e,t){const i=r.Ta.shift(),a=F_.from(i,e,t);await p0(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Fl(r)}async function BO(r,e){e&&ks(r).Y_&&await(async function(i,a){if((function(c){return Ew(c)&&c!==q.ABORTED})(a.code)){const l=i.Ta.shift();ks(i).B_(),await p0(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Fl(i)}})(r,e),g0(r)&&_0(r)}async function GS(r,e){const t=re(r);t.asyncQueue.verifyOperationInProgress(),te(Ja,"RemoteStore received new credentials");const i=Gs(t);t.Ea.add(3),await ql(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await eh(t)}async function s_(r,e){const t=re(r);e?(t.Ea.delete(2),await eh(t)):e||(t.Ea.add(2),await ql(t),t.Va.set("Unknown"))}function jl(r){return r.ma||(r.ma=(function(t,i,a){const l=re(t);return l.sa(),new IO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:NO.bind(null,r),Yo:xO.bind(null,r),t_:OO.bind(null,r),J_:PO.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),ry(r)?iy(r):r.Va.set("Unknown")):(await r.ma.stop(),m0(r))}))),r.ma}function ks(r){return r.fa||(r.fa=(function(t,i,a){const l=re(t);return l.sa(),new bO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:LO.bind(null,r),t_:BO.bind(null,r),ta:UO.bind(null,r),na:zO.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Fl(r)):(await r.fa.stop(),r.Ta.length>0&&(te(Ja,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class sy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new sy(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hl(r,e){if(Vt("AsyncQueue",`${e}: ${r}`),js(r))return new W(q.UNAVAILABLE,`${e}: ${r}`);throw r}class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ne.comparator(t.key,i.key):(t,i)=>ne.comparator(t.key,i.key),this.keyedMap=cc(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ba;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class KS{constructor(){this.ga=new ht(ne.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wa{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Wa(e,t,Ba.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class qO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class FO{constructor(){this.queries=QS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=re(t),l=a.queries;a.queries=QS(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(i)}))})(this,new W(q.ABORTED,"Firestore shutting down"))}}function QS(){return new Or((r=>aw(r)),Xc)}async function ay(r,e){const t=re(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new qO,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Hl(c,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ly(t)}async function oy(r,e){const t=re(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function jO(r,e){const t=re(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(i=!0);c.wa=a}}i&&ly(t)}function HO(r,e,t){const i=re(r),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function ly(r){r.Ca.forEach((e=>{e.next()}))}var a_,YS;(YS=a_||(a_={})).Ma="default",YS.Cache="cache";class uy{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Wa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==a_.Cache}}class y0{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class XS{constructor(e){this.serializer=e}Ks(e){return Zi(this.serializer,e)}qs(e){return e.metadata.exists?Gd(this.serializer,e.document,!1):mt.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Nt(e)}}class cy{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=v0(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const i=Pe.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,i=new XS(this.serializer);for(const a of e)if(a.metadata.queries){const l=i.Ks(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||Ce()).add(l);t.set(c,d)}}return t}async ja(e){const t=await _O(e,new XS(this.serializer),this.Qa,this.$a.id),i=this.za(this.documents);for(const a of this.Wa)await yO(e,a,i.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function v0(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class T0{constructor(e){this.key=e}}class E0{constructor(e){this.key=e}}class A0{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ce(),this.mutatedKeys=Ce(),this.eu=lw(e),this.tu=new Ba(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new KS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,E)=>{const S=a.get(v),O=$c(this.query,E)?E:null,K=!!S&&this.mutatedKeys.has(S.key),Y=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let ee=!1;S&&O?S.data.isEqual(O.data)?K!==Y&&(i.track({type:3,doc:O}),ee=!0):this.su(S,O)||(i.track({type:2,doc:O}),ee=!0,(p&&this.eu(O,p)>0||g&&this.eu(O,g)<0)&&(d=!0)):!S&&O?(i.track({type:0,doc:O}),ee=!0):S&&!O&&(i.track({type:1,doc:S}),ee=!0,(p||g)&&(d=!0)),ee&&(O?(c=c.add(O),l=Y?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:c,iu:i,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(O,K){const Y=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Vt:ee})}};return Y(O)-Y(K)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Wa(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new KS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ce(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new E0(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new T0(i))})),t}cu(e){this.Za=e.ks,this.Ya=Ce();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ks="SyncEngine";class GO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class KO{constructor(e){this.key=e,this.hu=!1}}class QO{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Or((d=>aw(d)),Xc),this.Iu=new Map,this.Eu=new Set,this.Ru=new ht(ne.comparator),this.Au=new Map,this.Vu=new Y_,this.du={},this.mu=new Map,this.fu=$a.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YO(r,e,t=!0){const i=Wd(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await S0(i,e,t,!0),a}async function XO(r,e){const t=Wd(r);await S0(t,e,!0,!1)}async function S0(r,e,t,i){const a=await Cl(r.localStore,dn(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await hy(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&Jd(r.remoteStore,a),d}async function hy(r,e,t,i,a){r.pu=(E,S,O)=>(async function(Y,ee,se,le){let ue=ee.view.ru(se);ue.Ss&&(ue=await bd(Y.localStore,ee.query,!1).then((({documents:w})=>ee.view.ru(w,ue))));const Se=le&&le.targetChanges.get(ee.targetId),Re=le&&le.targetMismatches.get(ee.targetId)!=null,_e=ee.view.applyChanges(ue,Y.isPrimaryClient,Se,Re);return o_(Y,ee.targetId,_e.au),_e.snapshot})(r,E,S,O);const l=await bd(r.localStore,e,!0),c=new A0(e,l.ks),d=c.ru(l.documents),p=Zc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),g=c.applyChanges(d,r.isPrimaryClient,p);o_(r,t,g.au);const v=new GO(e,t,c);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function $O(r,e,t){const i=re(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!Xc(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Dl(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Vl(i.remoteStore,a.targetId),Nl(i,a.targetId)})).catch(Fs)):(Nl(i,a.targetId),await Dl(i.localStore,a.targetId,!0))}async function JO(r,e){const t=re(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Vl(t.remoteStore,i.targetId))}async function WO(r,e,t){const i=py(r);try{const a=await(function(c,d){const p=re(c),g=Xe.now(),v=d.reduce(((O,K)=>O.add(K.key)),Ce());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let K=Cn(),Y=Ce();return p.xs.getEntries(O,v).next((ee=>{K=ee,K.forEach(((se,le)=>{le.isValidDocument()||(Y=Y.add(se))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,K))).next((ee=>{E=ee;const se=[];for(const le of d){const ue=Ex(le,E.get(le.key).overlayedDocument);ue!=null&&se.push(new Pr(le.key,ue,Xb(ue.value.mapValue),vt.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,se,d)})).next((ee=>{S=ee;const se=ee.applyToLocalDocumentSet(E,Y);return p.documentOverlayCache.saveOverlays(O,ee.batchId,se)}))})).then((()=>({batchId:S.batchId,changes:cw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new ht(be)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(i,a.batchId,t),await Mr(i,a.changes),await Fl(i.remoteStore)}catch(a){const l=Hl(a,"Failed to persist write");t.reject(l)}}async function I0(r,e){const t=re(r);try{const i=await pO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(de(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?de(c.hu,14607):a.removedDocuments.size>0&&(de(c.hu,42227),c.hu=!1))})),await Mr(t,i,e)}catch(i){await Fs(i)}}function $S(r,e,t){const i=re(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=re(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&ly(p)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ZO(r,e,t){const i=re(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new ht(ne.comparator);c=c.insert(l,mt.newNoDocument(l,ge.min()));const d=Ce().add(l),p=new Wc(ge.min(),new Map,new ht(be),c,d);await I0(i,p),i.Ru=i.Ru.remove(l),i.Au.delete(e),my(i)}else await Dl(i.localStore,e,!1).then((()=>Nl(i,e,t))).catch(Fs)}async function eP(r,e){const t=re(r),i=e.batch.batchId;try{const a=await mO(t.localStore,e);dy(t,i,null),fy(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Mr(t,a)}catch(a){await Fs(a)}}async function tP(r,e,t){const i=re(r);try{const a=await(function(c,d){const p=re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(de(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);dy(i,e,t),fy(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Mr(i,a)}catch(a){await Fs(a)}}async function nP(r,e){const t=re(r);Gs(t.remoteStore)||te(Ks,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(c){const d=re(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(p=>d.mutationQueue.getHighestUnacknowledgedBatchId(p)))})(t.localStore);if(i===Vs)return void e.resolve();const a=t.mu.get(i)||[];a.push(e),t.mu.set(i,a)}catch(i){const a=Hl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function fy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function dy(r,e,t){const i=re(r);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function Nl(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||b0(r,i)}))}function b0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Vl(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),my(r))}function o_(r,e,t){for(const i of t)i instanceof T0?(r.Vu.addReference(i.key,e),iP(r,i)):i instanceof E0?(te(Ks,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||b0(r,i.key)):he(19791,{wu:i})}function iP(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(te(Ks,"New document in limbo: "+t),r.Eu.add(i),my(r))}function my(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ne(Pe.fromString(e)),i=r.fu.next();r.Au.set(i,new KO(t)),r.Ru=r.Ru.insert(t,i),Jd(r.remoteStore,new Sr(dn(Ul(t.path)),i,"TargetPurposeLimboResolution",wn.ce))}}async function Mr(r,e,t){const i=re(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=W_.Es(p.targetId,g);l.push(v)}})))})),await Promise.all(c),i.Pu.J_(a),await(async function(p,g){const v=re(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>L.forEach(g,(S=>L.forEach(S.Ts,(O=>v.persistence.referenceDelegate.addReference(E,S.targetId,O))).next((()=>L.forEach(S.Is,(O=>v.persistence.referenceDelegate.removeReference(E,S.targetId,O)))))))))}catch(E){if(!js(E))throw E;te(Z_,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const O=v.vs.get(S),K=O.snapshotVersion,Y=O.withLastLimboFreeSnapshotVersion(K);v.vs=v.vs.insert(S,Y)}}})(i.localStore,l))}async function rP(r,e){const t=re(r);if(!t.currentUser.isEqual(e)){te(Ks,"User change. New user:",e.toKey());const i=await t0(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new W(q.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Mr(t,i.Ns)}}function sP(r,e){const t=re(r),i=t.Au.get(e);if(i&&i.hu)return Ce().add(i.key);{let a=Ce();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function aP(r,e){const t=re(r),i=await bd(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&o_(t,e.targetId,a.au),a}async function oP(r,e){const t=re(r);return s0(t.localStore,e).then((i=>Mr(t,i)))}async function lP(r,e,t,i){const a=re(r),l=await(function(d,p){const g=re(d),v=re(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>v.Xn(E,p).next((S=>S?g.localDocuments.getDocuments(E,S):L.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Fl(a.remoteStore):t==="acknowledged"||t==="rejected"?(dy(a,e,i||null),fy(a,e),(function(d,p){re(re(d).mutationQueue).nr(p)})(a.localStore,e)):he(6720,"Unknown batchState",{bu:t}),await Mr(a,l)):te(Ks,"Cannot apply mutation batch with id: "+e)}async function uP(r,e){const t=re(r);if(Wd(t),py(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await JS(t,i.toArray());t.gu=!0,await s_(t.remoteStore,!0);for(const l of a)Jd(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(Nl(t,c),Dl(t.localStore,c,!0)))),Vl(t.remoteStore,c)})),await a,await JS(t,i),(function(c){const d=re(c);d.Au.forEach(((p,g)=>{Vl(d.remoteStore,g)})),d.Vu.zr(),d.Au=new Map,d.Ru=new ht(ne.comparator)})(t),t.gu=!1,await s_(t.remoteStore,!1)}}async function JS(r,e,t){const i=re(r),a=[],l=[];for(const c of e){let d;const p=i.Iu.get(c);if(p&&p.length!==0){d=await Cl(i.localStore,dn(p[0]));for(const g of p){const v=i.Tu.get(g),E=await aP(i,v);E.snapshot&&l.push(E.snapshot)}}else{const g=await r0(i.localStore,c);d=await Cl(i.localStore,g),await hy(i,w0(g),c,!1,d.resumeToken)}a.push(d)}return i.Pu.J_(l),a}function w0(r){return iw(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function cP(r){return(function(t){return re(re(t).persistence).hs()})(re(r).localStore)}async function hP(r,e,t,i){const a=re(r);if(a.gu)return void te(Ks,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await s0(a.localStore,ow(l[0])),d=Wc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Et.EMPTY_BYTE_STRING);await Mr(a,c,d);break}case"rejected":await Dl(a.localStore,e,!0),Nl(a,e,i);break;default:he(64155,t)}}async function fP(r,e,t){const i=Wd(r);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){te(Ks,"Adding an already active target "+a);continue}const l=await r0(i.localStore,a),c=await Cl(i.localStore,l);await hy(i,w0(l),c.targetId,!1,c.resumeToken),Jd(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await Dl(i.localStore,a,!1).then((()=>{Vl(i.remoteStore,a),Nl(i,a)})).catch(Fs)}}function Wd(r){const e=re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=I0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZO.bind(null,e),e.Pu.J_=jO.bind(null,e.eventManager),e.Pu.yu=HO.bind(null,e.eventManager),e}function py(r){const e=re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tP.bind(null,e),e}function dP(r,e,t){const i=re(r);(async function(l,c,d){try{const p=await c.getMetadata();if(await(function(O,K){const Y=re(O),ee=Nt(K.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",(se=>Y.Pi.getBundleMetadata(se,K.id))).then((se=>!!se&&se.createTime.compareTo(ee)>=0))})(l.localStore,p))return await c.close(),d._completeWith((function(O){return{taskState:"Success",documentsLoaded:O.totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}})(p)),Promise.resolve(new Set);d._updateProgress(v0(p));const g=new cy(p,c.serializer);let v=await c.Su();for(;v;){const S=await g.Ga(v);S&&d._updateProgress(S),v=await c.Su()}const E=await g.ja(l.localStore);return await Mr(l,E.Ja,void 0),await(function(O,K){const Y=re(O);return Y.persistence.runTransaction("Save bundle","readwrite",(ee=>Y.Pi.saveBundleMetadata(ee,K)))})(l.localStore,p),d._completeWith(E.progress),Promise.resolve(E.Ha)}catch(p){return Hn(Ks,`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}})(i,e,t).then((a=>{i.sharedClientState.notifyBundleLoaded(a)}))}class xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=to(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return e0(this.persistence,new Zw,e.initialUser,this.serializer)}Cu(e){return new X_($d.Vi,this.serializer)}Du(e){return new c0}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xl.provider={build:()=>new xl};class gy extends xl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){de(this.persistence.referenceDelegate instanceof Id,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Qw(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new X_((i=>Id.Vi(i,t)),this.serializer)}}class _y extends xl{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await py(this.xu.syncEngine),await Fl(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return e0(this.persistence,new Zw,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new Qw(i,e.asyncQueue,t)}Mu(e,t){const i=new T2(t,this.persistence);return new v2(e.asyncQueue,i)}Cu(e){const t=J_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new $_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,h0(),sd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new c0}}class R0 extends _y{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Ag&&(this.sharedClientState.syncEngine={So:lP.bind(null,t),Do:hP.bind(null,t),Co:fP.bind(null,t),hs:cP.bind(null,t),bo:oP.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await uP(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=h0();if(!Ag.v(t))throw new W(q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=J_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ag(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Ls{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$S(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rP.bind(null,this.syncEngine),await s_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FO})()}createDatastore(e){const t=to(e.databaseInfo.databaseId),i=SO(e.databaseInfo);return CO(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new VO(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>$S(this.syncEngine,t,0)),(function(){return jS.v()?new jS:new vO})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const E=new QO(a,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=re(t);te(Ja,"RemoteStore shutting down."),i.Ea.add(5),await ql(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ls.provider={build:()=>new Ls};function WS(r,e=10240){let t=0;return{async read(){if(t<r.byteLength){const i={value:r.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Zd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class mP{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new en,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.Ua()?this.metadata.resolve(i.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),i=Number(t);isNaN(i)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Uu(i);return new y0(JSON.parse(a),e.length+i)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class pP{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let i=this.Su();if(!i||!i.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(i?.qa)}`);this.metadata=i;do i=this.Su(),i!==null&&this.elements.push(i);while(i!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),t=this.Uu(e);return new y0(JSON.parse(t),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new W(q.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if(this.bundleData[t]==="{"){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}let gP=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new W(q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const c=re(a),d={documents:l.map((E=>kc(c.serializer,E)))},p=await c.jo("BatchGetDocuments",c.serializer.databaseId,Pe.emptyPath(),d,l.length),g=new Map;p.forEach((E=>{const S=Nx(c.serializer,E);g.set(S.key.toString(),S)}));const v=[];return l.forEach((E=>{const S=g.get(E.toString());de(!!S,55234,{key:E}),v.push(S)})),v})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const a=ne.fromPath(i);this.mutations.push(new B_(a,this.precondition(a)))})),await(async function(i,a){const l=re(i),c={writes:a.map((d=>Lc(l.serializer,d)))};await l.Wo("Commit",l.serializer.databaseId,Pe.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw he(50498,{Gu:e.constructor.name});t=ge.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new W(q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ge.min())?vt.exists(!1):vt.updateTime(t):vt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ge.min()))throw new W(q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(t)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class _P{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.zu=i.maxAttempts,this.M_=new ty(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new gP(this.datastore),t=this.Ju(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((a=>{this.Zu(a)}))))})).catch((i=>{this.Zu(i)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Ew(t)}return!1}}const Us="FirestoreClient";class yP{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=Wt.UNAUTHENTICATED,this.clientId=Pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{te(Us,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(te(Us,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Hl(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ig(r,e){r.asyncQueue.verifyOperationInProgress(),te(Us,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await t0(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function ZS(r,e){r.asyncQueue.verifyOperationInProgress();const t=await yy(r);te(Us,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>GS(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>GS(e.remoteStore,a))),r._onlineComponents=e}async function yy(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){te(Us,"Using user provided OfflineComponentProvider");try{await Ig(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===q.FAILED_PRECONDITION||a.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Hn("Error using user provided cache. Falling back to memory cache: "+t),await Ig(r,new xl)}}else te(Us,"Using default OfflineComponentProvider"),await Ig(r,new gy(void 0));return r._offlineComponents}async function em(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(te(Us,"Using user provided OnlineComponentProvider"),await ZS(r,r._uninitializedComponentsProvider._online)):(te(Us,"Using default OnlineComponentProvider"),await ZS(r,new Ls))),r._onlineComponents}function C0(r){return yy(r).then((e=>e.persistence))}function Gl(r){return yy(r).then((e=>e.localStore))}function D0(r){return em(r).then((e=>e.remoteStore))}function vy(r){return em(r).then((e=>e.syncEngine))}function V0(r){return em(r).then((e=>e.datastore))}async function Ol(r){const e=await em(r),t=e.eventManager;return t.onListen=YO.bind(null,e.syncEngine),t.onUnlisten=$O.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JO.bind(null,e.syncEngine),t}function vP(r){return r.asyncQueue.enqueue((async()=>{const e=await C0(r),t=await D0(r);return e.setNetworkEnabled(!0),(function(a){const l=re(a);return l.Ea.delete(0),eh(l)})(t)}))}function TP(r){return r.asyncQueue.enqueue((async()=>{const e=await C0(r),t=await D0(r);return e.setNetworkEnabled(!1),(async function(a){const l=re(a);l.Ea.add(0),await ql(l),l.Va.set("Offline")})(t)}))}function EP(r,e,t,i){const a=new Zd(i),l=new uy(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>ay(await Ol(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>oy(await Ol(r),l)))}}function AP(r,e){const t=new en;return r.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const d=await(function(g,v){const E=re(g);return E.persistence.runTransaction("read document","readonly",(S=>E.localDocuments.getDocument(S,v)))})(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new W(q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Hl(d,`Failed to get document '${l} from cache`);c.reject(p)}})(await Gl(r),e,t))),t.promise}function N0(r,e,t={}){const i=new en;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Zd({next:S=>{v.Nu(),c.enqueueAndForget((()=>oy(l,E)));const O=S.docs.has(d);!O&&S.fromCache?g.reject(new W(q.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&p&&p.source==="server"?g.reject(new W(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new uy(Ul(d.path),v,{includeMetadataChanges:!0,Ka:!0});return ay(l,E)})(await Ol(r),r.asyncQueue,e,t,i))),i.promise}function SP(r,e){const t=new en;return r.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const d=await bd(a,l,!0),p=new A0(l,d.ks),g=p.ru(d.documents),v=p.applyChanges(g,!1);c.resolve(v.snapshot)}catch(d){const p=Hl(d,`Failed to execute query '${l} against cache`);c.reject(p)}})(await Gl(r),e,t))),t.promise}function x0(r,e,t={}){const i=new en;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Zd({next:S=>{v.Nu(),c.enqueueAndForget((()=>oy(l,E))),S.fromCache&&p.source==="server"?g.reject(new W(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new uy(d,v,{includeMetadataChanges:!0,Ka:!0});return ay(l,E)})(await Ol(r),r.asyncQueue,e,t,i))),i.promise}function IP(r,e,t){const i=new en;return r.asyncQueue.enqueueAndForget((async()=>{try{const a=await V0(r);i.resolve((async function(c,d,p){const g=re(c),{request:v,gt:E,parent:S}=xw(g.serializer,rw(d),p);g.connection.Ko||delete v.parent;const O=(await g.jo("RunAggregationQuery",g.serializer.databaseId,S,v,1)).filter((Y=>!!Y.result));de(O.length===1,64727);const K=O[0].result?.aggregateFields;return Object.keys(K).reduce(((Y,ee)=>(Y[E[ee]]=K[ee],Y)),{})})(a,e,t))}catch(a){i.reject(a)}})),i.promise}function bP(r,e){const t=new en;return r.asyncQueue.enqueueAndForget((async()=>WO(await vy(r),e,t))),t.promise}function wP(r,e){const t=new Zd(e);return r.asyncQueue.enqueueAndForget((async()=>(function(a,l){re(a).Ca.add(l),l.next()})(await Ol(r),t))),()=>{t.Nu(),r.asyncQueue.enqueueAndForget((async()=>(function(a,l){re(a).Ca.delete(l)})(await Ol(r),t)))}}function RP(r,e,t){const i=new en;return r.asyncQueue.enqueueAndForget((async()=>{const a=await V0(r);new _P(r.asyncQueue,a,t,e,i).ju()})),i.promise}function CP(r,e,t,i){const a=(function(c,d){let p;return p=typeof c=="string"?Sw().encode(c):c,(function(v,E){return new mP(v,E)})((function(v,E){if(v instanceof Uint8Array)return WS(v,E);if(v instanceof ArrayBuffer)return WS(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(p),d)})(t,to(e));r.asyncQueue.enqueueAndForget((async()=>{dP(await vy(r),a,i)}))}function DP(r,e){return r.asyncQueue.enqueue((async()=>(function(i,a){const l=re(i);return l.persistence.runTransaction("Get named query","readonly",(c=>l.Pi.getNamedQuery(c,a)))})(await Gl(r),e)))}function O0(r,e){return(function(i,a){return new pP(i,a)})(r,e)}function VP(r,e){return r.asyncQueue.enqueue((async()=>(async function(i,a){const l=re(i),c=l.indexManager,d=[];return l.persistence.runTransaction("Configure indexes","readwrite",(p=>c.getFieldIndexes(p).next((g=>(function(E,S,O,K,Y){E=[...E],S=[...S],E.sort(O),S.sort(O);const ee=E.length,se=S.length;let le=0,ue=0;for(;le<se&&ue<ee;){const Se=O(E[ue],S[le]);Se<0?Y(E[ue++]):Se>0?K(S[le++]):(le++,ue++)}for(;le<se;)K(S[le++]);for(;ue<ee;)Y(E[ue++])})(g,a,p2,(v=>{d.push(c.addFieldIndex(p,v))}),(v=>{d.push(c.deleteFieldIndex(p,v))})))).next((()=>L.waitFor(d)))))})(await Gl(r),e)))}function NP(r,e){return r.asyncQueue.enqueue((async()=>(function(i,a){re(i).Cs.As=a})(await Gl(r),e)))}function xP(r){return r.asyncQueue.enqueue((async()=>(function(t){const i=re(t),a=i.indexManager;return i.persistence.runTransaction("Delete All Indexes","readwrite",(l=>a.deleteAllFieldIndexes(l)))})(await Gl(r))))}function P0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const OP="ComponentProvider",eI=new Map;function PP(r,e,t,i,a){return new X2(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,P0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}const M0="firestore.googleapis.com",tI=!0;class nI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M0,this.ssl=tI}else this.host=e.host,this.ssl=e.ssl??tI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Kw)throw new W(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Tb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P0(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class th{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new yb;switch(i.type){case"firstParty":return new l2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=eI.get(t);i&&(te(OP,"Removing Datastore"),eI.delete(t),i.terminate())})(this),Promise.resolve()}}function k0(r,e,t,i={}){r=Me(r,th);const a=Za(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},d=`${e}:${t}`;a&&(d_(`https://${d}`),TI("Firestore",!0)),l.host!==M0&&l.host!==d&&Hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:i};if(!Si(p,c)&&(r._setSettings(p),i.mockUserToken)){let g,v;if(typeof i.mockUserToken=="string")g=i.mockUserToken,v=Wt.MOCK_USER;else{g=mC(i.mockUserToken,r._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new W(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Wt(E)}r._authCredentials=new s2(new _b(g,v))}}class Kt{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Kt(this.firestore,e,this._query)}}class et{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(eo(t,et._jsonSchema))return new et(e,i||null,new ne(Pe.fromString(t.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Ft("string",et._jsonSchemaVersion),referencePath:Ft("string")};class Ei extends Kt{constructor(e,t,i){super(e,t,Ul(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new ne(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function ka(r,e,...t){if(r=at(r),R_("collection","path",e),r instanceof th){const i=Pe.fromString(e,...t);return HA(i),new Ei(r,null,i)}{if(!(r instanceof et||r instanceof Ei))throw new W(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Pe.fromString(e,...t));return HA(i),new Ei(r.firestore,null,i)}}function MP(r,e){if(r=Me(r,th),R_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new W(q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kt(r,null,(function(i){return new xr(Pe.emptyPath(),i)})(e))}function $i(r,e,...t){if(r=at(r),arguments.length===1&&(e=Pd.newId()),R_("doc","path",e),r instanceof th){const i=Pe.fromString(e,...t);return jA(i),new et(r,null,new ne(i))}{if(!(r instanceof et||r instanceof Ei))throw new W(q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Pe.fromString(e,...t));return jA(i),new et(r.firestore,r instanceof Ei?r.converter:null,new ne(i))}}function kP(r,e){return r=at(r),e=at(e),(r instanceof et||r instanceof Ei)&&(e instanceof et||e instanceof Ei)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Ty(r,e){return r=at(r),e=at(e),r instanceof Kt&&e instanceof Kt&&r.firestore===e.firestore&&Xc(r._query,e._query)&&r.converter===e.converter}const iI="AsyncQueue";class rI{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ty(this,"async_queue_retry"),this._c=()=>{const i=sd();i&&te(iI,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=sd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new en;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!js(e))throw e;te(iI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Vt("INTERNAL UNHANDLED ERROR: ",sI(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=sy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&he(47125,{Pc:sI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sI(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class L0{constructor(){this._progressObserver={},this._taskCompletionResolver=new en,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const LP=-1;class ot extends th{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new rI,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rI(e),this._firestoreClient=void 0,await e}}}function U0(r,e,t){t||(t=xc);const i=qc(r,"firestore");if(i.isInitialized(t)){const a=i.getImmediate({identifier:t}),l=i.getOptions(t);if(Si(l,e))return a;throw new W(q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new W(q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Kw)throw new W(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Za(e.host)&&d_(e.host),i.initialize({options:e,instanceIdentifier:t})}function z0(r,e){const t=typeof r=="object"?r:CI(),i=typeof r=="string"?r:e||xc,a=qc(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=fC("firestore");l&&k0(a,...l)}return a}function Tt(r){if(r._terminated)throw new W(q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||B0(r),r._firestoreClient}function B0(r){const e=r._freezeSettings(),t=PP(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new yP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(r._componentsProvider))}function UP(r,e){Hn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return q0(r,Ls.provider,{build:i=>new _y(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function zP(r){Hn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();q0(r,Ls.provider,{build:t=>new R0(t,e.cacheSizeBytes)})}function q0(r,e,t){if((r=Me(r,ot))._firestoreClient||r._terminated)throw new W(q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new W(q.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},B0(r)}function BP(r){if(r._initialized&&!r._terminated)throw new W(q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new en;return r._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!Wi.v())return Promise.resolve();const a=i+Ww;await Wi.delete(a)})(J_(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function qP(r){return(function(t){const i=new en;return t.asyncQueue.enqueueAndForget((async()=>nP(await vy(t),i))),i.promise})(Tt(r=Me(r,ot)))}function FP(r){return vP(Tt(r=Me(r,ot)))}function jP(r){return TP(Tt(r=Me(r,ot)))}function HP(r){return wD(r.app,"firestore",r._databaseId.database),r._delete()}function l_(r,e){const t=Tt(r=Me(r,ot)),i=new L0;return CP(t,r._databaseId,e,i),i}function F0(r,e){return DP(Tt(r=Me(r,ot)),e).then((t=>t?new Kt(r,null,t.query):null))}class bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bn(Et.fromBase64String(e))}catch(t){throw new W(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bn(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eo(e,bn._jsonSchema))return bn.fromBase64String(e.bytes)}}bn._jsonSchemaVersion="firestore/bytes/1.0",bn._jsonSchema={type:Ft("string",bn._jsonSchemaVersion),bytes:Ft("string")};class no{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function GP(){return new no(Lg)}class Qs{constructor(e){this._methodName=e}}class Ai{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(eo(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Ft("string",Ai._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};class Fn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eo(e,Fn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fn(e.vectorValues);throw new W(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fn._jsonSchemaVersion="firestore/vectorValue/1.0",Fn._jsonSchema={type:Ft("string",Fn._jsonSchemaVersion),vectorValues:Ft("object")};const KP=/^__.*__$/;class QP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}class j0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Pr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function H0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{dataSource:r})}}class tm{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new tm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Dd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(H0(this.dataSource)&&KP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class YP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||to(e)}createContext(e,t,i,a=!1){return new tm({dataSource:e,methodName:t,targetDoc:i,path:pt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function io(r){const e=r._freezeSettings(),t=to(r._databaseId);return new YP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function nm(r,e,t,i,a,l={}){const c=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);Ry("Data must be an object, but it was:",c,i);const d=Q0(i,c);let p,g;if(l.merge)p=new Rn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=Vr(e,E,t);if(!c.contains(S))throw new W(q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);X0(v,S)||v.push(S)}p=new Rn(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new QP(new Zt(d),p,g)}class nh extends Qs{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nh}}function G0(r,e,t){return new tm({dataSource:3,targetDoc:e.settings.targetDoc,methodName:r._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ey extends Qs{_toFieldTransform(e){return new Jc(e.path,new bl)}isEqual(e){return e instanceof Ey}}class Ay extends Qs{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=G0(this,e,!0),i=this.Ac.map((l=>ro(l,t))),a=new Ka(i);return new Jc(e.path,a)}isEqual(e){return e instanceof Ay&&Si(this.Ac,e.Ac)}}class Sy extends Qs{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=G0(this,e,!0),i=this.Ac.map((l=>ro(l,t))),a=new Qa(i);return new Jc(e.path,a)}isEqual(e){return e instanceof Sy&&Si(this.Ac,e.Ac)}}class Iy extends Qs{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new wl(e.serializer,dw(e.serializer,this.Vc));return new Jc(e.path,t)}isEqual(e){return e instanceof Iy&&this.Vc===e.Vc}}function by(r,e,t,i){const a=r.createContext(1,e,t);Ry("Data must be an object, but it was:",a,i);const l=[],c=Zt.empty();Hs(i,((p,g)=>{const v=Cy(e,p,t);g=at(g);const E=a.childContextForFieldPath(v);if(g instanceof nh)l.push(v);else{const S=ro(g,E);S!=null&&(l.push(v),c.set(v,S))}}));const d=new Rn(l);return new j0(c,d,a.fieldTransforms)}function wy(r,e,t,i,a,l){const c=r.createContext(1,e,t),d=[Vr(e,i,t)],p=[a];if(l.length%2!=0)throw new W(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Vr(e,l[S])),p.push(l[S+1]);const g=[],v=Zt.empty();for(let S=d.length-1;S>=0;--S)if(!X0(g,d[S])){const O=d[S];let K=p[S];K=at(K);const Y=c.childContextForFieldPath(O);if(K instanceof nh)g.push(O);else{const ee=ro(K,Y);ee!=null&&(g.push(O),v.set(O,ee))}}const E=new Rn(g);return new j0(v,E,c.fieldTransforms)}function K0(r,e,t,i=!1){return ro(t,r.createContext(i?4:3,e))}function ro(r,e){if(Y0(r=at(r)))return Ry("Unsupported field value:",e,r),Q0(r,e);if(r instanceof Qs)return(function(i,a){if(!H0(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=ro(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=at(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dw(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Xe.fromDate(i);return{timestampValue:Rl(a.serializer,l)}}if(i instanceof Xe){const l=new Xe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rl(a.serializer,l)}}if(i instanceof Ai)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof bn)return{bytesValue:ww(a.serializer,i._byteString)};if(i instanceof et){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:G_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Fn)return(function(c,d){const p=c instanceof Fn?c.toArray():c;return{mapValue:{fields:{[P_]:{stringValue:M_},[Al]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return z_(d.serializer,v)}))}}}}}})(i,a);if(Lw(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Md(i)}`)})(r,e)}function Q0(r,e){const t={};return Bb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hs(r,((i,a)=>{const l=ro(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Y0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Xe||r instanceof Ai||r instanceof bn||r instanceof et||r instanceof Qs||r instanceof Fn||Lw(r))}function Ry(r,e,t){if(!Y0(t)||!Eb(t)){const i=Md(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function Vr(r,e,t){if((e=at(e))instanceof no)return e._internalPath;if(typeof e=="string")return Cy(r,e);throw Dd("Field path arguments must be of type string or ",r,!1,void 0,t)}const XP=new RegExp("[~\\*/\\[\\]]");function Cy(r,e,t){if(e.search(XP)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new no(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Dd(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new W(q.INVALID_ARGUMENT,d+r+p)}function X0(r,e){return r.some((t=>t.isEqual(e)))}class Dy{convertValue(e,t="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Hs(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Al].arrayValue?.values?.map((i=>yt(i.doubleValue)));return new Fn(t)}convertGeoPoint(e){return new Ai(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=qd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){const t=Cr(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Pe.fromString(e);de(kw(i),9688,{name:e});const a=new xs(i.get(1),i.get(3)),l=new ne(i.popFirst(5));return a.isEqual(t)||Vt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Ys extends Dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}function $P(){return new nh("deleteField")}function JP(){return new Ey("serverTimestamp")}function WP(...r){return new Ay("arrayUnion",r)}function ZP(...r){return new Sy("arrayRemove",r)}function u_(r){return new Iy("increment",r)}function eM(r){return new Fn(r)}function tM(r){const e=Tt(Me(r.firestore,ot)),t=e._onlineComponents?.datastore.serializer;return t===void 0?null:Kd(t,dn(r._query)).ft}function nM(r,e){const t=zb(e,((l,c)=>new Tw(c,l.aggregateType,l._internalFieldPath))),i=Tt(Me(r.firestore,ot)),a=i._onlineComponents?.datastore.serializer;return a===void 0?null:xw(a,rw(r._query),t,!0).request}const aI="@firebase/firestore",oI="4.10.0";function fl(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Pl{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class $0{constructor(e,t,i){this._userDataWriter=t,this._data=i,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new Zt({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class Uc{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Vr("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class iM extends Uc{data(){return super.data()}}function J0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new W(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class Kl extends Vy{}function c_(r,e,...t){let i=[];e instanceof Vy&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof so)).length,d=l.filter((p=>p instanceof Ql)).length;if(c>1||c>0&&d>0)throw new W(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class Ql extends Kl{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ql(e,t,i)}_apply(e){const t=this._parse(e);return Z0(e._query,t),new Kt(e.firestore,e.converter,Yg(e._query,t))}_parse(e){const t=io(e.firestore);return(function(l,c,d,p,g,v,E){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new W(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){uI(E,v);const K=[];for(const Y of E)K.push(lI(p,l,Y));S={arrayValue:{values:K}}}else S=lI(p,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||uI(E,v),S=K0(d,c,E,v==="in"||v==="not-in");return Fe.create(g,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function h_(r,e,t){const i=e,a=Vr("where",r);return Ql._create(a,i,t)}class so extends Vy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new so(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ze.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)Z0(c,p),c=Yg(c,p)})(e._query,t),new Kt(e.firestore,e.converter,Yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rM(...r){return r.forEach((e=>eR("or",e))),so._create("or",r)}function sM(...r){return r.forEach((e=>eR("and",e))),so._create("and",r)}class im extends Kl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new im(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new W(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new W(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mc(l,c)})(e._query,this._field,this._direction);return new Kt(e.firestore,e.converter,lx(e._query,t))}}function aM(r,e="asc"){const t=e,i=Vr("orderBy",r);return im._create(i,t)}class ih extends Kl{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new ih(e,t,i)}_apply(e){return new Kt(e.firestore,e.converter,Td(e._query,this._limit,this._limitType))}}function oM(r){return Ab("limit",r),ih._create("limit",r,"F")}function lM(r){return Ab("limitToLast",r),ih._create("limitToLast",r,"L")}class rh extends Kl{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new rh(e,t,i)}_apply(e){const t=W0(e,this.type,this._docOrFields,this._inclusive);return new Kt(e.firestore,e.converter,ux(e._query,t))}}function uM(...r){return rh._create("startAt",r,!0)}function cM(...r){return rh._create("startAfter",r,!1)}class sh extends Kl{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new sh(e,t,i)}_apply(e){const t=W0(e,this.type,this._docOrFields,this._inclusive);return new Kt(e.firestore,e.converter,cx(e._query,t))}}function hM(...r){return sh._create("endBefore",r,!1)}function fM(...r){return sh._create("endAt",r,!0)}function W0(r,e,t,i){if(t[0]=at(t[0]),t[0]instanceof Uc)return(function(l,c,d,p,g){if(!p)throw new W(q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const v=[];for(const E of cl(l))if(E.field.isKeyField())v.push(Ha(c,p.key));else{const S=p.data.field(E.field);if(Bd(S))throw new W(q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(S===null){const O=E.field.canonicalString();throw new W(q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}v.push(S)}return new Ms(v,g)})(r._query,r.firestore._databaseId,e,t[0]._document,i);{const a=io(r.firestore);return(function(c,d,p,g,v,E){const S=c.explicitOrderBy;if(v.length>S.length)throw new W(q.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let K=0;K<v.length;K++){const Y=v[K];if(S[K].field.isKeyField()){if(typeof Y!="string")throw new W(q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof Y}`);if(!L_(c)&&Y.indexOf("/")!==-1)throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${Y}' contains a slash.`);const ee=c.path.child(Pe.fromString(Y));if(!ne.isDocumentKey(ee))throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const se=new ne(ee);O.push(Ha(d,se))}else{const ee=K0(p,g,Y);O.push(ee)}}return new Ms(O,E)})(r._query,r.firestore._databaseId,a,e,t,i)}}function lI(r,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new W(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L_(e)&&t.indexOf("/")!==-1)throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Pe.fromString(t));if(!ne.isDocumentKey(i))throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ha(r,new ne(i))}if(t instanceof et)return Ha(r,t._key);throw new W(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(t)}.`)}function uI(r,e){if(!Array.isArray(r)||r.length===0)throw new W(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Z0(r,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new W(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function eR(r,e){if(!(e instanceof Ql||e instanceof so))throw new W(q.INVALID_ARGUMENT,`Function ${r}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function rm(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Ny extends Dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}function dM(r){return new Pl("sum",Vr("sum",r))}function mM(r){return new Pl("avg",Vr("average",r))}function tR(){return new Pl("count")}function pM(r,e){return r instanceof Pl&&e instanceof Pl&&r.aggregateType===e.aggregateType&&r._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function gM(r,e){return Ty(r.query,e.query)&&Si(r.data(),e.data())}function _M(r){return nR(r,{count:tR()})}function nR(r,e){const t=Me(r.firestore,ot),i=Tt(t),a=zb(e,((l,c)=>new Tw(c,l.aggregateType,l._internalFieldPath)));return IP(i,r._query,a).then((l=>(function(d,p,g){const v=new Ys(d);return new $0(p,v,g)})(t,r,l)))}class yM{constructor(e){this.kind="memory",this._onlineComponentProvider=Ls.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new gy(void 0)}}toJSON(){return{kind:this.kind}}}class vM{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=rR(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class TM{constructor(){this.kind="memoryEager",this._offlineComponentProvider=xl.provider}toJSON(){return{kind:this.kind}}}class EM{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new gy(e)}}toJSON(){return{kind:this.kind}}}function AM(){return new TM}function SM(r){return new EM(r?.cacheSizeBytes)}function IM(r){return new yM(r)}function iR(r){return new vM(r)}class bM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ls.provider,this._offlineComponentProvider={build:t=>new _y(t,e?.cacheSizeBytes,this.forceOwnership)}}}class wM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ls.provider,this._offlineComponentProvider={build:t=>new R0(t,e?.cacheSizeBytes)}}}function rR(r){return new bM(r?.forceOwnership)}function sR(){return new wM}const aR="NOT SUPPORTED";class Ir{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dn extends Uc{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Vr("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Dn._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}function RM(r,e,t){if(eo(e,Dn._jsonSchema)){if(e.bundle===aR)throw new W(q.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const i=to(r._databaseId),a=O0(e.bundle,i),l=a.t(),c=new cy(a.getMetadata(),i);for(const v of l)c.o(v);const d=c.documents;if(d.length!==1)throw new W(q.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${d.length} documents.`);const p=Gd(i,d[0].document),g=new ne(Pe.fromString(e.bundleName));return new Dn(r,new Ny(r),g,p,new Ir(!1,!1),t||null)}}Dn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dn._jsonSchema={type:Ft("string",Dn._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class Sc extends Dn{data(e={}){return super.data(e)}}class Vn{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ir(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Sc(this._firestore,this._userDataWriter,i.key,i,new Ir(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new Sc(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ir(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Sc(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ir(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:DM(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CM(r,e,t){if(eo(e,Vn._jsonSchema)){if(e.bundle===aR)throw new W(q.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const i=to(r._databaseId),a=O0(e.bundle,i),l=a.t(),c=new cy(a.getMetadata(),i);for(const S of l)c.o(S);if(c.queries.length!==1)throw new W(q.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${c.queries.length} queries.`);const d=Qd(c.queries[0].bundledQuery),p=c.documents;let g=new Ba;p.map((S=>{const O=Gd(i,S.document);g=g.add(O)}));const v=Wa.fromInitialDocuments(d,g,Ce(),!1,!1),E=new Kt(r,t||null,d);return new Vn(r,new Ny(r),E,v)}}function DM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:r})}}function VM(r,e){return r instanceof Dn&&e instanceof Dn?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(r._document===null?e._document===null:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Vn&&e instanceof Vn&&r._firestore===e._firestore&&Ty(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}Vn._jsonSchemaVersion="firestore/querySnapshot/1.0",Vn._jsonSchema={type:Ft("string",Vn._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};const NM={maxAttempts:5};class oR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=io(e)}set(e,t,i){this._verifyNotCommitted();const a=bs(e,this._firestore),l=rm(a.converter,t,i),c=nm(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,vt.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=bs(e,this._firestore);let c;return c=typeof(t=at(t))=="string"||t instanceof no?wy(this._dataReader,"WriteBatch.update",l._key,t,i,a):by(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bs(e,this._firestore);return this._mutations=this._mutations.concat(new Bl(t._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bs(r,e){if((r=at(r)).firestore!==e)throw new W(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class xM{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=io(e)}get(e){const t=bs(e,this._firestore),i=new Ny(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return he(24041);const l=a[0];if(l.isFoundDocument())return new Uc(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new Uc(this._firestore,i,t._key,null,t.converter);throw he(18433,{doc:l})}))}set(e,t,i){const a=bs(e,this._firestore),l=rm(a.converter,t,i),c=nm(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(e,t,i,...a){const l=bs(e,this._firestore);let c;return c=typeof(t=at(t))=="string"||t instanceof no?wy(this._dataReader,"Transaction.update",l._key,t,i,a):by(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=bs(e,this._firestore);return this._transaction.delete(t._key),this}}class lR extends xM{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bs(e,this._firestore),i=new Ys(this._firestore);return super.get(e).then((a=>new Dn(this._firestore,i,t._key,a._document,new Ir(!1,!1),t.converter)))}}function OM(r,e,t){r=Me(r,ot);const i={...NM,...t};(function(c){if(c.maxAttempts<1)throw new W(q.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i);const a=Tt(r);return RP(a,(l=>e(new lR(r,l))),i)}function uR(r){r=Me(r,et);const e=Me(r.firestore,ot),t=Tt(e);return N0(t,r._key).then((i=>xy(e,r,i)))}function PM(r){r=Me(r,et);const e=Me(r.firestore,ot),t=Tt(e),i=new Ys(e);return AP(t,r._key).then((a=>new Dn(e,i,r._key,a,new Ir(a!==null&&a.hasLocalMutations,!0),r.converter)))}function MM(r){r=Me(r,et);const e=Me(r.firestore,ot),t=Tt(e);return N0(t,r._key,{source:"server"}).then((i=>xy(e,r,i)))}function kM(r){r=Me(r,Kt);const e=Me(r.firestore,ot),t=Tt(e),i=new Ys(e);return J0(r._query),x0(t,r._query).then((a=>new Vn(e,i,r,a)))}function LM(r){r=Me(r,Kt);const e=Me(r.firestore,ot),t=Tt(e),i=new Ys(e);return SP(t,r._query).then((a=>new Vn(e,i,r,a)))}function UM(r){r=Me(r,Kt);const e=Me(r.firestore,ot),t=Tt(e),i=new Ys(e);return x0(t,r._query,{source:"server"}).then((a=>new Vn(e,i,r,a)))}function zM(r,e,t){r=Me(r,et);const i=Me(r.firestore,ot),a=rm(r.converter,e,t),l=io(i);return Yl(i,[nm(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,vt.none())])}function BM(r,e,t,...i){r=Me(r,et);const a=Me(r.firestore,ot),l=io(a);let c;return c=typeof(e=at(e))=="string"||e instanceof no?wy(l,"updateDoc",r._key,e,t,i):by(l,"updateDoc",r._key,e),Yl(a,[c.toMutation(r._key,vt.exists(!0))])}function qM(r){return Yl(Me(r.firestore,ot),[new Bl(r._key,vt.none())])}function cR(r,e){const t=Me(r.firestore,ot),i=$i(r),a=rm(r.converter,e),l=io(r.firestore);return Yl(t,[nm(l,"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,vt.exists(!1))]).then((()=>i))}function La(r,...e){r=at(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||fl(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(fl(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let l,c,d;if(r instanceof et)c=Me(r.firestore,ot),d=Ul(r._key.path),l={next:g=>{e[i]&&e[i](xy(c,r,g))},error:e[i+1],complete:e[i+2]};else{const g=Me(r,Kt);c=Me(g.firestore,ot),d=g._query;const v=new Ys(c);l={next:E=>{e[i]&&e[i](new Vn(c,v,g,E))},error:e[i+1],complete:e[i+2]},J0(r._query)}const p=Tt(c);return EP(p,d,a,l)}function FM(r,e,...t){const i=at(r),a=(function(p){const g={bundle:"",bundleName:"",bundleSource:""},v=["bundle","bundleName","bundleSource"];for(const E of v){if(!(E in p)){g.error=`snapshotJson missing required field: ${E}`;break}const S=p[E];if(typeof S!="string"){g.error=`snapshotJson field '${E}' must be a string.`;break}if(S.length===0){g.error=`snapshotJson field '${E}' cannot be an empty string.`;break}E==="bundle"?g.bundle=S:E==="bundleName"?g.bundleName=S:E==="bundleSource"&&(g.bundleSource=S)}return g})(e);if(a.error)throw new W(q.INVALID_ARGUMENT,a.error);let l,c=0;if(typeof t[c]!="object"||fl(t[c])||(l=t[c++]),a.bundleSource==="QuerySnapshot"){let d=null;if(typeof t[c]=="object"&&fl(t[c])){const p=t[c++];d={next:p.next,error:p.error,complete:p.complete}}else d={next:t[c++],error:t[c++],complete:t[c++]};return(function(g,v,E,S,O){let K,Y=!1;return l_(g,v.bundle).then((()=>F0(g,v.bundleName))).then((se=>{se&&!Y&&(O&&se.withConverter(O),K=La(se,E||{},S))})).catch((se=>(S.error&&S.error(se),()=>{}))),()=>{Y||(Y=!0,K&&K())}})(i,a,l,d,t[c])}if(a.bundleSource==="DocumentSnapshot"){let d=null;if(typeof t[c]=="object"&&fl(t[c])){const p=t[c++];d={next:p.next,error:p.error,complete:p.complete}}else d={next:t[c++],error:t[c++],complete:t[c++]};return(function(g,v,E,S,O){let K,Y=!1;return l_(g,v.bundle).then((()=>{if(!Y){const se=new et(g,O||null,ne.fromPath(v.bundleName));K=La(se,E||{},S)}})).catch((se=>(S.error&&S.error(se),()=>{}))),()=>{Y||(Y=!0,K&&K())}})(i,a,l,d,t[c])}throw new W(q.INVALID_ARGUMENT,`unsupported bundle source: ${a.bundleSource}`)}function jM(r,e){r=Me(r,ot);const t=Tt(r),i=fl(e)?e:{next:e};return wP(t,i)}function Yl(r,e){const t=Tt(r);return bP(t,e)}function xy(r,e,t){const i=t.docs.get(e._key),a=new Ys(r);return new Dn(r,a,e._key,i,new Ir(t.hasPendingWrites,t.fromCache),e.converter)}function hR(r){return r=Me(r,ot),Tt(r),new oR(r,(e=>Yl(r,e)))}function HM(r,e){r=Me(r,ot);const t=Tt(r);if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return Hn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=(function(l){const c=typeof l=="string"?(function(g){try{return JSON.parse(g)}catch(v){throw new W(q.INVALID_ARGUMENT,"Failed to parse JSON: "+v?.message)}})(l):l,d=[];if(Array.isArray(c.indexes))for(const p of c.indexes){const g=cI(p,"collectionGroup"),v=[];if(Array.isArray(p.fields))for(const E of p.fields){const S=cI(E,"fieldPath"),O=Cy("setIndexConfiguration",S);E.arrayConfig==="CONTAINS"?v.push(new Ua(O,2)):E.order==="ASCENDING"?v.push(new Ua(O,0)):E.order==="DESCENDING"&&v.push(new Ua(O,1))}d.push(new gl(gl.UNKNOWN_ID,g,v,_l.empty()))}return d})(e);return VP(t,i)}function cI(r,e){if(typeof r[e]!="string")throw new W(q.INVALID_ARGUMENT,"Missing string value for: "+e);return r[e]}class fR{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function GM(r){r=Me(r,ot);const e=hI.get(r);if(e)return e;if(Tt(r)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const i=new fR(r);return hI.set(r,i),i}function KM(r){dR(r,!0)}function QM(r){dR(r,!1)}function YM(r){const e=Tt(r._firestore);xP(e).then((t=>te("deleting all persistent cache indexes succeeded"))).catch((t=>Hn("deleting all persistent cache indexes failed",t)))}function dR(r,e){const t=Tt(r._firestore);NP(t,e).then((i=>te(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((i=>Hn(`setting persistent cache index auto creation isEnabled=${e} failed`,i)))}const hI=new WeakMap;class XM{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Oy.instance.onExistenceFilterMismatch(e)}}class Oy{constructor(){this.i=new Map}static get instance(){return Hf||(Hf=new Oy,Sx(Hf)),Hf}u(e){this.i.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),i=this.i;return i.set(t,e),()=>i.delete(t)}}let Hf=null;(function(e,t=!0){n2(Ml),dl(new qa("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new ot(new a2(i.getProvider("auth-internal")),new u2(c,i.getProvider("app-check-internal")),$2(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Cs(aI,oI,e),Cs(aI,oI,"esm2020")})();const $M=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Dy,AggregateField:Pl,AggregateQuerySnapshot:$0,Bytes:bn,CACHE_SIZE_UNLIMITED:LP,CollectionReference:Ei,DocumentReference:et,DocumentSnapshot:Dn,FieldPath:no,FieldValue:Qs,Firestore:ot,FirestoreError:W,GeoPoint:Ai,LoadBundleTask:L0,PersistentCacheIndexManager:fR,Query:Kt,QueryCompositeFilterConstraint:so,QueryConstraint:Kl,QueryDocumentSnapshot:Sc,QueryEndAtConstraint:sh,QueryFieldFilterConstraint:Ql,QueryLimitConstraint:ih,QueryOrderByConstraint:im,QuerySnapshot:Vn,QueryStartAtConstraint:rh,SnapshotMetadata:Ir,Timestamp:Xe,Transaction:lR,VectorValue:Fn,WriteBatch:oR,_AutoId:Pd,_ByteString:Et,_DatabaseId:xs,_DocumentKey:ne,_EmptyAppCheckTokenProvider:c2,_EmptyAuthCredentialsProvider:yb,_FieldPath:pt,_TestingHooks:XM,_cast:Me,_debugAssert:r2,_internalAggregationQueryToProtoRunAggregationQueryRequest:nM,_internalQueryToProtoQueryTarget:tM,_isBase64Available:Q2,_logWarn:Hn,_validateIsNotUsedTogether:Tb,addDoc:cR,aggregateFieldEqual:pM,aggregateQuerySnapshotEqual:gM,and:sM,arrayRemove:ZP,arrayUnion:WP,average:mM,clearIndexedDbPersistence:BP,collection:ka,collectionGroup:MP,connectFirestoreEmulator:k0,count:tR,deleteAllPersistentCacheIndexes:YM,deleteDoc:qM,deleteField:$P,disableNetwork:jP,disablePersistentCacheIndexAutoCreation:QM,doc:$i,documentId:GP,documentSnapshotFromJSON:RM,enableIndexedDbPersistence:UP,enableMultiTabIndexedDbPersistence:zP,enableNetwork:FP,enablePersistentCacheIndexAutoCreation:KM,endAt:fM,endBefore:hM,ensureFirestoreConfigured:Tt,executeWrite:Yl,getAggregateFromServer:nR,getCountFromServer:_M,getDoc:uR,getDocFromCache:PM,getDocFromServer:MM,getDocs:kM,getDocsFromCache:LM,getDocsFromServer:UM,getFirestore:z0,getPersistentCacheIndexManager:GM,increment:u_,initializeFirestore:U0,limit:oM,limitToLast:lM,loadBundle:l_,memoryEagerGarbageCollector:AM,memoryLocalCache:IM,memoryLruGarbageCollector:SM,namedQuery:F0,onSnapshot:La,onSnapshotResume:FM,onSnapshotsInSync:jM,or:rM,orderBy:aM,persistentLocalCache:iR,persistentMultipleTabManager:sR,persistentSingleTabManager:rR,query:c_,queryEqual:Ty,querySnapshotFromJSON:CM,refEqual:kP,runTransaction:OM,serverTimestamp:JP,setDoc:zM,setIndexConfiguration:HM,setLogLevel:i2,snapshotEqual:VM,startAfter:cM,startAt:uM,sum:dM,terminate:HP,updateDoc:BM,vector:eM,waitForPendingWrites:qP,where:h_,writeBatch:hR},Symbol.toStringTag,{value:"Module"}));let _n;try{_n=U0(Og,{localCache:iR({tabManager:sR()})})}catch{_n=z0(Og)}const JM={fi:{daily:"Pivn saldo",saved:"Sstss",points:"pistett",buy:"Kyt -aikaa",noPoints:"Ei tarpeeksi pisteit!",granted:"Peliaika mynnetty!",tasksTitle:"Tehtvt",statsTitle:"Tilastot",inProgress:"Menossa:",availableTasks:"Vapaat tehtvt:",done:"VALMIS ",logout:"Kirjaudu ulos",approve:"Salli aloitus ",givePoints:"Anna pisteit ",executing:"Suoritetaan...",noRequests:"Ei pyyntj",taskSettings:"Tehtvien hallinta",taskName:"Tehtvn nimi",averagePerDay:"Keskiarvo pivss",perWeek:"Viikossa",noData:"Ei tietoja saatavilla",achievementsTab:"Tasot",shopTab:"Kauppa",loading:"Ladataan...",achievements:{title:"Saavutukset",nextLevel:"Seuraava taso:",needed:"Tarvitaan:",xp:"XP",bonus:"Sinun bonuksesi"},shop:{title:"Kauppa",buyButton:"Osta",exchange:"Vaihto",buyPrefix:"Ostettu"},tasks:{laksyt:"Lksyt",jumppa:"Aamujumppa",ulkoilu:"Ulkoilu",kissat:"Kissat",kotityot:"Kotityt",kaytos:"Kyts"},admin:{checkTasks:"Tarkistus",editTasks:"Mallit",settings:"Perhe",shopSettingsTitle:"Kaupan asetukset",typeReward:"Tuote",typeMoney:"Raha",placeholderName:"Nimi...",placeholderBonus:"Palkinto...",placeholderDesc:"Kuvaus...",labelPricePoints:"Hinta (pisteit)",labelAmountEuro:"Summa ()",btnAdd:"Lis",levelsTitle:"Tasot ja saavutukset",clearConfirm:"Haluatko varmasti poistaa kaikki kertatehtvt?",clearOld:"Tyhjenn vanhat",templates:"Kaikki tehtvt",dailyLoad:"Pivn tilanne",requests:"Pyynnt",noRequests:"Ei uusia pyyntj"},auth:{welcome:" Melkein valmista",finishRegistration:"Viimeistele profiilisi",namePlaceholder:"Sinun nimesi",roleChild:"Olen lapsi",roleParent:"Olen vanhempi",familyCodeLabel:"Perhekoodi (jos on)",familyCodePlaceholder:"Esim: fam_xyz123",familyCodeHint:"* Jos jtt tyhjksi, luomme uuden perheryhmn.",startAdventure:"Aloita seikkailu! ",loading:"Hetkinen..."},profile:{roleLabel:"Rooli",familyIdLabel:"Perheen ID",parent:"Vanhempi",child:"Lapsi"},familySettings:{title:"Profiilien hallinta",inviteTitle:"Kutsu jseni",inviteDesc:"Lhet linkki lapselle tai anna skannata QR-koodi",copyCode:"Kopioi koodi",copied:"Kopioitu!",shareLink:"Jaa linkki",addManual:"Lis manuaalisesti",namePlaceholder:"Jsenen nimi",pointsBalance:"Pisteet",adminStatus:"Yllpitj",deleteConfirm:"Poistetaanko kyttj pysyvsti?"},adminForm:{editTitle:"Muokkaa tehtv",createTitle:"Uusi tehtv",forLabel:"KYTTJLLE",pointsLabel:"PISTEET",minutesLabel:"MINUUTIT",saveBtn:"Tallenna",createBtn:"Luo tehtv",copyAsNewBtn:"Kopioi uusi"},titles:{level_novice:"Aloittelija",level_apprentice:"Oppipoika",level_master:"Mestari",level_hero:"Sankari",level_legend:"Legenda"},shop_items:{shop_icecream:"Jtel",shop_gaming:"30 min peliaikaa",shop_cinema:"Elokuva",shop_money:"Rahaa"},stats:{average:"Keskiarvo pivss",weekly:"Viikossa",recentTitle:"Viimeisimmt",noData:"Ei tietoja saatavilla"},howItWorks:{title:"Miten se toimii? ",step1:{t:"Tee tehtvi",d:"Valitse tehtv listalta ja paina Aloita."},step2:{t:"Odota vahvistusta",d:"Vanhempi saa ilmoituksen ja hyvksyy suorituksen."},step3:{t:"Ker pisteit",d:"Saat XP:t ja pisteit jokaisesta tehtvst."},step4:{t:"Kyt kaupassa",d:"Vaihda pisteet peliaikaan, herkkuun tai rahaan."}}},ru:{daily:" ",saved:" ",points:"",buy:"  ",noPoints:" !",granted:" !",tasksTitle:"",statsTitle:"",inProgress:" :",availableTasks:" :",done:" ",logout:"",approve:"  ",givePoints:"  ",executing:"...",noRequests:"  ",taskSettings:" ",taskName:" ",averagePerDay:"  ",perWeek:" ",noData:" ",achievementsTab:"",shopTab:"",loading:"...",achievements:{title:" ",nextLevel:" :",needed:":",xp:"XP",bonus:" "},shop:{title:" ",buyButton:"",exchange:"",buyPrefix:""},tasks:{laksyt:" ",jumppa:"",ulkoilu:"",kissat:" ",kotityot:"  ",kaytos:" "},admin:{checkTasks:"",editTasks:"",settings:"",shopSettingsTitle:" ",typeReward:"",typeMoney:"",placeholderName:"...",placeholderBonus:"  ...",placeholderDesc:"...",labelPricePoints:" ()",labelAmountEuro:" ()",btnAdd:"",levelsTitle:" ",clearConfirm:"   ?",clearOld:" ",templates:" ",dailyLoad:"  ",requests:"",noRequests:"  "},auth:{welcome:"  ",finishRegistration:"  ",namePlaceholder:" ",roleChild:" ",roleParent:" ",familyCodeLabel:"  ( )",familyCodePlaceholder:": fam_xyz123",familyCodeHint:"*   ,    .",startAdventure:" ! ",loading:"..."},profile:{roleLabel:"",familyIdLabel:"ID ",parent:"",child:""},familySettings:{title:" ",inviteTitle:" ",inviteDesc:"      QR-",copyCode:" ",copied:"!",shareLink:"",addManual:" ",namePlaceholder:" ",pointsBalance:"",adminStatus:"",deleteConfirm:"  ?"},adminForm:{editTitle:"",createTitle:" ",forLabel:"",pointsLabel:"",minutesLabel:"",saveBtn:"",createBtn:" ",copyAsNewBtn:" "},titles:{level_novice:"",level_apprentice:"",level_master:"",level_hero:"",level_legend:""},shop_items:{shop_icecream:"",shop_gaming:"30  ",shop_cinema:"  ",shop_money:"  "},stats:{average:"  ",weekly:" ",recentTitle:" ",noData:" "},howItWorks:{title:"  ? ",step1:{t:" ",d:"       ."},step2:{t:" ",d:"     ."},step3:{t:" ",d:"     XP    ."},step4:{t:"  ",d:"    ,    ."}}},en:{daily:"Daily balance",saved:"Saved",points:"points",buy:"Use bonus time",noPoints:"Not enough points!",granted:"Time granted!",tasksTitle:"Tasks",statsTitle:"Statistics",inProgress:"In progress:",availableTasks:"Available tasks:",done:"DONE ",logout:"Logout",approve:"Approve start ",givePoints:"Give points ",executing:"Executing...",noRequests:"No requests",taskSettings:"Task settings",taskName:"Task name",averagePerDay:"Daily average",perWeek:"Per week",noData:"No data available",achievementsTab:"Levels",shopTab:"Shop",loading:"Loading...",achievements:{title:"Achievements",nextLevel:"Next level:",needed:"Needed:",xp:"XP",bonus:"Your bonus"},shop:{title:"Bonus Shop",buyButton:"Buy",exchange:"Exchange",buyPrefix:"Purchased"},tasks:{laksyt:"Homework",jumppa:"Morning gym",ulkoilu:"Outdoors",kissat:"Feed cats",kotityot:"Housework",kaytos:"Behavior"},admin:{checkTasks:"Review",editTasks:"Templates",settings:"Family",shopSettingsTitle:"Shop Settings",typeReward:"Item",typeMoney:"Money",placeholderName:"Name...",placeholderBonus:"Reward or bonus...",placeholderDesc:"Description...",labelPricePoints:"Price (pts)",labelAmountEuro:"Amount ()",btnAdd:"Add",levelsTitle:"Levels & Achievements",clearConfirm:"Are you sure you want to delete all one-time tasks?",clearOld:"Clear old",templates:"All tasks",dailyLoad:"Daily status",requests:"Requests",noRequests:"No new requests"},auth:{welcome:" Almost ready",finishRegistration:"Set up your profile",namePlaceholder:"Your name",roleChild:"I'm a child",roleParent:"I'm a parent",familyCodeLabel:"Family code (if any)",familyCodePlaceholder:"Example: fam_xyz123",familyCodeHint:"* If left empty, a new family group will be created.",startAdventure:"Start adventure! ",loading:"One moment..."},profile:{roleLabel:"Role",familyIdLabel:"Family ID",parent:"Parent",child:"Child"},familySettings:{title:"Profile Management",inviteTitle:"Invite Members",inviteDesc:"Send link or scan QR",copyCode:"Copy code",copied:"Copied!",shareLink:"Share",addManual:"Add manually",namePlaceholder:"Member name",pointsBalance:"Points",adminStatus:"Admin",deleteConfirm:"Delete user permanently?"},adminForm:{editTitle:"Edit Task",createTitle:"New Task",forLabel:"FOR",pointsLabel:"POINTS",minutesLabel:"MINUTES",saveBtn:"Save",createBtn:"Create Task",copyAsNewBtn:"As New"},titles:{level_novice:"Novice",level_apprentice:"Apprentice",level_master:"Master",level_hero:"Hero",level_legend:"Legend"},shop_items:{shop_icecream:"Ice cream",shop_gaming:"30 min gaming",shop_cinema:"Cinema trip",shop_money:"Cash out"},stats:{average:"Aerage day",weekly:"Weekly",recentTitle:"Recent action",noData:"No Data"},howItWorks:{title:"How it works? ",step1:{t:"Complete Tasks",d:'Pick an available task from the list and tap "Start".'},step2:{t:"Wait for Approval",d:"Your parent will get a notification to review and approve your work."},step3:{t:"Earn Points",d:"For every task, you get XP and points added to your balance."},step4:{t:"Spend in Shop",d:"Exchange your points for gaming time, treats, or real rewards."}}}},fI=async(r,e,t,i)=>{const a=hR(_n);try{return a.update($i(_n,"users",e),{currentBalance:u_(t),totalPoints:u_(t)}),i&&a.update($i(_n,"tasks_list",i),{lastCompleted:new Date().toLocaleDateString("sv-SE")}),r&&!r.startsWith("temp_")&&a.delete($i(_n,"approvals",r)),a.set($i(ka(_n,"history")),{userId:e,points:t,label:"Task Completed",type:"earn",date:new Date}),await a.commit()}catch(l){throw console.error(" Transaction Error:",l),l}},WM=async(r,e)=>await cR(ka(_n,"approvals"),{taskId:r.id,label:r.label,points:r.points,status:r.isAutoApprove?"in_progress":"pending",userId:e.uid,familyId:e.familyId,createdAt:new Date,icon:r.icon||""}),ZM=({total:r,lang:e,setLang:t,t:i})=>{const[a,l]=Oe.useState(()=>{const p=document.body.classList.contains("dark"),g=window.matchMedia("(prefers-color-scheme: dark)").matches;return g&&!p&&document.body.classList.add("dark"),p||g});Oe.useEffect(()=>{const p=window.matchMedia("(prefers-color-scheme: dark)"),g=v=>{const E=v.matches;document.body.classList.toggle("dark",E),l(E)};return p.addEventListener("change",g),()=>p.removeEventListener("change",g)},[]);const c=()=>{const p=document.body.classList.toggle("dark");l(p)},d=p=>({fontSize:"22px",cursor:"pointer",border:"none",background:"none",transition:"all 0.3s ease",filter:p?"drop-shadow(0 2px 4px rgba(0,0,0,0.2))":"grayscale(1)",opacity:p?1:.3,transform:p?"scale(1.2)":"scale(1)",padding:"0 4px"});return me.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",backgroundColor:"var(--card-bg)",padding:"12px 16px",borderRadius:"24px",boxShadow:"var(--shadow)",border:"1px solid var(--border-color)",backdropFilter:"blur(10px)",position:"sticky",top:"10px",zIndex:100},children:[me.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[me.jsx("div",{style:{background:"var(--accent-green)",color:"white",width:"32px",height:"32px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",boxShadow:"0 4px 10px rgba(16, 185, 129, 0.3)"},children:""}),me.jsxs("div",{children:[me.jsx("div",{style:{fontSize:"18px",fontWeight:"800",lineHeight:1,color:"var(--text-main)"},children:r}),me.jsx("div",{style:{fontSize:"10px",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:i.points})]})]}),me.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[me.jsx("button",{onClick:c,style:{fontSize:"16px",background:"var(--bg-color)",border:"1px solid var(--border-color)",borderRadius:"12px",width:"36px",height:"36px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:a?"":""}),me.jsx("div",{style:{width:"1px",height:"20px",backgroundColor:"var(--border-color)"}}),me.jsxs("div",{style:{display:"flex",gap:"2px",alignItems:"center"},children:[me.jsx("button",{onClick:()=>t("fi"),style:d(e==="fi"),children:""}),me.jsx("button",{onClick:()=>t("ru"),style:d(e==="ru"),children:""}),me.jsx("button",{onClick:()=>t("en"),style:d(e==="en"),children:""})]})]})]})},ek=({activeTab:r,setActiveTab:e,t,userRole:i})=>{const a=(l,c="#4CAF50")=>({background:"none",border:"none",fontSize:"12px",fontWeight:r===l?"bold":"normal",color:r===l?c:"#888",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"});return me.jsxs("nav",{style:{width:"100%",display:"flex",justifyContent:"space-around",padding:"10px 0",borderTop:"1px solid var(--border-color)",backgroundColor:"var(--card-bg)"},children:[me.jsxs("button",{onClick:()=>e("tasks"),style:a("tasks"),children:[me.jsx("span",{style:{fontSize:"20px"},children:""}),t.tasksTitle]}),me.jsxs("button",{onClick:()=>e("stats"),style:a("stats"),children:[me.jsx("span",{style:{fontSize:"20px"},children:""}),t.statsTitle]}),me.jsxs("button",{onClick:()=>e("shop"),style:a("shop"),children:[me.jsx("span",{style:{fontSize:"20px"},children:""}),t.shopTab]}),me.jsxs("button",{onClick:()=>e("awards"),style:a("awards","#FF9800"),children:[me.jsx("span",{style:{fontSize:"20px"},children:""}),t.achievementsTab]}),i==="parent"&&me.jsxs("button",{onClick:()=>e("admin"),style:a("admin"),children:[me.jsx("span",{style:{fontSize:"20px"},children:""}),t.taskSettings]})]})},tk="1.1.5",nk=new Date().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),ik=({children:r})=>me.jsxs("footer",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"var(--nav-bg)",borderTop:"1px solid var(--border-color)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",boxShadow:"var(--shadow)",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",transition:"background-color 0.4s ease, border-color 0.4s ease",paddingBottom:"env(safe-area-inset-bottom, 5px)"},children:[r,me.jsxs("div",{style:{padding:"4px 0 6px 0",fontSize:"9px",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.5,textAlign:"center",width:"100%"},children:["v.",tk," (",nk,")  Kids Tracker  ",me.jsx("span",{style:{color:"var(--accent-orange)",fontWeight:"bold"},children:"TEST MODE"})]})]}),rk=Oe.lazy(()=>jn(()=>import("./AppBackground-CeQgKlZ5.js"),[]).then(r=>({default:r.AppBackground}))),sk=Oe.lazy(()=>jn(()=>import("./LoginPage-CAhAz16n.js"),__vite__mapDeps([0,1,2])).then(r=>({default:r.LoginPage}))),ak=Oe.lazy(()=>jn(()=>import("./RegisterPage-tFio-uO8.js"),__vite__mapDeps([3,1,2])).then(r=>({default:r.RegisterPage}))),ok=Oe.lazy(()=>jn(()=>import("./ProfileSelector-uPSrffhp.js"),__vite__mapDeps([4,5])).then(r=>({default:r.ProfileSelector}))),lk=Oe.lazy(()=>jn(()=>import("./TaskList-C71077W-.js"),__vite__mapDeps([6,7,8])).then(r=>({default:r.TaskList}))),Gf=Oe.lazy(()=>jn(()=>import("./AdminPanel-Oy_WoOxB.js"),__vite__mapDeps([9,10])).then(r=>({default:r.AdminPanel}))),uk=Oe.lazy(()=>jn(()=>import("./Stats-CVGfEpaX.js"),__vite__mapDeps([11,12])).then(r=>({default:r.Stats}))),ck=Oe.lazy(()=>jn(()=>import("./Achievements-DgbgYtT4.js"),__vite__mapDeps([13,7,8])).then(r=>({default:r.Achievements}))),hk=Oe.lazy(()=>jn(()=>import("./Shop-OGiNwwjG.js"),__vite__mapDeps([14,7,8])).then(r=>({default:r.Shop}))),fk=Oe.lazy(()=>jn(()=>import("./FamilySettings-BWwZd32u.js"),[]).then(r=>({default:r.FamilySettings})));function dk(){const[r,e]=Oe.useState("tasks"),[t,i]=Oe.useState(()=>{const G=navigator.language.split("-")[0];return["fi","ru","en"].includes(G)?G:"en"}),[a,l]=Oe.useState(!1),[c,d]=Oe.useState(!0),[p,g]=Oe.useState(null),[v,E]=Oe.useState([]),[S,O]=Oe.useState([]),[K,Y]=Oe.useState(0),[ee,se]=Oe.useState([]),[le,ue]=Oe.useState(""),[Se,Re]=Oe.useState(null),[_e,w]=Oe.useState("tasks"),b=JM[t];Oe.useEffect(()=>{const ae=new URLSearchParams(window.location.search).get("join");ae&&(sessionStorage.setItem("pending_family_code",ae),window.history.replaceState({},document.title,window.location.pathname))},[]),Oe.useEffect(()=>{let G;const ae=qV(qA,async Ae=>{G&&(G(),G=void 0);try{if(Ae){const xe=await uR($i(_n,"users",Ae.uid));if(xe.exists()){const V=xe.data();g(V),l(!0);const $=c_(ka(_n,"users"),h_("familyId","==",V.familyId));G=La($,oe=>{const ce=oe.docs.map(ve=>({uid:ve.id,...ve.data()}));se(ce);const Te=ce.filter(ve=>ve.role==="child");Te.length>0&&!le&&ue(Te[0].uid)})}else g({uid:Ae.uid,name:Ae.displayName||"",avatar:Ae.photoURL||"",role:"child",familyId:""}),l(!1)}else g(null),l(!1),se([])}catch(xe){console.error("Auth Error:",xe)}finally{d(!1)}});return()=>{ae(),G&&G()}},[le]),Oe.useEffect(()=>{if(!a||!p||!p.familyId)return;const G=La(ka(_n,"tasks_list"),ae=>{const Ae=ae.docs.map(V=>({id:V.id,...V.data()})),xe=p.role==="child"?p.uid:le;E(Ae.filter(V=>!V.assignedTo||V.assignedTo==="all"||V.assignedTo===xe))});return()=>G()},[a,le,p]),Oe.useEffect(()=>{if(!a||!p)return;const G=p.role==="child"?p.uid:le;if(!G)return;const ae=La($i(_n,"users",G),V=>{V.exists()&&Y(V.data().currentBalance||0)}),Ae=c_(ka(_n,"approvals"),h_("userId","==",G)),xe=La(Ae,V=>{O(V.docs.map($=>({id:$.id,...$.data()})))});return()=>{ae(),xe()}},[a,le,p]),Oe.useEffect(()=>{let G;return Se&&Se.timeLeft>0?G=window.setInterval(()=>{Re(ae=>ae?{...ae,timeLeft:ae.timeLeft-1}:null)},1e3):Se&&Se.timeLeft===0&&(alert(t==="ru"?" !":"Aika loppui!"),Re(null)),()=>{G&&clearInterval(G)}},[Se,t]);const D=G=>{const ae=Math.floor(G/60),Ae=G%60;return`${ae}:${Ae<10?"0":""}${Ae}`},P=Oe.useCallback((G,ae)=>{Re({id:G,timeLeft:ae*60})},[]),N=()=>FV(qA).catch(console.error),k=async G=>{if(p){if(p.role==="parent"){await fI($i(ka(_n,"approvals")).id,le,G.points,G.id);return}await WM(G,p)}},R=async G=>{const ae=S.find(Ae=>Ae.id===G);ae&&await fI(ae.id,ae.userId,ae.points,ae.taskId)},ut=async G=>{if(p)try{const{getStorage:ae,ref:Ae,uploadBytes:xe,getDownloadURL:V}=await jn(async()=>{const{getStorage:ve,ref:Ue,uploadBytes:bt,getDownloadURL:ct}=await import("./index.esm-cUUOPPiv.js");return{getStorage:ve,ref:Ue,uploadBytes:bt,getDownloadURL:ct}},[]),{updateDoc:$}=await jn(async()=>{const{updateDoc:ve}=await Promise.resolve().then(()=>$M);return{updateDoc:ve}},void 0),oe=ae(),ce=Ae(oe,`avatars/${p.uid}`);await xe(ce,G);const Te=await V(ce);await $($i(_n,"users",p.uid),{avatar:Te}),g(ve=>ve?{...ve,avatar:Te}:null)}catch(ae){console.error("Upload error:",ae)}},It=G=>({flex:1,padding:"12px 5px",borderRadius:"12px",border:"none",fontSize:"13px",fontWeight:"bold",cursor:"pointer",backgroundColor:G?"var(--accent-blue)":"transparent",color:G?"white":"var(--text-secondary)",transition:"0.3s",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"});if(c)return me.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"white"},children:me.jsx("h2",{children:t==="fi"?"Ladataan...":t==="ru"?"...":"Loading..."})});const Q=p?.role==="parent"?ee.find(G=>G.uid===le):p;return me.jsxs("div",{className:"app-root",children:[me.jsx(Oe.Suspense,{fallback:null,children:me.jsx(rk,{activeTab:r,isAuth:!!p})}),me.jsx("div",{style:{padding:"20px 20px 160px 20px",maxWidth:"800px",margin:"0 auto",minHeight:"100vh",position:"relative",zIndex:1},children:p?a?me.jsxs(me.Fragment,{children:[me.jsx(Oe.Suspense,{children:me.jsx(ok,{profile:p,t:b,onLogout:N,onUploadPhoto:ut})}),p.role==="parent"&&me.jsx("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",overflowX:"auto",paddingBottom:"10px"},children:ee.filter(G=>G.role==="child").map(G=>me.jsxs("button",{onClick:()=>ue(G.uid),style:{padding:"8px 15px",borderRadius:"15px",border:"none",cursor:"pointer",backgroundColor:le===G.uid?"var(--accent-blue)":"var(--card-bg)",color:le===G.uid?"white":"var(--text-main)"},children:[G.avatar," ",G.name]},G.uid))}),me.jsx(ZM,{total:K,lang:t,setLang:i,t:b}),me.jsxs(Oe.Suspense,{fallback:me.jsx("div",{className:"content-loader",children:"Ladataan..."}),children:[r==="tasks"&&me.jsx(lk,{t:b,userRole:p.role,availableTasks:v,myApprovals:S,runningTimer:Se,formatTime:D,startTaskTimer:P,markAsDone:R,requestToStart:k}),r==="stats"&&me.jsx(uk,{t:b,lang:t,childId:p.role==="parent"?le:p.uid}),r==="awards"&&me.jsx(ck,{t:b,totalPoints:Q?.totalPoints||0,userId:Q?.uid||p.uid}),r==="shop"&&me.jsx(hk,{t:b,lang:t,currentBalance:Q?.currentBalance||0,userId:Q?.uid||p.uid,userRole:p.role}),r==="admin"&&p.role==="parent"&&me.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[me.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"5px",background:"rgba(255,255,255,0.05)",padding:"5px",borderRadius:"16px"},children:["tasks","edit","shop","levels","family"].map(G=>me.jsxs("button",{onClick:()=>w(G),style:It(_e===G),children:[G==="tasks"&&""," ",G==="edit"&&""," ",G==="shop"&&""," ",G==="levels"&&""," ",G==="family"&&""]},G))}),_e==="tasks"&&me.jsx(Gf,{t:b,selectedChildId:le,mode:"check",lang:t}),_e==="edit"&&me.jsx(Gf,{t:b,selectedChildId:le,mode:"edit",lang:t}),_e==="shop"&&me.jsx(Gf,{t:b,selectedChildId:le,mode:"shop",lang:t}),_e==="levels"&&me.jsx(Gf,{t:b,selectedChildId:le,mode:"levels",lang:t}),_e==="family"&&me.jsx(fk,{familyId:p.familyId,t:b,profile:p,lang:t,handleLogout:N})]})]}),me.jsx(ik,{children:me.jsx(ek,{activeTab:r,setActiveTab:e,t:b,userRole:p.role})})]}):me.jsx(Oe.Suspense,{children:me.jsx(ak,{googleUid:p.uid,initialName:p.name,initialAvatar:p.avatar,t:b,lang:t,onSuccess:G=>{g(G),l(!0)}})}):me.jsx(Oe.Suspense,{children:me.jsx(sk,{lang:t,onLoginError:G=>console.error(G)})})})]})}function mk(r={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:a,onRegisteredSW:l,onRegisterError:c}=r;let d,p;const g=async(E=!0)=>{await p};async function v(){if("serviceWorker"in navigator){if(d=await jn(async()=>{const{Workbox:E}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:E}},[]).then(({Workbox:E})=>new E("/kids-tracker/sw.js",{scope:"/kids-tracker/",type:"classic"})).catch(E=>{c?.(E)}),!d)return;d.addEventListener("activated",E=>{(E.isUpdate||E.isExternal)&&window.location.reload()}),d.addEventListener("installed",E=>{E.isUpdate||i?.()}),d.register({immediate:e}).then(E=>{l?l("/kids-tracker/sw.js",E):a?.(E)}).catch(E=>{c?.(E)})}}return p=v(),g}const pk=mk({immediate:!1,onNeedRefresh(){confirm(" . ?")&&pk(!0)},onOfflineReady(){console.log("    ")}});nC.createRoot(document.getElementById("root")).render(me.jsx(Oe.StrictMode,{children:me.jsx(dk,{})}));export{c_ as A,h_ as B,qa as C,qM as D,u_ as E,Nr as F,Z1 as G,G1 as H,f_ as I,gk as J,aM as K,X1 as R,Ml as S,qc as _,_n as a,WP as b,ka as c,$i as d,cR as e,fC as f,at as g,CI as h,Za as i,me as j,TI as k,mC as l,qn as m,dl as n,La as o,d_ as p,Cs as q,Oe as r,zM as s,JM as t,BM as u,_k as v,qA as w,yk as x,vk as y,t2 as z};
